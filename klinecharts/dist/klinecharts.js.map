{"version":3,"file":"klinecharts.js","sources":["../src/extension/technicalindicator/directionalmovement/averagePrice.js","../src/extension/technicalindicator/directionalmovement/bullAndBearIndex.js","../src/extension/technicalindicator/directionalmovement/differentOfMovingAverage.js","../src/extension/technicalindicator/directionalmovement/directionalMovementIndex.js","../src/extension/technicalindicator/directionalmovement/easeOfMovementValue.js","../src/extension/technicalindicator/directionalmovement/exponentialMovingAverage.js","../src/extension/technicalindicator/directionalmovement/movingAverage.js","../src/extension/technicalindicator/directionalmovement/movingAverageConvergenceDivergence.js","../src/extension/technicalindicator/directionalmovement/simpleMovingAverage.js","../src/extension/technicalindicator/directionalmovement/tripleExponentiallySmoothedAverage.js","../src/extension/technicalindicator/momentum/brar.js","../src/extension/technicalindicator/momentum/currentRatio.js","../src/extension/technicalindicator/momentum/momentum.js","../src/extension/technicalindicator/momentum/psychologicalLine.js","../src/extension/technicalindicator/momentum/rateOfChange.js","../src/extension/technicalindicator/momentum/volumeRatio.js","../src/extension/technicalindicator/oscillators/awesomeOscillator.js","../src/extension/technicalindicator/oscillators/bias.js","../src/extension/technicalindicator/oscillators/commodityChannelIndex.js","../src/extension/technicalindicator/oscillators/relativeStrengthIndex.js","../src/extension/technicalindicator/calcHnLn.js","../src/extension/technicalindicator/oscillators/stockIndicatorKDJ.js","../src/extension/technicalindicator/oscillators/williamsR.js","../src/extension/technicalindicator/volatility/bollingerBands.js","../src/extension/technicalindicator/volatility/stopAndReverse.js","../src/extension/technicalindicator/volume/onBalanceVolume.js","../src/extension/technicalindicator/volume/priceAndVolumeTrend.js","../src/extension/technicalindicator/volume/volume.js","../src/store/extension.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../src/utils/typeChecks.js","../src/options/styleOptions.js","../src/utils/format.js","../src/utils/logger.js","../src/utils/number.js","../src/enum/ActionType.js","../src/store/TimeScaleStore.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/regeneratorRuntime.js","../node_modules/@babel/runtime/regenerator/index.js","../src/component/technicalindicator/TechnicalIndicator.js","../src/store/TechnicalIndicatorStore.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../src/component/overlay/Overlay.js","../src/renderer/circle.js","../src/extension/shape/shapeHelper.js","../src/renderer/path.js","../src/renderer/line.js","../src/utils/canvas.js","../src/component/overlay/Shape.js","../src/enum/InvalidateLevel.js","../src/store/ShapeStore.js","../src/store/AnnotationStore.js","../src/store/TagStore.js","../src/store/CrosshairStore.js","../src/store/ActionStore.js","../src/store/ChartStore.js","../node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/@babel/runtime/helpers/esm/get.js","../src/utils/element.js","../src/enum/ContainerPosition.js","../src/pane/Pane.js","../src/widget/Widget.js","../src/utils/compatible.js","../src/view/View.js","../src/view/TechnicalIndicatorView.js","../src/renderer/text.js","../src/view/TechnicalIndicatorOverlayView.js","../src/widget/TechnicalIndicatorWidget.js","../src/renderer/rect.js","../src/view/YAxisView.js","../src/view/YAxisOverlayView.js","../src/widget/YAxisWidget.js","../src/component/axis/Axis.js","../src/component/axis/YAxis.js","../src/pane/TechnicalIndicatorPane.js","../src/view/CandleView.js","../src/view/CandleOverlayView.js","../src/widget/CandleWidget.js","../src/pane/CandlePane.js","../src/view/XAxisView.js","../src/view/XAxisOverlayView.js","../src/widget/XAxisWidget.js","../src/component/axis/XAxis.js","../src/pane/XAxisPane.js","../src/utils/id.js","../src/event/eventTypeChecks.js","../src/event/EventBase.js","../src/pane/SeparatorPane.js","../src/event/EventHandler.js","../src/event/ZoomScrollEventHandler.js","../src/event/OverlayEventHandler.js","../src/event/KeyBoardEventHandler.js","../src/event/ChartEvent.js","../src/utils/performance.js","../src/renderer/diamond.js","../src/renderer/triangle.js","../src/component/overlay/Annotation.js","../src/component/overlay/Tag.js","../src/pane/ChartPane.js","../src/Chart.js","../src/core.js","../src/index.simple.js","../src/index.blank.js","../src/extension/shape/horizontalRayLine.js","../src/extension/shape/horizontalSegment.js","../src/extension/shape/horizontalStraightLine.js","../src/extension/shape/verticalRayLine.js","../src/extension/shape/verticalSegment.js","../src/extension/shape/verticalStraightLine.js","../src/extension/shape/rayLine.js","../src/extension/shape/segment.js","../src/extension/shape/straightLine.js","../src/extension/shape/parallelStraightLine.js","../src/extension/shape/priceChannelLine.js","../src/extension/shape/priceLine.js","../src/extension/shape/fibonacciLine.js","../src/index.js"],"sourcesContent":["/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 成交均线\n */\nexport default {\n  name: 'AVP',\n  shortName: 'AVP',\n  series: 'price',\n  precision: 2,\n  plots: [\n    { key: 'avp', title: 'AVP: ', type: 'line' }\n  ],\n  calcTechnicalIndicator: (dataList) => {\n    let totalTurnover = 0\n    let totalVolume = 0\n    return dataList.map(kLineData => {\n      const avp = {}\n      const turnover = kLineData.turnover || 0\n      const volume = kLineData.volume || 0\n      totalTurnover += turnover\n      totalVolume += volume\n      if (totalVolume !== 0) {\n        avp.avp = totalTurnover / totalVolume\n      }\n      return avp\n    })\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 多空指标\n * 公式: BBI = (MA(CLOSE, M) + MA(CLOSE, N) + MA(CLOSE, O) + MA(CLOSE, P)) / 4\n *\n */\nexport default {\n  name: 'BBI',\n  shortName: 'BBI',\n  series: 'price',\n  precision: 2,\n  calcParams: [3, 6, 12, 24],\n  shouldCheckParamCount: true,\n  shouldOhlc: true,\n  plots: [\n    { key: 'bbi', title: 'BBI: ', type: 'line' }\n  ],\n  calcTechnicalIndicator: (dataList, { params }) => {\n    const maxPeriod = Math.max.apply(null, params)\n    const closeSums = []\n    const mas = []\n    return dataList.map((kLineData, i) => {\n      const bbi = {}\n      const close = kLineData.close\n      params.forEach((p, index) => {\n        closeSums[index] = (closeSums[index] || 0) + close\n        if (i >= p - 1) {\n          mas[index] = closeSums[index] / p\n          closeSums[index] -= dataList[i - (p - 1)].close\n        }\n      })\n      if (i >= maxPeriod - 1) {\n        let maSum = 0\n        mas.forEach(ma => {\n          maSum += ma\n        })\n        bbi.bbi = maSum / 4\n      }\n      return bbi\n    })\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * DMA\n * 公式：DIF:MA(CLOSE,N1)-MA(CLOSE,N2);DIFMA:MA(DIF,M)\n */\nexport default {\n  name: 'DMA',\n  shortName: 'DMA',\n  calcParams: [10, 50, 10],\n  plots: [\n    { key: 'dma', title: 'DMA: ', type: 'line' },\n    { key: 'ama', title: 'AMA: ', type: 'line' }\n  ],\n  calcTechnicalIndicator: (dataList, { params }) => {\n    const maxPeriod = Math.max(params[0], params[1])\n    let closeSum1 = 0\n    let closeSum2 = 0\n    let dmaSum = 0\n    const result = []\n    dataList.forEach((kLineData, i) => {\n      const dma = {}\n      const close = kLineData.close\n      closeSum1 += close\n      closeSum2 += close\n      let ma1\n      let ma2\n      if (i >= params[0] - 1) {\n        ma1 = closeSum1 / params[0]\n        closeSum1 -= dataList[i - (params[0] - 1)].close\n      }\n      if (i >= params[1] - 1) {\n        ma2 = closeSum2 / params[1]\n        closeSum2 -= dataList[i - (params[1] - 1)].close\n      }\n\n      if (i >= maxPeriod - 1) {\n        const dif = ma1 - ma2\n        dma.dma = dif\n        dmaSum += dif\n        if (i >= maxPeriod + params[2] - 2) {\n          dma.ama = dmaSum / params[2]\n          dmaSum -= result[i - (params[2] - 1)].dma\n        }\n      }\n      result.push(dma)\n    })\n    return result\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * DMI\n *\n * MTR:=EXPMEMA(MAX(MAX(HIGH-LOW,ABS(HIGH-REF(CLOSE,1))),ABS(REF(CLOSE,1)-LOW)),N)\n * HD :=HIGH-REF(HIGH,1);\n * LD :=REF(LOW,1)-LOW;\n * DMP:=EXPMEMA(IF(HD>0&&HD>LD,HD,0),N);\n * DMM:=EXPMEMA(IF(LD>0&&LD>HD,LD,0),N);\n *\n * PDI: DMP*100/MTR;\n * MDI: DMM*100/MTR;\n * ADX: EXPMEMA(ABS(MDI-PDI)/(MDI+PDI)*100,MM);\n * ADXR:EXPMEMA(ADX,MM);\n * 公式含义：\n * MTR赋值:最高价-最低价和最高价-昨收的绝对值的较大值和昨收-最低价的绝对值的较大值的N日指数平滑移动平均\n * HD赋值:最高价-昨日最高价\n * LD赋值:昨日最低价-最低价\n * DMP赋值:如果HD>0并且HD>LD,返回HD,否则返回0的N日指数平滑移动平均\n * DMM赋值:如果LD>0并且LD>HD,返回LD,否则返回0的N日指数平滑移动平均\n * 输出PDI:DMP*100/MTR\n * 输出MDI:DMM*100/MTR\n * 输出ADX:MDI-PDI的绝对值/(MDI+PDI)*100的MM日指数平滑移动平均\n * 输出ADXR:ADX的MM日指数平滑移动平均\n *\n */\nexport default {\n  name: 'DMI',\n  shortName: 'DMI',\n  calcParams: [14, 6],\n  plots: [\n    { key: 'pdi', title: 'PDI: ', type: 'line' },\n    { key: 'mdi', title: 'MDI: ', type: 'line' },\n    { key: 'adx', title: 'ADX: ', type: 'line' },\n    { key: 'adxr', title: 'ADXR: ', type: 'line' }\n  ],\n  calcTechnicalIndicator: (dataList, { params }) => {\n    let trSum = 0\n    let hSum = 0\n    let lSum = 0\n    let mtr = 0\n    let dmp = 0\n    let dmm = 0\n    let dxSum = 0\n    let adx = 0\n    const result = []\n    dataList.forEach((kLineData, i) => {\n      const dmi = {}\n      const preKLineData = dataList[i - 1] || kLineData\n      const preClose = preKLineData.close\n      const high = kLineData.high\n      const low = kLineData.low\n      const hl = high - low\n      const hcy = Math.abs(high - preClose)\n      const lcy = Math.abs(preClose - low)\n      const hhy = high - preKLineData.high\n      const lyl = preKLineData.low - low\n      const tr = Math.max(Math.max(hl, hcy), lcy)\n      const h = (hhy > 0 && hhy > lyl) ? hhy : 0\n      const l = (lyl > 0 && lyl > hhy) ? lyl : 0\n      trSum += tr\n      hSum += h\n      lSum += l\n      if (i >= params[0] - 1) {\n        if (i > params[0] - 1) {\n          mtr = mtr - mtr / params[0] + tr\n          dmp = dmp - dmp / params[0] + h\n          dmm = dmm - dmm / params[0] + l\n        } else {\n          mtr = trSum\n          dmp = hSum\n          dmm = lSum\n        }\n        let pdi = 0\n        let mdi = 0\n        if (mtr !== 0) {\n          pdi = dmp * 100 / mtr\n          mdi = dmm * 100 / mtr\n        }\n        dmi.pdi = pdi\n        dmi.mdi = mdi\n        let dx = 0\n        if (mdi + pdi !== 0) {\n          dx = Math.abs((mdi - pdi)) / (mdi + pdi) * 100\n        }\n        dxSum += dx\n        if (i >= params[0] * 2 - 2) {\n          if (i > params[0] * 2 - 2) {\n            adx = (adx * (params[0] - 1) + dx) / params[0]\n          } else {\n            adx = dxSum / params[0]\n          }\n          dmi.adx = adx\n          if (i >= params[0] * 2 + params[1] - 3) {\n            dmi.adxr = (result[i - (params[1] - 1)].adx + adx) / 2\n          }\n        }\n      }\n      result.push(dmi)\n    })\n    return result\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n *\n * EMV 简易波动指标\n * 公式：\n * A=（今日最高+今日最低）/2\n * B=（前日最高+前日最低）/2\n * C=今日最高-今日最低\n * EM=（A-B）*C/今日成交额\n * EMV=N日内EM的累和\n * MAEMV=EMV的M日的简单移动平均\n *\n */\nexport default {\n  name: 'EMV',\n  shortName: 'EMV',\n  calcParams: [14, 9],\n  plots: [\n    { key: 'emv', title: 'EMV: ', type: 'line' },\n    { key: 'maEmv', title: 'MAEMV: ', type: 'line' }\n  ],\n  calcTechnicalIndicator: (dataList, { params }) => {\n    let emSum = 0\n    let emvSum = 0\n    const emList = []\n    const result = []\n    dataList.forEach((kLineData, i) => {\n      const emv = {}\n      const preKLineData = dataList[i - 1] || kLineData\n      const high = kLineData.high\n      const low = kLineData.low\n      const turnover = kLineData.turnover || 0\n      const halfHl = (high + low) / 2\n      const preHalfHl = (preKLineData.high + preKLineData.low) / 2\n      const hl = high - low\n      let em = 0\n      if (turnover !== 0) {\n        em = (halfHl - preHalfHl) * hl / turnover\n      }\n      emList.push(em)\n      emSum += em\n      if (i >= params[0] - 1) {\n        emv.emv = emSum\n        emSum -= emList[i - (params[0] - 1)]\n        emvSum += emv.emv\n        if (i >= params[0] + params[1] - 2) {\n          emv.maEmv = emvSum / params[1]\n          emvSum -= result[i - (params[1] - 1)].emv\n        }\n      }\n      result.push(emv)\n    })\n    return result\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * EMA 指数移动平均\n */\nexport default {\n  name: 'EMA',\n  shortName: 'EMA',\n  series: 'price',\n  calcParams: [6, 12, 20],\n  precision: 2,\n  shouldCheckParamCount: false,\n  shouldOhlc: true,\n  plots: [\n    { key: 'ema6', title: 'EMA6: ', type: 'line' },\n    { key: 'ema12', title: 'EMA12: ', type: 'line' },\n    { key: 'ema20', title: 'EMA20: ', type: 'line' }\n  ],\n  regeneratePlots: (params) => {\n    return params.map(p => {\n      return { key: `ema${p}`, title: `EMA${p}: `, type: 'line' }\n    })\n  },\n  calcTechnicalIndicator: (dataList, { params, plots }) => {\n    let closeSum = 0\n    const emaValues = []\n    return dataList.map((kLineData, i) => {\n      const ema = {}\n      const close = kLineData.close\n      closeSum += close\n      params.forEach((p, index) => {\n        if (i >= p - 1) {\n          if (i > p - 1) {\n            emaValues[index] = (2 * close + (p - 1) * emaValues[index]) / (p + 1)\n          } else {\n            emaValues[index] = closeSum / p\n          }\n          ema[plots[index].key] = emaValues[index]\n        }\n      })\n      return ema\n    })\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * MA 移动平均\n */\nexport default {\n  name: 'MA',\n  shortName: 'MA',\n  series: 'price',\n  calcParams: [5, 10, 30, 60],\n  precision: 2,\n  shouldCheckParamCount: false,\n  shouldOhlc: true,\n  plots: [\n    { key: 'ma5', title: 'MA5: ', type: 'line' },\n    { key: 'ma10', title: 'MA10: ', type: 'line' },\n    { key: 'ma30', title: 'MA30: ', type: 'line' },\n    { key: 'ma60', title: 'MA60: ', type: 'line' }\n  ],\n  regeneratePlots: (params) => {\n    return params.map(p => {\n      return { key: `ma${p}`, title: `MA${p}: `, type: 'line' }\n    })\n  },\n  calcTechnicalIndicator: (dataList, { params, plots }) => {\n    const closeSums = []\n    return dataList.map((kLineData, i) => {\n      const ma = {}\n      const close = kLineData.close\n      params.forEach((p, index) => {\n        closeSums[index] = (closeSums[index] || 0) + close\n        if (i >= p - 1) {\n          ma[plots[index].key] = closeSums[index] / p\n          closeSums[index] -= dataList[i - (p - 1)].close\n        }\n      })\n      return ma\n    })\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * MACD：参数快线移动平均、慢线移动平均、移动平均，\n * 默认参数值12、26、9。\n * 公式：⒈首先分别计算出收盘价12日指数平滑移动平均线与26日指数平滑移动平均线，分别记为EMA(12）与EMA(26）。\n * ⒉求这两条指数平滑移动平均线的差，即：DIFF = EMA(SHORT) － EMA(LONG)。\n * ⒊再计算DIFF的M日的平均的指数平滑移动平均线，记为DEA。\n * ⒋最后用DIFF减DEA，得MACD。MACD通常绘制成围绕零轴线波动的柱形图。MACD柱状大于0涨颜色，小于0跌颜色。\n */\nexport default {\n  name: 'MACD',\n  shortName: 'MACD',\n  calcParams: [12, 26, 9],\n  plots: [\n    { key: 'dif', title: 'DIF: ', type: 'line' },\n    { key: 'dea', title: 'DEA: ', type: 'line' },\n    {\n      key: 'macd',\n      title: 'MACD: ',\n      type: 'bar',\n      baseValue: 0,\n      color: (data, options) => {\n        const { current } = data\n        const macd = (current.technicalIndicatorData || {}).macd\n        if (macd > 0) {\n          return options.bar.upColor\n        } else if (macd < 0) {\n          return options.bar.downColor\n        } else {\n          return options.bar.noChangeColor\n        }\n      },\n      isStroke: (data) => {\n        const { prev, current } = data\n        const macd = (current.technicalIndicatorData || {}).macd\n        const preMacd = (prev.technicalIndicatorData || {}).macd\n        return preMacd < macd\n      }\n    }\n  ],\n  calcTechnicalIndicator: (dataList, { params }) => {\n    let closeSum = 0\n    let emaShort\n    let emaLong\n    let dif = 0\n    let difSum = 0\n    let dea = 0\n    const maxPeriod = Math.max(params[0], params[1])\n    return dataList.map((kLineData, i) => {\n      const macd = {}\n      const close = kLineData.close\n      closeSum += close\n      if (i >= params[0] - 1) {\n        if (i > params[0] - 1) {\n          emaShort = (2 * close + (params[0] - 1) * emaShort) / (params[0] + 1)\n        } else {\n          emaShort = closeSum / params[0]\n        }\n      }\n      if (i >= params[1] - 1) {\n        if (i > params[1] - 1) {\n          emaLong = (2 * close + (params[1] - 1) * emaLong) / (params[1] + 1)\n        } else {\n          emaLong = closeSum / params[1]\n        }\n      }\n      if (i >= maxPeriod - 1) {\n        dif = emaShort - emaLong\n        macd.dif = dif\n        difSum += dif\n        if (i >= maxPeriod + params[2] - 2) {\n          if (i > maxPeriod + params[2] - 2) {\n            dea = (dif * 2 + dea * (params[2] - 1)) / (params[2] + 1)\n          } else {\n            dea = difSum / params[2]\n          }\n          macd.macd = (dif - dea) * 2\n          macd.dea = dea\n        }\n      }\n      return macd\n    })\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * sma\n */\nexport default {\n  name: 'SMA',\n  shortName: 'SMA',\n  series: 'price',\n  calcParams: [12, 2],\n  precision: 2,\n  plots: [\n    { key: 'sma', title: 'SMA: ', type: 'line' }\n  ],\n  shouldCheckParamCount: true,\n  shouldOhlc: true,\n  calcTechnicalIndicator: (kLineDataList, { params }) => {\n    let closeSum = 0\n    let smaValue = 0\n    return kLineDataList.map((kLineData, i) => {\n      const sma = {}\n      const close = kLineData.close\n      closeSum += close\n      if (i >= params[0] - 1) {\n        if (i > params[0] - 1) {\n          smaValue = (close * params[1] + smaValue * (params[0] - params[1] + 1)) / (params[0] + 1)\n        } else {\n          smaValue = closeSum / params[0]\n        }\n        sma.sma = smaValue\n      }\n      return sma\n    })\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http:*www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * trix\n *\n * TR=收盘价的N日指数移动平均的N日指数移动平均的N日指数移动平均；\n * TRIX=(TR-昨日TR)/昨日TR*100；\n * MATRIX=TRIX的M日简单移动平均；\n * 默认参数N设为12，默认参数M设为9；\n * 默认参数12、9\n * 公式：MTR:=EMA(EMA(EMA(CLOSE,N),N),N)\n * TRIX:(MTR-REF(MTR,1))/REF(MTR,1)*100;\n * TRMA:MA(TRIX,M)\n *\n */\nexport default {\n  name: 'TRIX',\n  shortName: 'TRIX',\n  calcParams: [12, 9],\n  plots: [\n    { key: 'trix', title: 'TRIX: ', type: 'line' },\n    { key: 'maTrix', title: 'MATRIX: ', type: 'line' }\n  ],\n  calcTechnicalIndicator: (dataList, { params }) => {\n    let closeSum = 0\n    let ema1\n    let ema2\n    let oldTr\n    let ema1Sum = 0\n    let ema2Sum = 0\n    let trixSum = 0\n    const result = []\n    dataList.forEach((kLineData, i) => {\n      const trix = {}\n      const close = kLineData.close\n      closeSum += close\n      if (i >= params[0] - 1) {\n        if (i > params[0] - 1) {\n          ema1 = (2 * close + (params[0] - 1) * ema1) / (params[0] + 1)\n        } else {\n          ema1 = closeSum / params[0]\n        }\n        ema1Sum += ema1\n        if (i >= params[0] * 2 - 2) {\n          if (i > params[0] * 2 - 2) {\n            ema2 = (2 * ema1 + (params[0] - 1) * ema2) / (params[0] + 1)\n          } else {\n            ema2 = ema1Sum / params[0]\n          }\n          ema2Sum += ema2\n          if (i >= params[0] * 3 - 3) {\n            let tr\n            let trixValue = 0\n            if (i > params[0] * 3 - 3) {\n              tr = (2 * ema2 + (params[0] - 1) * oldTr) / (params[0] + 1)\n              trixValue = (tr - oldTr) / oldTr * 100\n            } else {\n              tr = ema2Sum / params[0]\n            }\n            oldTr = tr\n            trix.trix = trixValue\n            trixSum += trixValue\n            if (i >= params[0] * 3 + params[1] - 4) {\n              trix.maTrix = trixSum / params[1]\n              trixSum -= result[i - (params[1] - 1)].trix\n            }\n          }\n        }\n      }\n      result.push(trix)\n    })\n    return result\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * BRAR\n * 默认参数是26。\n * 公式N日BR=N日内（H－CY）之和除以N日内（CY－L）之和*100，\n * 其中，H为当日最高价，L为当日最低价，CY为前一交易日的收盘价，N为设定的时间参数。\n * N日AR=(N日内（H－O）之和除以N日内（O－L）之和)*100，\n * 其中，H为当日最高价，L为当日最低价，O为当日开盘价，N为设定的时间参数\n *\n */\nexport default {\n  name: 'BRAR',\n  shortName: 'BRAR',\n  calcParams: [26],\n  plots: [\n    { key: 'br', title: 'BR: ', type: 'line' },\n    { key: 'ar', title: 'AR: ', type: 'line' }\n  ],\n  calcTechnicalIndicator: (dataList, { params }) => {\n    let hcy = 0\n    let cyl = 0\n    let ho = 0\n    let ol = 0\n    return dataList.map((kLineData, i) => {\n      const brar = {}\n      const high = kLineData.high\n      const low = kLineData.low\n      const open = kLineData.open\n      const preClose = (dataList[i - 1] || kLineData).close\n      ho += (high - open)\n      ol += (open - low)\n      hcy += (high - preClose)\n      cyl += (preClose - low)\n      if (i >= params[0] - 1) {\n        if (ol !== 0) {\n          brar.ar = ho / ol * 100\n        } else {\n          brar.ar = 0\n        }\n        if (cyl !== 0) {\n          brar.br = hcy / cyl * 100\n        } else {\n          brar.br = 0\n        }\n        const agoKLineData = dataList[i - (params[0] - 1)]\n        const agoHigh = agoKLineData.high\n        const agoLow = agoKLineData.low\n        const agoOpen = agoKLineData.open\n        const agoPreClose = (dataList[i - params[0]] || dataList[i - (params[0] - 1)]).close\n        hcy -= (agoHigh - agoPreClose)\n        cyl -= (agoPreClose - agoLow)\n        ho -= (agoHigh - agoOpen)\n        ol -= (agoOpen - agoLow)\n      }\n      return brar\n    })\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http:*www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * MID:=REF(HIGH+LOW,1)/2;\n * CR:SUM(MAX(0,HIGH-MID),N)/SUM(MAX(0,MID-LOW),N)*100;\n * MA1:REF(MA(CR,M1),M1/2.5+1);\n * MA2:REF(MA(CR,M2),M2/2.5+1);\n * MA3:REF(MA(CR,M3),M3/2.5+1);\n * MA4:REF(MA(CR,M4),M4/2.5+1);\n * MID赋值:(昨日最高价+昨日最低价)/2\n * 输出带状能量线:0和最高价-MID的较大值的N日累和/0和MID-最低价的较大值的N日累和*100\n * 输出MA1:M1(5)/2.5+1日前的CR的M1(5)日简单移动平均\n * 输出MA2:M2(10)/2.5+1日前的CR的M2(10)日简单移动平均\n * 输出MA3:M3(20)/2.5+1日前的CR的M3(20)日简单移动平均\n * 输出MA4:M4/2.5+1日前的CR的M4日简单移动平均\n *\n */\nexport default {\n  name: 'CR',\n  shortName: 'CR',\n  calcParams: [26, 10, 20, 40, 60],\n  plots: [\n    { key: 'cr', title: 'CR: ', type: 'line' },\n    { key: 'ma1', title: 'MA1: ', type: 'line' },\n    { key: 'ma2', title: 'MA2: ', type: 'line' },\n    { key: 'ma3', title: 'MA3: ', type: 'line' },\n    { key: 'ma4', title: 'MA4: ', type: 'line' }\n  ],\n  calcTechnicalIndicator: (dataList, { params }) => {\n    const ma1ForwardPeriod = Math.ceil(params[1] / 2.5 + 1)\n    const ma2ForwardPeriod = Math.ceil(params[2] / 2.5 + 1)\n    const ma3ForwardPeriod = Math.ceil(params[3] / 2.5 + 1)\n    const ma4ForwardPeriod = Math.ceil(params[4] / 2.5 + 1)\n    let ma1Sum = 0\n    const ma1List = []\n    let ma2Sum = 0\n    const ma2List = []\n    let ma3Sum = 0\n    const ma3List = []\n    let ma4Sum = 0\n    const ma4List = []\n    const result = []\n    dataList.forEach((kLineData, i) => {\n      const cr = {}\n      const preData = dataList[i - 1] || kLineData\n      const preMid = (preData.high + preData.close + preData.low + preData.open) / 4\n\n      const highSubPreMid = Math.max(0, kLineData.high - preMid)\n\n      const preMidSubLow = Math.max(0, preMid - kLineData.low)\n\n      if (i >= params[0] - 1) {\n        if (preMidSubLow !== 0) {\n          cr.cr = highSubPreMid / preMidSubLow * 100\n        } else {\n          cr.cr = 0\n        }\n        ma1Sum += cr.cr\n        ma2Sum += cr.cr\n        ma3Sum += cr.cr\n        ma4Sum += cr.cr\n        if (i >= params[0] + params[1] - 2) {\n          ma1List.push(ma1Sum / params[1])\n          if (i >= params[0] + params[1] + ma1ForwardPeriod - 3) {\n            cr.ma1 = ma1List[ma1List.length - 1 - ma1ForwardPeriod]\n          }\n          ma1Sum -= result[i - (params[1] - 1)].cr\n        }\n        if (i >= params[0] + params[2] - 2) {\n          ma2List.push(ma2Sum / params[2])\n          if (i >= params[0] + params[2] + ma2ForwardPeriod - 3) {\n            cr.ma2 = ma2List[ma2List.length - 1 - ma2ForwardPeriod]\n          }\n          ma2Sum -= result[i - (params[2] - 1)].cr\n        }\n        if (i >= params[0] + params[3] - 2) {\n          ma3List.push(ma3Sum / params[3])\n          if (i >= params[0] + params[3] + ma3ForwardPeriod - 3) {\n            cr.ma3 = ma3List[ma3List.length - 1 - ma3ForwardPeriod]\n          }\n          ma3Sum -= result[i - (params[3] - 1)].cr\n        }\n        if (i >= params[0] + params[4] - 2) {\n          ma4List.push(ma4Sum / params[4])\n          if (i >= params[0] + params[4] + ma4ForwardPeriod - 3) {\n            cr.ma4 = ma4List[ma4List.length - 1 - ma4ForwardPeriod]\n          }\n          ma4Sum -= result[i - (params[4] - 1)].cr\n        }\n      }\n      result.push(cr)\n    })\n    return result\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * mtm\n * 公式 MTM（N日）=C－CN\n */\nexport default {\n  name: 'MTM',\n  shortName: 'MTM',\n  calcParams: [12, 6],\n  plots: [\n    { key: 'mtm', title: 'MTM: ', type: 'line' },\n    { key: 'maMtm', title: 'MAMTM: ', type: 'line' }\n  ],\n  calcTechnicalIndicator: (dataList, { params }) => {\n    let mtmSum = 0\n    const result = []\n    dataList.forEach((kLineData, i) => {\n      const mtm = {}\n      if (i >= params[0]) {\n        const close = kLineData.close\n        const agoClose = dataList[i - params[0]].close\n        mtm.mtm = close - agoClose\n        mtmSum += mtm.mtm\n        if (i >= params[0] + params[1] - 1) {\n          mtm.maMtm = mtmSum / params[1]\n          mtmSum -= result[i - (params[1] - 1)].mtm\n        }\n      }\n      result.push(mtm)\n    })\n    return result\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * PSY\n * 公式：PSY=N日内的上涨天数/N×100%。\n */\nexport default {\n  name: 'PSY',\n  shortName: 'PSY',\n  calcParams: [12, 6],\n  plots: [\n    { key: 'psy', title: 'PSY: ', type: 'line' },\n    { key: 'maPsy', title: 'MAPSY: ', type: 'line' }\n  ],\n  calcTechnicalIndicator: (dataList, { params }) => {\n    let upCount = 0\n    let psySum = 0\n    const upList = []\n    const result = []\n    dataList.forEach((kLineData, i) => {\n      const psy = {}\n      const preClose = (dataList[i - 1] || kLineData).close\n      const upFlag = kLineData.close - preClose > 0 ? 1 : 0\n      upList.push(upFlag)\n      upCount += upFlag\n      if (i >= params[0] - 1) {\n        psy.psy = upCount / params[0] * 100\n        psySum += psy.psy\n        if (i >= params[0] + params[1] - 2) {\n          psy.maPsy = psySum / params[1]\n          psySum -= result[i - (params[1] - 1)].psy\n        }\n        upCount -= upList[i - (params[0] - 1)]\n      }\n      result.push(psy)\n    })\n    return result\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 变动率指标\n * 公式：ROC = (CLOSE - REF(CLOSE, N)) / REF(CLOSE, N)\n */\nexport default {\n  name: 'ROC',\n  shortName: 'ROC',\n  calcParams: [12, 6],\n  shouldCheckParamCount: true,\n  plots: [\n    { key: 'roc', title: 'ROC: ', type: 'line' },\n    { key: 'maRoc', title: 'MAROC: ', type: 'line' }\n  ],\n  calcTechnicalIndicator: (kLineDataList, { params }) => {\n    const result = []\n    let rocSum = 0\n    kLineDataList.forEach((kLineData, i) => {\n      const roc = {}\n      if (i >= params[0] - 1) {\n        const close = kLineData.close\n        const agoClose = (kLineDataList[i - params[0]] || kLineDataList[i - (params[0] - 1)]).close\n        if (agoClose !== 0) {\n          roc.roc = (close - agoClose) / agoClose * 100\n        } else {\n          roc.roc = 0\n        }\n        rocSum += roc.roc\n        if (i >= params[0] - 1 + params[1] - 1) {\n          roc.maRoc = rocSum / params[1]\n          rocSum -= result[i - (params[1] - 1)].roc\n        }\n      }\n      result.push(roc)\n    })\n    return result\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * VR\n * VR=（UVS+1/2PVS）/（DVS+1/2PVS）\n * 24天以来凡是股价上涨那一天的成交量都称为AV，将24天内的AV总和相加后称为UVS\n * 24天以来凡是股价下跌那一天的成交量都称为BV，将24天内的BV总和相加后称为DVS\n * 24天以来凡是股价不涨不跌，则那一天的成交量都称为CV，将24天内的CV总和相加后称为PVS\n *\n */\nexport default {\n  name: 'VR',\n  shortName: 'VR',\n  calcParams: [26, 6],\n  plots: [\n    { key: 'vr', title: 'VR: ', type: 'line' },\n    { key: 'maVr', title: 'MAVR: ', type: 'line' }\n  ],\n  calcTechnicalIndicator: (dataList, { params }) => {\n    let uvs = 0\n    let dvs = 0\n    let pvs = 0\n    let vrSum = 0\n    const result = []\n    dataList.forEach((kLineData, i) => {\n      const vr = {}\n      const close = kLineData.close\n      const preClose = (dataList[i - 1] || kLineData).close\n      const volume = kLineData.volume\n      if (close > preClose) {\n        uvs += volume\n      } else if (close < preClose) {\n        dvs += volume\n      } else {\n        pvs += volume\n      }\n      if (i >= params[0] - 1) {\n        const halfPvs = pvs / 2\n        if (dvs + halfPvs === 0) {\n          vr.vr = 0\n        } else {\n          vr.vr = (uvs + halfPvs) / (dvs + halfPvs) * 100\n        }\n        vrSum += vr.vr\n        if (i >= params[0] + params[1] - 2) {\n          vr.maVr = vrSum / params[1]\n          vrSum -= result[i - (params[1] - 1)].vr\n        }\n\n        const agoData = dataList[i - (params[0] - 1)]\n        const agoPreData = dataList[i - params[0]] || agoData\n        const agoClose = agoData.close\n        const agoVolume = agoData.volume\n        if (agoClose > agoPreData.close) {\n          uvs -= agoVolume\n        } else if (agoClose < agoPreData.close) {\n          dvs -= agoVolume\n        } else {\n          pvs -= agoVolume\n        }\n      }\n      result.push(vr)\n    })\n    return result\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default {\n  name: 'AO',\n  shortName: 'AO',\n  calcParams: [5, 34],\n  shouldCheckParamCount: true,\n  plots: [{\n    key: 'ao',\n    title: 'AO: ',\n    type: 'bar',\n    baseValue: 0,\n    color: (data, options) => {\n      const { prev, current } = data\n      const preAo = (prev.technicalIndicatorData || {}).ao\n      const ao = (current.technicalIndicatorData || {}).ao\n      if (ao > preAo) {\n        return options.bar.upColor\n      } else {\n        return options.bar.downColor\n      }\n    },\n    isStroke: (data) => {\n      const { prev, current } = data\n      const preAo = (prev.technicalIndicatorData || {}).ao\n      const ao = (current.technicalIndicatorData || {}).ao\n      return ao > preAo\n    }\n  }],\n  calcTechnicalIndicator: (kLineDataList, { params }) => {\n    const maxPeriod = Math.max(params[0], params[1])\n    let shortSum = 0\n    let longSum = 0\n    let short = 0\n    let long = 0\n    return kLineDataList.map((kLineData, i) => {\n      const ao = {}\n      const middle = (kLineData.low + kLineData.high) / 2\n      shortSum += middle\n      longSum += middle\n      if (i >= params[0] - 1) {\n        short = shortSum / params[0]\n        const agoKLineData = kLineDataList[i - (params[0] - 1)]\n        shortSum -= ((agoKLineData.low + agoKLineData.high) / 2)\n      }\n      if (i >= params[1] - 1) {\n        long = longSum / params[1]\n        const agoKLineData = kLineDataList[i - (params[1] - 1)]\n        longSum -= ((agoKLineData.low + agoKLineData.high) / 2)\n      }\n      if (i >= maxPeriod - 1) {\n        ao.ao = short - long\n      }\n      return ao\n    })\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * BIAS\n * 乖离率=[(当日收盘价-N日平均价)/N日平均价]*100%\n */\nexport default {\n  name: 'BIAS',\n  shortName: 'BIAS',\n  calcParams: [6, 12, 24],\n  shouldCheckParamCount: false,\n  plots: [\n    { key: 'bias6', title: 'BIAS6: ', type: 'line' },\n    { key: 'bias12', title: 'BIAS12: ', type: 'line' },\n    { key: 'bias24', title: 'BIAS24: ', type: 'line' }\n  ],\n  regeneratePlots: (params) => {\n    return params.map(p => {\n      return { key: `bias${p}`, title: `BIAS${p}: `, type: 'line' }\n    })\n  },\n  calcTechnicalIndicator: (dataList, { params, plots }) => {\n    const closeSums = []\n    return dataList.map((kLineData, i) => {\n      const bias = {}\n      const close = kLineData.close\n      params.forEach((p, index) => {\n        closeSums[index] = (closeSums[index] || 0) + close\n        if (i >= p - 1) {\n          const mean = closeSums[index] / params[index]\n          bias[plots[index].key] = (close - mean) / mean * 100\n\n          closeSums[index] -= dataList[i - (p - 1)].close\n        }\n      })\n      return bias\n    })\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * CCI\n * CCI（N日）=（TP－MA）÷MD÷0.015\n * 其中，TP=（最高价+最低价+收盘价）÷3\n * MA=近N日TP价的累计之和÷N\n * MD=近N日TP - 当前MA绝对值的累计之和÷N\n *\n */\nexport default {\n  name: 'CCI',\n  shortName: 'CCI',\n  calcParams: [20],\n  plots: [\n    { key: 'cci', title: 'CCI: ', type: 'line' }\n  ],\n  calcTechnicalIndicator: (dataList, { params }) => {\n    const p = params[0] - 1\n    let tpSum = 0\n    const tpList = []\n    return dataList.map((kLineData, i) => {\n      const cci = {}\n      const tp = (kLineData.high + kLineData.low + kLineData.close) / 3\n      tpSum += tp\n      tpList.push(tp)\n      if (i >= p) {\n        const maTp = tpSum / params[0]\n        const sliceTpList = tpList.slice(i - p, i + 1)\n        let sum = 0\n        sliceTpList.forEach(tp => {\n          sum += Math.abs(tp - maTp)\n        })\n        const md = sum / params[0]\n        cci.cci = md !== 0 ? (tp - maTp) / md / 0.015 : 0\n        const agoTp = (dataList[i - p].high + dataList[i - p].low + dataList[i - p].close) / 3\n        tpSum -= agoTp\n      }\n      return cci\n    })\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * RSI\n * RSI = SUM(MAX(CLOSE - REF(CLOSE,1),0),N) / SUM(ABS(CLOSE - REF(CLOSE,1)),N) × 100\n */\nexport default {\n  name: 'RSI',\n  shortName: 'RSI',\n  calcParams: [6, 12, 24],\n  shouldCheckParamCount: false,\n  plots: [\n    { key: 'rsi1', title: 'RSI1: ', type: 'line' },\n    { key: 'rsi2', title: 'RSI2: ', type: 'line' },\n    { key: 'rsi3', title: 'RSI3: ', type: 'line' }\n  ],\n  regeneratePlots: (params) => {\n    return params.map((_, index) => {\n      const num = index + 1\n      return { key: `rsi${num}`, title: `RSI${num}: `, type: 'line' }\n    })\n  },\n  calcTechnicalIndicator: (dataList, { params, plots }) => {\n    const sumCloseAs = []\n    const sumCloseBs = []\n    return dataList.map((kLineData, i) => {\n      const rsi = {}\n      const preClose = (dataList[i - 1] || kLineData).close\n      const tmp = kLineData.close - preClose\n      params.forEach((p, index) => {\n        if (tmp > 0) {\n          sumCloseAs[index] = (sumCloseAs[index] || 0) + tmp\n        } else {\n          sumCloseBs[index] = (sumCloseBs[index] || 0) + Math.abs(tmp)\n        }\n        if (i >= p - 1) {\n          if (sumCloseBs[index] !== 0) {\n            rsi[plots[index].key] = 100 - (100.0 / (1 + sumCloseAs[index] / sumCloseBs[index]))\n          } else {\n            rsi[plots[index].key] = 0\n          }\n          const agoData = dataList[i - (p - 1)]\n          const agoPreData = dataList[i - p] || agoData\n          const agoTmp = agoData.close - agoPreData.close\n          if (agoTmp > 0) {\n            sumCloseAs[index] -= agoTmp\n          } else {\n            sumCloseBs[index] -= Math.abs(agoTmp)\n          }\n        }\n      })\n      return rsi\n    })\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 计算n周期内最高和最低\n * @param dataList\n * @returns {{ln: number, hn: number}}\n */\nexport default function calcHnLn (dataList = []) {\n  let hn = Number.MIN_SAFE_INTEGER\n  let ln = Number.MAX_SAFE_INTEGER\n  dataList.forEach(data => {\n    hn = Math.max(data.high, hn)\n    ln = Math.min(data.low, ln)\n  })\n  return { hn, ln }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport calcHnLn from '../calcHnLn'\n\n/**\n * KDJ\n *\n * 当日K值=2/3×前一日K值+1/3×当日RSV\n * 当日D值=2/3×前一日D值+1/3×当日K值\n * 若无前一日K 值与D值，则可分别用50来代替。\n * J值=3*当日K值-2*当日D值\n */\nexport default {\n  name: 'KDJ',\n  shortName: 'KDJ',\n  calcParams: [9, 3, 3],\n  plots: [\n    { key: 'k', title: 'K: ', type: 'line' },\n    { key: 'd', title: 'D: ', type: 'line' },\n    { key: 'j', title: 'J: ', type: 'line' }\n  ],\n  calcTechnicalIndicator: (dataList, { params }) => {\n    const result = []\n    dataList.forEach((kLineData, i) => {\n      const kdj = {}\n      const close = kLineData.close\n      if (i >= params[0] - 1) {\n        const lhn = calcHnLn(dataList.slice(i - (params[0] - 1), i + 1))\n        const ln = lhn.ln\n        const hn = lhn.hn\n        const hnSubLn = hn - ln\n        const rsv = (close - ln) / (hnSubLn === 0 ? 1 : hnSubLn) * 100\n        kdj.k = ((params[1] - 1) * (result[i - 1].k || 50) + rsv) / params[1]\n        kdj.d = ((params[2] - 1) * (result[i - 1].d || 50) + kdj.k) / params[2]\n        kdj.j = 3.0 * kdj.k - 2.0 * kdj.d\n      }\n      result.push(kdj)\n    })\n    return result\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport calcHnLn from '../calcHnLn'\n\n/**\n * WR\n * 公式 WR(N) = 100 * [ C - HIGH(N) ] / [ HIGH(N)-LOW(N) ]\n */\nexport default {\n  name: 'WR',\n  shortName: 'WR',\n  calcParams: [6, 10, 14],\n  shouldCheckParamCount: false,\n  plots: [\n    { key: 'wr1', title: 'WR1: ', type: 'line' },\n    { key: 'wr2', title: 'WR2: ', type: 'line' },\n    { key: 'wr3', title: 'WR3: ', type: 'line' }\n  ],\n  regeneratePlots: (params) => {\n    return params.map((_, i) => {\n      return { key: `wr${i + 1}`, title: `WR${i + 1}: `, type: 'line' }\n    })\n  },\n  calcTechnicalIndicator: (dataList, { params, plots }) => {\n    return dataList.map((kLineData, i) => {\n      const wr = {}\n      const close = kLineData.close\n      params.forEach((param, index) => {\n        const p = param - 1\n        if (i >= p) {\n          const hln = calcHnLn(dataList.slice(i - p, i + 1))\n          const hn = hln.hn\n          const ln = hln.ln\n          const hnSubLn = hn - ln\n          wr[plots[index].key] = hnSubLn === 0 ? 0 : (close - hn) / hnSubLn * 100\n        }\n      })\n      return wr\n    })\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 计算布林指标中的标准差\n * @param dataList\n * @param ma\n * @return {number}\n */\nfunction getBollMd (dataList, ma) {\n  const dataSize = dataList.length\n  let sum = 0\n  dataList.forEach(data => {\n    const closeMa = data.close - ma\n    sum += closeMa * closeMa\n  })\n  const b = sum > 0\n  sum = Math.abs(sum)\n  const md = Math.sqrt(sum / dataSize)\n  return b ? md : -1 * md\n}\n\n/**\n * BOLL\n */\nexport default {\n  name: 'BOLL',\n  shortName: 'BOLL',\n  series: 'price',\n  calcParams: [20, { value: 2, allowDecimal: true }],\n  precision: 2,\n  shouldOhlc: true,\n  plots: [\n    { key: 'up', title: 'UP: ', type: 'line' },\n    { key: 'mid', title: 'MID: ', type: 'line' },\n    { key: 'dn', title: 'DN: ', type: 'line' }\n  ],\n  calcTechnicalIndicator: (dataList, { params }) => {\n    const p = params[0] - 1\n    let closeSum = 0\n    return dataList.map((kLineData, i) => {\n      const close = kLineData.close\n      const boll = {}\n      closeSum += close\n      if (i >= p) {\n        boll.mid = closeSum / params[0]\n        const md = getBollMd(dataList.slice(i - p, i + 1), boll.mid)\n        boll.up = boll.mid + params[1] * md\n        boll.dn = boll.mid - params[1] * md\n        closeSum -= dataList[i - p].close\n      }\n      return boll\n    })\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default {\n  name: 'SAR',\n  shortName: 'SAR',\n  series: 'price',\n  calcParams: [2, 2, 20],\n  precision: 2,\n  shouldOhlc: true,\n  plots: [\n    {\n      key: 'sar',\n      title: 'SAR: ',\n      type: 'circle',\n      color: (data, options) => {\n        const { current } = data\n        const kLineData = current.kLineData || {}\n        const technicalIndicatorData = current.technicalIndicatorData || {}\n        const halfHL = (kLineData.high + kLineData.low) / 2\n        if (technicalIndicatorData.sar < halfHL) {\n          return options.circle.upColor\n        }\n        return options.circle.downColor\n      }\n    }\n  ],\n  calcTechnicalIndicator: (dataList, { params }) => {\n    const startAf = params[0] / 100\n    const step = params[1] / 100\n    const maxAf = params[2] / 100\n\n    // 加速因子\n    let af = startAf\n    // 极值\n    let ep = -100\n    // 判断是上涨还是下跌  false：下跌\n    let isIncreasing = false\n    let sar = 0\n    return dataList.map((kLineData, i) => {\n      // 上一个周期的sar\n      const preSar = sar\n      const high = kLineData.high\n      const low = kLineData.low\n      if (isIncreasing) {\n        // 上涨\n        if (ep === -100 || ep < high) {\n          // 重新初始化值\n          ep = high\n          af = Math.min(af + step, maxAf)\n        }\n        sar = preSar + af * (ep - preSar)\n        const lowMin = Math.min(dataList[Math.max(1, i) - 1].low, low)\n        if (sar > kLineData.low) {\n          sar = ep\n          // 重新初始化值\n          af = startAf\n          ep = -100\n          isIncreasing = !isIncreasing\n        } else if (sar > lowMin) {\n          sar = lowMin\n        }\n      } else {\n        if (ep === -100 || ep > low) {\n          // 重新初始化值\n          ep = low\n          af = Math.min(af + step, maxAf)\n        }\n        sar = preSar + af * (ep - preSar)\n        const highMax = Math.max(dataList[Math.max(1, i) - 1].high, high)\n        if (sar < kLineData.high) {\n          sar = ep\n          // 重新初始化值\n          af = 0\n          ep = -100\n          isIncreasing = !isIncreasing\n        } else if (sar < highMax) {\n          sar = highMax\n        }\n      }\n      return { sar }\n    })\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * OBV\n * OBV = REF(OBV) + sign * V\n */\nexport default {\n  name: 'OBV',\n  shortName: 'OBV',\n  calcParams: [30],\n  plots: [\n    { key: 'obv', title: 'OBV: ', type: 'line' },\n    { key: 'maObv', title: 'MAOBV: ', type: 'line' }\n  ],\n  calcTechnicalIndicator: (dataList, { params }) => {\n    let obvSum = 0\n    let oldObv = 0\n    const result = []\n    dataList.forEach((kLineData, i) => {\n      const preKLineData = dataList[i - 1] || kLineData\n      if (kLineData.close < preKLineData.close) {\n        oldObv -= kLineData.volume\n      } else if (kLineData.close > preKLineData.close) {\n        oldObv += kLineData.volume\n      }\n      const obv = { obv: oldObv }\n      obvSum += oldObv\n      if (i >= params[0] - 1) {\n        obv.maObv = obvSum / params[0]\n        obvSum -= result[i - (params[0] - 1)].obv\n      }\n      result.push(obv)\n    })\n    return result\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 价量趋势指标\n * 公式:\n * X = (CLOSE - REF(CLOSE, 1)) / REF(CLOSE, 1) * VOLUME\n * PVT = SUM(X)\n *\n */\nexport default {\n  name: 'PVT',\n  shortName: 'PVT',\n  plots: [\n    { key: 'pvt', title: 'PVT: ', type: 'line' }\n  ],\n  calcTechnicalIndicator: (dataList) => {\n    let sum = 0\n    return dataList.map((kLineData, i) => {\n      const pvt = {}\n      const close = kLineData.close\n      const volume = kLineData.volume\n      const preClose = (dataList[i - 1] || kLineData).close\n      let x = 0\n      if (preClose !== 0) {\n        x = (close - preClose) / preClose * volume\n      }\n      sum += x\n      pvt.pvt = sum\n      return pvt\n    })\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default {\n  name: 'VOL',\n  shortName: 'VOL',\n  series: 'volume',\n  calcParams: [5, 10, 20],\n  shouldCheckParamCount: false,\n  shouldFormatBigNumber: true,\n  precision: 0,\n  minValue: 0,\n  plots: [\n    { key: 'ma5', title: 'MA5: ', type: 'line' },\n    { key: 'ma10', title: 'MA10: ', type: 'line' },\n    { key: 'ma20', title: 'MA20: ', type: 'line' },\n    {\n      key: 'volume',\n      title: 'VOLUME: ',\n      type: 'bar',\n      baseValue: 0,\n      color: (data, options) => {\n        const kLineData = data.current.kLineData || {}\n        if (kLineData.close > kLineData.open) {\n          return options.bar.upColor\n        } else if (kLineData.close < kLineData.open) {\n          return options.bar.downColor\n        }\n        return options.bar.noChangeColor\n      }\n    }\n  ],\n  regeneratePlots: (params) => {\n    const plots = params.map(p => {\n      return { key: `ma${p}`, title: `MA${p}: `, type: 'line' }\n    })\n    plots.push({\n      key: 'volume',\n      title: 'VOLUME: ',\n      type: 'bar',\n      baseValue: 0,\n      color: (data, options) => {\n        const kLineData = data.current.kLineData || {}\n        if (kLineData.close > kLineData.open) {\n          return options.bar.upColor\n        } else if (kLineData.close < kLineData.open) {\n          return options.bar.downColor\n        }\n        return options.bar.noChangeColor\n      }\n    })\n    return plots\n  },\n  calcTechnicalIndicator: (dataList, { params, plots }) => {\n    const volSums = []\n    return dataList.map((kLineData, i) => {\n      const volume = kLineData.volume || 0\n      const vol = { volume }\n      params.forEach((p, index) => {\n        volSums[index] = (volSums[index] || 0) + volume\n        if (i >= p - 1) {\n          vol[plots[index].key] = volSums[index] / p\n          volSums[index] -= dataList[i - (p - 1)].volume\n        }\n      })\n      return vol\n    })\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default {\n  technicalIndicatorExtensions: {},\n  shapeExtensions: {},\n  addTechnicalIndicatorTemplate (template) {\n    if (template) {\n      ([].concat(template)).forEach(\n        tmp => {\n          if (tmp.name) {\n            this.technicalIndicatorExtensions[tmp.name] = tmp\n          }\n        }\n      )\n    }\n  },\n  addShapeTemplate (template) {\n    if (template) {\n      ([].concat(template)).forEach(\n        tmp => {\n          if (tmp.name) {\n            this.shapeExtensions[tmp.name] = tmp\n          }\n        }\n      )\n    }\n  }\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 合并\n * @param target\n * @param source\n */\nexport function merge (target, source) {\n  if (!isObject(target) || !isObject(source)) {\n    return\n  }\n  for (const key in source) {\n    if (Object.prototype.hasOwnProperty.call(source, key) && (key in target)) {\n      const targetProp = target[key]\n      const sourceProp = source[key]\n      if (\n        isObject(sourceProp) &&\n        isObject(targetProp) &&\n        !isArray(sourceProp) &&\n        !isArray(targetProp)\n      ) {\n        merge(targetProp, sourceProp)\n      } else {\n        if (isValid(source[key])) {\n          target[key] = source[key]\n        }\n      }\n    }\n  }\n}\n\n/**\n * 克隆\n * @param target\n * @return {{}|*}\n */\nexport function clone (target) {\n  if (!isObject(target)) {\n    return target\n  }\n\n  let copy\n  if (isArray(target)) {\n    copy = []\n  } else {\n    copy = {}\n  }\n  for (const key in target) {\n    if (Object.prototype.hasOwnProperty.call(target, key)) {\n      const v = target[key]\n      if (isObject(v)) {\n        copy[key] = clone(v)\n      } else {\n        copy[key] = v\n      }\n    }\n  }\n  return copy\n}\n\n/**\n * 是否是数组\n * @param value\n * @return {boolean}\n */\nexport function isArray (value) {\n  return Object.prototype.toString.call(value) === '[object Array]'\n}\n\n/**\n * 是否是方法\n * @param {*} value\n * @return {boolean}\n */\nexport function isFunction (value) {\n  return value && typeof value === 'function'\n}\n\n/**\n * 是否是对象\n * @param {*} value\n * @return {boolean}\n */\nexport function isObject (value) {\n  return (!!value && typeof value === 'object')\n}\n\n/**\n * 判断是否是数字\n * @param value\n * @returns {boolean}\n */\nexport function isNumber (value) {\n  return typeof value === 'number' && !isNaN(value)\n}\n\n/**\n * 判断是否有效\n * @param value\n * @returns {boolean}\n */\nexport function isValid (value) {\n  return value !== null && value !== undefined\n}\n\n/**\n * 判断是否是boolean\n * @param value\n * @returns {boolean}\n */\nexport function isBoolean (value) {\n  return typeof value === 'boolean'\n}\n\n/**\n * 是否是字符串\n * @param value\n * @return {boolean}\n */\nexport function isString (value) {\n  return typeof value === 'string'\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 填充空心样式类型\n */\nexport const StrokeFillStyle = {\n  STROKE: 'stroke',\n  FILL: 'fill'\n}\n\n/**\n * 线的样式\n * @type {{DASH: string, SOLID: string}}\n */\nexport const LineStyle = {\n  DASH: 'dash',\n  SOLID: 'solid'\n}\n\n/**\n * y轴位置\n * @type {{LEFT: string, RIGHT: string}}\n */\nexport const YAxisPosition = {\n  LEFT: 'left',\n  RIGHT: 'right'\n}\n\n/**\n * y轴类型\n * @type {{PERCENTAGE: string, LOG: string, NORMAL: string}}\n */\nexport const YAxisType = {\n  NORMAL: 'normal',\n  PERCENTAGE: 'percentage',\n  LOG: 'log'\n}\n\n/**\n * 蜡烛图样式\n * @type {{AREA: string, OHLC: string, CANDLE_STROKE: string, CANDLE_SOLID: string, CANDLE_DOWN_STROKE: string, CANDLE_UP_STROKE: string}}\n */\nexport const CandleType = {\n  CANDLE_SOLID: 'candle_solid',\n  CANDLE_STROKE: 'candle_stroke',\n  CANDLE_UP_STROKE: 'candle_up_stroke',\n  CANDLE_DOWN_STROKE: 'candle_down_stroke',\n  OHLC: 'ohlc',\n  AREA: 'area'\n}\n\n/**\n * 说明显示规则\n * @type {{FOLLOW_CROSS: string, NONE: string, ALWAYS: string}}\n */\nexport const TooltipShowRule = {\n  ALWAYS: 'always',\n  FOLLOW_CROSS: 'follow_cross',\n  NONE: 'none'\n}\n\n/**\n * 数据提示显示类型\n * @type {{RECT: string, STANDARD: string}}\n */\nexport const TooltipShowType = {\n  RECT: 'rect',\n  STANDARD: 'standard'\n}\n\n/**\n * 注解标识类似\n * @type {{RECT: string, TRIANGLE: string, DIAMOND: string, CUSTOM: string, NONE: string, CIRCLE: string}}\n */\nexport const AnnotationSymbolType = {\n  CIRCLE: 'circle',\n  RECT: 'rect',\n  TRIANGLE: 'triangle',\n  DIAMOND: 'diamond',\n  CUSTOM: 'custom',\n  NONE: 'none'\n}\n\n/**\n * 覆盖物位置\n * @type {{TOP: string, BOTTOM: string, POINT: string}}\n */\nexport const OverlayPosition = {\n  POINT: 'point',\n  TOP: 'top',\n  BOTTOM: 'bottom'\n}\n\n/**\n * 默认网格配置\n * @type {{horizontal: {size: number, color: string, dashValue: number[], show: boolean, style: string}, show: boolean, vertical: {size: number, color: string, dashValue: number[], show: boolean, style: string}}}\n */\nconst defaultGrid = {\n  show: true,\n  horizontal: {\n    show: true,\n    size: 1,\n    color: '#EDEDED',\n    style: LineStyle.DASH,\n    dashValue: [2, 2]\n  },\n  vertical: {\n    show: true,\n    size: 1,\n    color: '#EDEDED',\n    style: LineStyle.DASH,\n    dashValue: [2, 2]\n  }\n}\n\n/**\n * 默认蜡烛柱图样式配置\n * @type {{area: {backgroundColor: [{offset: number, color: string}, {offset: number, color: string}], lineColor: string, lineSize: number, value: string}, bar: {noChangeColor: string, upColor: string, downColor: string}, tooltip: {rect: {offsetTop: number, fillColor: string, borderColor: string, paddingBottom: number, borderRadius: number, paddingRight: number, borderSize: number, offsetLeft: number, paddingTop: number, paddingLeft: number, offsetRight: number}, showRule: string, values: null, showType: string, text: {marginRight: number, size: number, color: string, weight: string, marginBottom: number, family: string, marginTop: number, marginLeft: number}, labels: string[]}, type: string, priceMark: {high: {textMargin: number, textSize: number, color: string, textFamily: string, show: boolean, textWeight: string}, last: {noChangeColor: string, upColor: string, line: {dashValue: number[], size: number, show: boolean, style: string}, show: boolean, text: {paddingBottom: number, size: number, color: string, paddingRight: number, show: boolean, weight: string, paddingTop: number, family: string, paddingLeft: number}, downColor: string}, low: {textMargin: number, textSize: number, color: string, textFamily: string, show: boolean, textWeight: string}, show: boolean}}}\n */\nconst defaultCandle = {\n  margin: {\n    top: 0.2,\n    bottom: 0.1\n  },\n  type: CandleType.CANDLE_SOLID,\n  bar: {\n    /**\n     * 上涨颜色\n     */\n    upColor: '#26A69A',\n    /**\n     * 下跌颜色\n     */\n    downColor: '#EF5350',\n    /**\n     * 无变化时颜色\n     */\n    noChangeColor: '#999999'\n  },\n  area: {\n    lineSize: 2,\n    lineColor: '#2196F3',\n    value: 'close',\n    backgroundColor: [{\n      offset: 0,\n      color: 'rgba(33, 150, 243, 0.01)'\n    }, {\n      offset: 1,\n      color: 'rgba(33, 150, 243, 0.2)'\n    }]\n  },\n  priceMark: {\n    show: true,\n    high: {\n      show: true,\n      color: '#76808F',\n      textMargin: 5,\n      textSize: 10,\n      textFamily: 'Helvetica Neue',\n      textWeight: 'normal'\n    },\n    low: {\n      show: true,\n      color: '#76808F',\n      textMargin: 5,\n      textSize: 10,\n      textFamily: 'Helvetica Neue',\n      textWeight: 'normal'\n    },\n    last: {\n      show: true,\n      upColor: '#26A69A',\n      downColor: '#EF5350',\n      noChangeColor: '#888888',\n      line: {\n        show: true,\n        style: LineStyle.DASH,\n        dashValue: [4, 4],\n        size: 1\n      },\n      text: {\n        show: true,\n        size: 12,\n        paddingLeft: 2,\n        paddingTop: 2,\n        paddingRight: 2,\n        paddingBottom: 2,\n        color: '#FFFFFF',\n        family: 'Helvetica Neue',\n        weight: 'normal',\n        borderRadius: 2\n      }\n    }\n  },\n  tooltip: {\n    showRule: TooltipShowRule.ALWAYS,\n    showType: TooltipShowType.STANDARD,\n    labels: ['时间: ', '开: ', '收: ', '高: ', '低: ', '成交量: '],\n    values: null,\n    defaultValue: 'n/a',\n    rect: {\n      paddingLeft: 0,\n      paddingRight: 0,\n      paddingTop: 0,\n      paddingBottom: 6,\n      offsetLeft: 8,\n      offsetTop: 8,\n      offsetRight: 8,\n      borderRadius: 4,\n      borderSize: 1,\n      borderColor: '#F2F3F5',\n      backgroundColor: '#FEFEFE'\n    },\n    text: {\n      size: 12,\n      family: 'Helvetica Neue',\n      weight: 'normal',\n      color: '#76808F',\n      marginLeft: 8,\n      marginTop: 6,\n      marginRight: 8,\n      marginBottom: 0\n    }\n  }\n}\n\n/**\n * 默认的技术指标样式配置\n * @type {{bar: {noChangeColor: string, upColor: string, downColor: string}, line: {size: number, colors: [string, string, string, string, string]}, tooltip: {showParams: boolean, showName: boolean, showRule: string, text: {marginRight: number, size: number, color: string, weight: string, marginBottom: number, family: string, marginTop: number, marginLeft: number}}, circle: {noChangeColor: string, upColor: string, downColor: string}, lastValueMark: {show: boolean, text: {paddingBottom: number, color: string, size: number, paddingRight: number, show: boolean, weight: string, paddingTop: number, family: string, paddingLeft: number}}}}\n */\nconst defaultTechnicalIndicator = {\n  margin: {\n    top: 0.2,\n    bottom: 0.1\n  },\n  bar: {\n    upColor: 'rgba(38, 166, 154, .65)',\n    downColor: 'rgba(239, 83, 80, .65)',\n    noChangeColor: '#888888'\n  },\n  line: {\n    size: 1,\n    dashValue: [2, 2],\n    colors: ['#FF9600', '#9D65C9', '#2196F3', '#E11D74', '#01C5C4']\n  },\n  circle: {\n    upColor: 'rgba(38, 166, 154, .65)',\n    downColor: 'rgba(239, 83, 80, .65)',\n    noChangeColor: '#888888'\n  },\n  lastValueMark: {\n    show: false,\n    text: {\n      show: false,\n      color: '#FFFFFF',\n      size: 12,\n      family: 'Helvetica Neue',\n      weight: 'normal',\n      paddingLeft: 3,\n      paddingTop: 2,\n      paddingRight: 3,\n      paddingBottom: 2,\n      borderRadius: 2\n    }\n  },\n  tooltip: {\n    showRule: TooltipShowRule.ALWAYS,\n    showType: TooltipShowType.STANDARD,\n    showName: true,\n    showParams: true,\n    defaultValue: 'n/a',\n    text: {\n      size: 12,\n      family: 'Helvetica Neue',\n      weight: 'normal',\n      color: '#76808F',\n      marginTop: 6,\n      marginRight: 8,\n      marginBottom: 0,\n      marginLeft: 8\n    }\n  }\n}\n\n/**\n * 默认x轴配置\n * @type {{axisLine: {color: string, size: number, show: boolean}, show: boolean, tickText: {paddingBottom: number, color: string, size: number, show: boolean, weight: string, paddingTop: number, family: string}, height: null, tickLine: {size: number, color: string, show: boolean, length: number}}}\n */\nconst defaultXAxis = {\n  /**\n   * 是否显示整个轴\n   */\n  show: true,\n  /**\n   * 高度\n   */\n  height: null,\n  /**\n   * 轴线配置\n   */\n  axisLine: {\n    show: true,\n    color: '#DDDDDD',\n    size: 1\n  },\n\n  /**\n   * tick文字\n   */\n  tickText: {\n    show: true,\n    color: '#76808F',\n    size: 12,\n    family: 'Helvetica Neue',\n    weight: 'normal',\n    paddingTop: 3,\n    paddingBottom: 6\n  },\n  // tick线\n  tickLine: {\n    show: true,\n    size: 1,\n    length: 3,\n    color: '#DDDDDD'\n  }\n}\n\n/**\n * 默认y轴配置\n * @type {{axisLine: {color: string, size: number, show: boolean}, show: boolean, width: null, position: string, tickText: {color: string, size: number, paddingRight: number, show: boolean, weight: string, family: string, paddingLeft: number}, type: string, inside: boolean, tickLine: {size: number, color: string, show: boolean, length: number}}}\n */\nconst defaultYAxis = {\n  /**\n   * 是否显示整个轴\n   */\n  show: true,\n  /**\n   * 宽度\n   */\n  width: null,\n  /**\n   * y轴类型\n   */\n  type: YAxisType.NORMAL,\n  /**\n   * 轴位置\n   */\n  position: YAxisPosition.RIGHT,\n  /**\n   * 轴是否在内部\n   */\n  inside: false,\n  /**\n   * 轴是否反转\n   */\n  reverse: false,\n  /**\n   * 轴线配置\n   */\n  axisLine: {\n    show: true,\n    color: '#DDDDDD',\n    size: 1\n  },\n\n  /**\n   * tick文字\n   */\n  tickText: {\n    show: true,\n    color: '#76808F',\n    size: 12,\n    family: 'Helvetica Neue',\n    weight: 'normal',\n    paddingLeft: 3,\n    paddingRight: 6\n  },\n  // tick线\n  tickLine: {\n    show: true,\n    size: 1,\n    length: 3,\n    color: '#DDDDDD'\n  }\n}\n\nconst defaultCrosshair = {\n  show: true,\n  horizontal: {\n    show: true,\n    line: {\n      show: true,\n      style: LineStyle.DASH,\n      dashValue: [4, 2],\n      size: 1,\n      color: '#76808F'\n    },\n    text: {\n      show: true,\n      color: '#FFFFFF',\n      size: 12,\n      family: 'Helvetica Neue',\n      weight: 'normal',\n      paddingLeft: 2,\n      paddingRight: 2,\n      paddingTop: 2,\n      paddingBottom: 2,\n      borderSize: 1,\n      borderColor: '#686D76',\n      borderRadius: 2,\n      backgroundColor: '#686D76'\n    }\n  },\n  vertical: {\n    show: true,\n    line: {\n      show: true,\n      style: LineStyle.DASH,\n      dashValue: [4, 2],\n      size: 1,\n      color: '#76808F'\n    },\n    text: {\n      show: true,\n      color: '#FFFFFF',\n      size: 12,\n      family: 'Helvetica Neue',\n      weight: 'normal',\n      paddingLeft: 2,\n      paddingRight: 2,\n      paddingTop: 2,\n      paddingBottom: 2,\n      borderSize: 1,\n      borderRadius: 2,\n      borderColor: '#686D76',\n      backgroundColor: '#686D76'\n    }\n  }\n}\n\n/**\n * 默认图形配置\n * @type {{arc: {style: string, color: string, size: number}, polygon: {style: string, color: string, size: number}, line: {style: string, color: string, size: number, dashValue: number[]}, text: {style: string, marginRight: number, color: string, size: number, weight: string, marginBottom: number, family: string, marginTop: number, marginLeft: number}, point: {backgroundColor: string, borderColor: string, activeBorderSize: number, activeRadius: number, activeBorderColor: string, activeBackgroundColor: string, borderSize: number, radius: number}}}\n */\nconst defaultShape = {\n  point: {\n    backgroundColor: '#2196F3',\n    borderColor: 'rgba(33, 150, 243, 0.35)',\n    borderSize: 1,\n    radius: 5,\n    activeBackgroundColor: '#2196F3',\n    activeBorderColor: 'rgba(33, 150, 243, 0.35)',\n    activeBorderSize: 3,\n    activeRadius: 5\n  },\n  line: {\n    style: LineStyle.SOLID,\n    color: '#2196F3',\n    size: 1,\n    dashValue: [2, 2]\n  },\n  polygon: {\n    style: StrokeFillStyle.STROKE,\n    stroke: {\n      style: LineStyle.SOLID,\n      size: 1,\n      color: '#2196F3',\n      dashValue: [2, 2]\n    },\n    fill: {\n      color: '#2196F3'\n    }\n  },\n  arc: {\n    style: StrokeFillStyle.STROKE,\n    stroke: {\n      style: LineStyle.SOLID,\n      size: 1,\n      color: '#2196F3',\n      dashValue: [2, 2]\n    },\n    fill: {\n      color: '#2196F3'\n    }\n  },\n  text: {\n    style: StrokeFillStyle.FILL,\n    color: '#2196F3',\n    size: 12,\n    family: 'Helvetica Neue',\n    weight: 'normal',\n    offset: [0, 0]\n  }\n}\n\n/**\n * 默认注解信息配置\n * @type {{}}\n */\nconst defaultAnnotation = {\n  position: OverlayPosition.TOP,\n  offset: [20, 0],\n  symbol: {\n    type: AnnotationSymbolType.DIAMOND,\n    size: 8,\n    color: '#2196F3',\n    activeSize: 10,\n    activeColor: '#FF9600'\n  }\n}\n\nconst defaultTag = {\n  position: OverlayPosition.POINT,\n  offset: 0,\n  line: {\n    show: true,\n    style: LineStyle.DASH,\n    dashValue: [4, 2],\n    size: 1,\n    color: '#2196F3'\n  },\n  text: {\n    color: '#FFFFFF',\n    backgroundColor: '#2196F3',\n    size: 12,\n    family: 'Helvetica Neue',\n    weight: 'normal',\n    paddingLeft: 2,\n    paddingRight: 2,\n    paddingTop: 2,\n    paddingBottom: 2,\n    borderRadius: 2,\n    borderSize: 1,\n    borderColor: '#2196F3'\n  },\n  mark: {\n    offset: 0,\n    color: '#FFFFFF',\n    backgroundColor: '#2196F3',\n    size: 12,\n    family: 'Helvetica Neue',\n    weight: 'normal',\n    paddingLeft: 2,\n    paddingRight: 2,\n    paddingTop: 2,\n    paddingBottom: 2,\n    borderRadius: 2,\n    borderSize: 1,\n    borderColor: '#2196F3'\n  }\n}\n\n/**\n * 图表之间默认分割配置\n * @type {{size: number, color: string}}\n */\nconst defaultSeparator = {\n  size: 1,\n  color: '#DDDDDD',\n  fill: true,\n  activeBackgroundColor: 'rgba(33, 150, 243, 0.08)'\n}\n\nexport const defaultStyleOptions = {\n  grid: defaultGrid,\n  candle: defaultCandle,\n  technicalIndicator: defaultTechnicalIndicator,\n  xAxis: defaultXAxis,\n  yAxis: defaultYAxis,\n  separator: defaultSeparator,\n  crosshair: defaultCrosshair,\n  shape: defaultShape,\n  annotation: defaultAnnotation,\n  tag: defaultTag\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isNumber, isObject, isValid } from './typeChecks'\n\n/**\n * 格式化值\n * @param data\n * @param key\n * @param defaultValue\n * @returns {string|*}\n */\nexport function formatValue (data, key, defaultValue = '--') {\n  if (isObject(data)) {\n    const value = data[key]\n    if (isValid(value)) {\n      return value\n    }\n  }\n  return defaultValue\n}\n\n/**\n * 格式化时间\n * @param dateTimeFormat\n * @param timestamp\n * @param format\n * @returns {string}\n */\nexport function formatDate (dateTimeFormat, timestamp, format = 'MM-DD hh:mm') {\n  if (isNumber(timestamp)) {\n    const dateTimeString = dateTimeFormat.format(new Date(timestamp))\n    const dateTimeStringArray = dateTimeString.split(', ')\n    const dateStringArray = dateTimeStringArray[0].split('/')\n    const date = {\n      YYYY: dateStringArray[2],\n      MM: dateStringArray[0],\n      DD: dateStringArray[1],\n      'hh:mm': dateTimeStringArray[1].match(/^[\\d]{2}/)[0] === '24'\n        ? dateTimeStringArray[1].replace(/^[\\d]{2}/, '00')\n        : dateTimeStringArray[1]\n    }\n    return format.replace(/YYYY|MM|DD|(hh:mm)/g, key => date[key])\n  }\n  return '--'\n}\n\n/**\n * 格式化精度\n */\nexport function formatPrecision (value, precision = 2) {\n  const v = +value\n  if ((v || v === 0) && isNumber(v)) {\n    return v.toFixed(precision)\n  }\n  return `${v}`\n}\n\n/**\n * 格式化大数据\n * @param value\n */\nexport function formatBigNumber (value) {\n  if (isNumber(+value)) {\n    if (value > 1000000000) {\n      return `${+((value / 1000000000).toFixed(3))}B`\n    }\n    if (value > 1000000) {\n      return `${+((value / 1000000).toFixed(3))}M`\n    }\n    if (value > 1000) {\n      return `${+((value / 1000).toFixed(3))}K`\n    }\n    return value\n  }\n  return '--'\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst DEV = '__BUILD_ENV__' === 'development'\n\n/**\n * 打印警告日志\n * @param api\n * @param invalidParam\n * @param append\n */\nexport function logWarn (api, invalidParam, append = '') {\n  if (DEV) {\n    console.log(\n      '%c😑 klinecharts warning: \\n%s%s%s',\n      'color:#fcaf17;font-weight:bold',\n      api ? `Call api ${api}${invalidParam || append ? ', ' : '.'}` : '',\n      invalidParam ? `invalid parameter ${invalidParam}${append ? ', ' : '.'}` : '',\n      append ? `${append}` : ''\n    )\n  }\n}\n\n/**\n * 打印错误日志\n * @param api\n * @param invalidParam\n * @param append\n */\nexport function logError (api, invalidParam, append = '') {\n  if (DEV) {\n    console.log(\n      '%c😟 klinecharts error: \\n%s%s%s',\n      'color:#ed1941;font-weight:bold',\n      api ? `Call api ${api}${invalidParam || append ? ', ' : '.'},` : '',\n      invalidParam ? `invalid parameter ${invalidParam}${append ? ', ' : '.'}` : '',\n      append ? `${append}` : ''\n    )\n  }\n}\n\n/**\n * 打印标识\n */\nexport function logTag () {\n  if (DEV) {\n    console.log(\n      '%c❤️ Welcome to klinecharts. Version is __BUILD_VERSION__',\n      'border-radius:2px;border:dashed 1px #2196F3;padding:26px 20px;font-size:14px;color:#2196F3'\n    )\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 二分查找最接近的数\n * @param dataList\n * @param valueKey\n * @param targetValue\n * @return {number}\n */\nexport function binarySearchNearest (dataList, valueKey, targetValue) {\n  let left = 0\n  let right = 0\n  for (right = dataList.length - 1; left !== right;) {\n    const midIndex = Math.floor((right + left) / 2)\n    const mid = right - left\n    const midValue = dataList[midIndex][valueKey]\n    if (targetValue === dataList[left][valueKey]) {\n      return left\n    }\n    if (targetValue === dataList[right][valueKey]) {\n      return right\n    }\n    if (targetValue === midValue) {\n      return midIndex\n    }\n\n    if (targetValue > midValue) {\n      left = midIndex\n    } else {\n      right = midIndex\n    }\n\n    if (mid <= 2) {\n      break\n    }\n  }\n  return left\n}\n\n/**\n * 优化数字\n * @param value\n * @return {number|number}\n */\nexport function nice (value) {\n  const exponent = Math.floor(log10(value))\n  const exp10 = index10(exponent)\n  const f = value / exp10 // 1 <= f < 10\n  let nf = 0\n  if (f < 1.5) {\n    nf = 1\n  } else if (f < 2.5) {\n    nf = 2\n  } else if (f < 3.5) {\n    nf = 3\n  } else if (f < 4.5) {\n    nf = 4\n  } else if (f < 5.5) {\n    nf = 5\n  } else if (f < 6.5) {\n    nf = 6\n  } else {\n    nf = 8\n  }\n  value = nf * exp10\n  return exponent >= -20 ? +value.toFixed(exponent < 0 ? -exponent : 0) : value\n}\n\n/**\n * 四舍五入\n * @param value\n * @param precision\n * @return {number}\n */\nexport function round (value, precision) {\n  if (precision == null) {\n    precision = 10\n  }\n  precision = Math.min(Math.max(0, precision), 20)\n  value = (+value).toFixed(precision)\n  return +value\n}\n\n/**\n * 获取小数位数\n * @param value\n * @return {number|number}\n */\nexport function getPrecision (value) {\n  const str = value.toString()\n  const eIndex = str.indexOf('e')\n  if (eIndex > 0) {\n    const precision = +str.slice(eIndex + 1)\n    return precision < 0 ? -precision : 0\n  } else {\n    const dotIndex = str.indexOf('.')\n    return dotIndex < 0 ? 0 : str.length - 1 - dotIndex\n  }\n}\n\n/**\n * 10为底的对数函数\n * @param value\n * @return {number}\n */\nexport function log10 (value) {\n  return Math.log(value) / Math.log(10)\n}\n\n/**\n * 10的指数函数\n * @param value\n * @return {number}\n */\nexport function index10 (value) {\n  return Math.pow(10, value)\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 图表动作\n */\nconst ActionType = {\n  ZOOM: 'zoom',\n  SCROLL: 'scroll',\n  CROSSHAIR: 'crosshair',\n  TOOLTIP: 'tooltip',\n  PANE_DRAG: 'pane_drag'\n}\n\nexport function hasAction (type) {\n  return Object.values(ActionType).indexOf(type) > -1\n}\n\nexport default ActionType\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isFunction, isValid } from '../utils/typeChecks'\nimport { formatValue } from '../utils/format'\nimport { logWarn } from '../utils/logger'\nimport { binarySearchNearest } from '../utils/number'\n\nimport ActionType from '../enum/ActionType'\n\n// 最小单条数据宽度\nconst MIN_DATA_SPACE = 1\n\n// 最大单条数据宽度\nconst MAX_DATA_SPACE = 50\n\nexport default class TimeScaleStore {\n  constructor (chartStore) {\n    this._chartStore = chartStore\n    this._dateTimeFormat = new Intl.DateTimeFormat(\n      'en', {\n        hour12: false, year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit'\n      }\n    )\n\n    // 是否可以缩放\n    this._zoomEnabled = true\n    // 是否可以拖拽滑动\n    this._scrollEnabled = true\n\n    // 是否在加载中\n    this._loading = true\n    // 加载更多回调\n    this._loadMoreCallback = null\n    // 还有更多\n    this._more = true\n\n    // 可见区域数据占用的空间\n    this._totalDataSpace = 0\n    // 每一条数据的空间\n    this._dataSpace = 6\n    // bar的空间\n    this._barSpace = this._calcBarSpace()\n    // 向右偏移的空间\n    this._offsetRightSpace = 50\n    // 向右偏移的数量\n    this._offsetRightBarCount = this._offsetRightSpace / this._dataSpace\n    // 左边最小可见bar的个数\n    this._leftMinVisibleBarCount = 2\n    // 右边最小可见bar的个数\n    this._rightMinVisibleBarCount = 2\n    // 开始绘制的索引\n    this._from = 0\n    // 结束的索引\n    this._to = 0\n\n    // 用来记录开始拖拽时向右偏移的数量\n    this._preOffsetRightBarCount = 0\n  }\n\n  /**\n   * 计算一条柱子的空间\n   * @returns {number}\n   * @private\n   */\n  _calcBarSpace () {\n    const rateBarSpace = Math.floor(this._dataSpace * 0.82)\n    const floorBarSpace = Math.floor(this._dataSpace)\n    const optimalBarSpace = Math.min(rateBarSpace, floorBarSpace - 1)\n    return Math.max(1, optimalBarSpace)\n  }\n\n  /**\n   * 调整绘制起点终点位置\n   * @private\n   */\n  adjustFromTo () {\n    const dataSize = this._chartStore.dataList().length\n    const barLength = this._totalDataSpace / this._dataSpace\n    const maxRightOffsetBarCount = barLength - Math.min(this._leftMinVisibleBarCount, dataSize)\n    if (this._offsetRightBarCount > maxRightOffsetBarCount) {\n      this._offsetRightBarCount = maxRightOffsetBarCount\n    }\n\n    const minRightOffsetBarCount = -dataSize + Math.min(this._rightMinVisibleBarCount, dataSize)\n\n    if (this._offsetRightBarCount < minRightOffsetBarCount) {\n      this._offsetRightBarCount = minRightOffsetBarCount\n    }\n    this._to = Math.round(this._offsetRightBarCount + dataSize + 0.5)\n    this._from = Math.round(this._to - barLength) - 1\n    if (this._to > dataSize) {\n      this._to = dataSize\n    }\n    if (this._from < 0) {\n      this._from = 0\n    }\n    this._chartStore.adjustVisibleDataList()\n    // 处理加载更多，有更多并且没有在加载则去加载更多\n    if (this._from === 0 && this._more && !this._loading && isFunction(this._loadMoreCallback)) {\n      this._loading = true\n      this._loadMoreCallback(formatValue(this._chartStore.dataList()[0], 'timestamp'))\n    }\n  }\n\n  /**\n   * 设置是否有更多\n   * @param more\n   */\n  setMore (more) {\n    this._more = more\n  }\n\n  /**\n   * 设置是否在加载\n   */\n  setLoading (loading) {\n    this._loading = loading\n  }\n\n  /**\n   * 获取时间格式化\n   * @returns {Intl.DateTimeFormat | Intl.DateTimeFormat}\n   */\n  dateTimeFormat () {\n    return this._dateTimeFormat\n  }\n\n  /**\n   * 设置时区\n   * @param timezone\n   */\n  setTimezone (timezone) {\n    let dateTimeFormat\n    try {\n      dateTimeFormat = new Intl.DateTimeFormat(\n        'en', {\n          hour12: false, timeZone: timezone, year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit'\n        }\n      )\n    } catch (e) {\n      logWarn('', '', 'Timezone is error!!!')\n    }\n    if (dateTimeFormat) {\n      this._dateTimeFormat = dateTimeFormat\n    }\n  }\n\n  /**\n   * 获取时区\n   * @returns {null}\n   */\n  timezone () {\n    return this._dateTimeFormat.resolvedOptions().timeZone\n  }\n\n  /**\n   * 获取一条数据的空间\n   * @returns {number}\n   */\n  dataSpace () {\n    return this._dataSpace\n  }\n\n  /**\n   * 获取绘制一条数据的空间（不包括bar之间的间隙）\n   * @returns {*}\n   */\n  barSpace () {\n    return this._barSpace\n  }\n\n  /**\n   * 获取绘制一条数据一半的空间（不包括bar之间的间隙）\n   * @returns\n   */\n  halfBarSpace () {\n    return this._barSpace / 2\n  }\n\n  /**\n   * 设置一条数据的空间\n   * @param dataSpace\n   * @param adjustBeforeFuc\n   */\n  setDataSpace (dataSpace, adjustBeforeFuc) {\n    if (dataSpace < MIN_DATA_SPACE || dataSpace > MAX_DATA_SPACE || this._dataSpace === dataSpace) {\n      return\n    }\n    this._dataSpace = dataSpace\n    this._barSpace = this._calcBarSpace()\n    adjustBeforeFuc && adjustBeforeFuc()\n    this.adjustFromTo()\n    this._chartStore.crosshairStore().recalculate(true)\n    this._chartStore.invalidate()\n  }\n\n  /**\n   * 设置可见区域数据占用的总空间\n   * @param totalSpace\n   */\n  setTotalDataSpace (totalSpace) {\n    if (this._totalDataSpace === totalSpace) {\n      return\n    }\n    this._totalDataSpace = totalSpace\n    this.adjustFromTo()\n    this._chartStore.crosshairStore().recalculate(true)\n  }\n\n  /**\n   * 设置右边可以偏移的空间\n   * @param space\n   * @param invalidate\n   */\n  setOffsetRightSpace (space, invalidate) {\n    this._offsetRightSpace = space\n    this._offsetRightBarCount = space / this._dataSpace\n    if (invalidate) {\n      this.adjustFromTo()\n      this._chartStore.crosshairStore().recalculate(true)\n      this._chartStore.invalidate()\n    }\n  }\n\n  /**\n   * 重置右边可以偏移的空间\n   */\n  resetOffsetRightSpace () {\n    this.setOffsetRightSpace(this._offsetRightSpace)\n  }\n\n  /**\n   * 右偏移距离\n   * @return {number}\n   */\n  offsetRightSpace () {\n    return this._offsetRightSpace\n  }\n\n  /**\n   * 右偏移bar数量\n   * @return {*|number}\n   */\n  offsetRightBarCount () {\n    return this._offsetRightBarCount\n  }\n\n  /**\n   * 设置右偏移bar数量\n   * @param barCount\n   */\n  setOffsetRightBarCount (barCount) {\n    this._offsetRightBarCount = barCount\n  }\n\n  /**\n   * 设置左边可见的最小bar数量\n   * @param barCount\n   */\n  setLeftMinVisibleBarCount (barCount) {\n    this._leftMinVisibleBarCount = barCount\n  }\n\n  /**\n   * 设置右边可见的最小bar数量\n   * @param barCount\n   */\n  setRightMinVisibleBarCount (barCount) {\n    this._rightMinVisibleBarCount = barCount\n  }\n\n  /**\n   * 获取数据绘制起点\n   * @returns {number}\n   */\n  from () {\n    return this._from\n  }\n\n  /**\n   * 获取数据绘制终点\n   * @returns {number}\n   */\n  to () {\n    return this._to\n  }\n\n  /**\n   * 开始滚动\n   */\n  startScroll () {\n    this._preOffsetRightBarCount = this._offsetRightBarCount\n  }\n\n  /**\n   * 滚动\n   * @param distance\n   * @param crosshair\n   */\n  scroll (distance, crosshair) {\n    if (!this._scrollEnabled) {\n      return\n    }\n    const distanceBarCount = distance / this._dataSpace\n    this._chartStore.actionStore().execute(ActionType.SCROLL, { barCount: distanceBarCount, distance })\n    this._offsetRightBarCount = this._preOffsetRightBarCount - distanceBarCount\n    this.adjustFromTo()\n    const cross = crosshair || this._chartStore.crosshairStore().get()\n    this._chartStore.crosshairStore().set(cross, true)\n    this._chartStore.invalidate()\n  }\n\n  /**\n   * 根据索引获取数据\n   * @param dataIndex\n   */\n  getDataByDataIndex (dataIndex) {\n    return this._chartStore.dataList()[dataIndex]\n  }\n\n  /**\n   * x转换成浮点数的位置\n   * @param x\n   * @returns {number}\n   */\n  coordinateToFloatIndex (x) {\n    const dataSize = this._chartStore.dataList().length\n    const deltaFromRight = (this._totalDataSpace - x) / this._dataSpace\n    const index = dataSize + this._offsetRightBarCount - deltaFromRight\n    return Math.round(index * 1000000) / 1000000\n  }\n\n  /**\n   * 数据索引转换成时间戳\n   * @param dataIndex\n   * @return {*}\n   */\n  dataIndexToTimestamp (dataIndex) {\n    const data = this.getDataByDataIndex(dataIndex)\n    if (data) {\n      return data.timestamp\n    }\n  }\n\n  /**\n   * 将时间戳转换成数据索引位置\n   * @param timestamp\n   * @return {number}\n   */\n  timestampToDataIndex (timestamp) {\n    if (this._chartStore.dataList().length === 0) {\n      return 0\n    }\n    return binarySearchNearest(this._chartStore.dataList(), 'timestamp', timestamp)\n  }\n\n  /**\n   * 数据索引转换成坐标\n   * @param dataIndex\n   */\n  dataIndexToCoordinate (dataIndex) {\n    const dataSize = this._chartStore.dataList().length\n    const deltaFromRight = dataSize + this._offsetRightBarCount - dataIndex\n    return this._totalDataSpace - (deltaFromRight - 0.5) * this._dataSpace\n  }\n\n  /**\n   * 坐标换成数据索引转\n   * @param pixel\n   */\n  coordinateToDataIndex (pixel) {\n    return Math.ceil(this.coordinateToFloatIndex(pixel)) - 1\n  }\n\n  /**\n   * 缩放\n   * @param scale\n   * @param coordinate\n   */\n  zoom (scale, coordinate) {\n    if (!this._zoomEnabled) {\n      return\n    }\n    if (!coordinate || !isValid(coordinate.x)) {\n      const crosshair = this._chartStore.crosshairStore().get()\n      coordinate = { x: isValid(crosshair.x) ? crosshair.x : this._totalDataSpace / 2 }\n    }\n    this._chartStore.actionStore().execute(ActionType.ZOOM, { coordinate, scale })\n    const floatIndex = this.coordinateToFloatIndex(coordinate.x)\n    const dataSpace = this._dataSpace + scale * (this._dataSpace / 10)\n    this.setDataSpace(dataSpace, () => {\n      this._offsetRightBarCount += (floatIndex - this.coordinateToFloatIndex(coordinate.x))\n    })\n  }\n\n  /**\n   * 设置是否可以缩放\n   * @param enabled\n   */\n  setZoomEnabled (enabled) {\n    this._zoomEnabled = enabled\n  }\n\n  /**\n   * 获取是否可以缩放\n   * @return {boolean}\n   */\n  zoomEnabled () {\n    return this._zoomEnabled\n  }\n\n  /**\n   * 设置是否可以拖拽滚动\n   * @param enabled\n   */\n  setScrollEnabled (enabled) {\n    this._scrollEnabled = enabled\n  }\n\n  /**\n   * 获取是否可以拖拽滚动\n   * @return {boolean}\n   */\n  scrollEnabled () {\n    return this._scrollEnabled\n  }\n\n  /**\n   * 设置加载更多\n   * @param callback\n   */\n  setLoadMoreCallback (callback) {\n    this._loadMoreCallback = callback\n  }\n\n  /**\n   * 清除数据\n   */\n  clear () {\n    this._more = true\n    this._loading = true\n    this._from = 0\n    this._to = 0\n  }\n}\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\n\nfunction _regeneratorRuntime() {\n  \"use strict\";\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n      Op = Object.prototype,\n      hasOwn = Op.hasOwnProperty,\n      $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n      iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n      asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n      toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n        generator = Object.create(protoGenerator.prototype),\n        context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {}\n\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n      NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n            value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n\n      reject(record.arg);\n    }\n\n    var previousPromise;\n\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          for (; ++i < iterable.length;) {\n            if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n          }\n\n          return next.value = undefined, next.done = !0, next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    return {\n      next: doneResult\n    };\n  }\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n            record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n              hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      }\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\n\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { clone, isArray, isBoolean, isNumber, merge, isObject, isFunction, isValid } from '../../utils/typeChecks'\n\n/**\n * 绘制类型\n * @type {{BAR: string, LINE: string, CIRCLE: string}}\n */\nexport const TechnicalIndicatorPlotType = {\n  LINE: 'line',\n  BAR: 'bar',\n  CIRCLE: 'circle'\n}\n\n/**\n * 系列\n */\nexport const TechnicalIndicatorSeries = {\n  PRICE: 'price',\n  VOLUME: 'volume',\n  NORMAL: 'normal'\n}\n\n/**\n * 获取指标配置项样式\n * @param kLineDataList\n * @param techDataList\n * @param dataIndex\n * @param plot\n * @param techStyles\n * @param defaultStyle\n * @returns\n */\nexport function getTechnicalIndicatorPlotStyle (\n  kLineDataList, techDataList, dataIndex, plot, techStyles, defaultStyle\n) {\n  let color = defaultStyle.color\n  let isStroke = defaultStyle.isStroke\n  let isDashed = defaultStyle.isDashed\n  const cbData = {\n    prev: { kLineData: kLineDataList[dataIndex - 1], technicalIndicatorData: techDataList[dataIndex - 1] },\n    current: { kLineData: kLineDataList[dataIndex], technicalIndicatorData: techDataList[dataIndex] },\n    next: { kLineData: kLineDataList[dataIndex + 1], technicalIndicatorData: techDataList[dataIndex + 1] }\n  }\n  if (isValid(plot.color)) {\n    if (isFunction(plot.color)) {\n      color = plot.color(cbData, techStyles) || defaultStyle.color\n    } else {\n      color = plot.color || defaultStyle.color\n    }\n  }\n  if (isValid(plot.isStroke)) {\n    if (isFunction(plot.isStroke)) {\n      isStroke = plot.isStroke(cbData)\n    } else {\n      isStroke = plot.isStroke\n    }\n  }\n  if (isValid(plot.isDashed)) {\n    if (isFunction(plot.isDashed)) {\n      isDashed = plot.isDashed(cbData)\n    } else {\n      isDashed = plot.isDashed\n    }\n  }\n  return { color, isStroke, isDashed }\n}\n\nexport default class TechnicalIndicator {\n  constructor ({\n    name, shortName, series, calcParams, plots, precision,\n    shouldCheckParamCount, shouldOhlc, shouldFormatBigNumber,\n    minValue, maxValue, styles, extendData\n  }) {\n    // 指标名\n    this.name = name || ''\n    // 指标简短名称，用于显示\n    this.shortName = isValid(shortName) ? shortName : name\n    // 系列\n    this.series = Object.values(TechnicalIndicatorSeries).indexOf(series) !== -1 ? series : TechnicalIndicatorSeries.NORMAL\n    // 精度\n    this.precision = isNumber(precision) && precision >= 0 ? precision : 4\n    // 精度设置标识\n    this._precisionFlag = false\n    // 计算参数\n    this.calcParams = isArray(calcParams) ? calcParams : []\n    // 数据信息\n    this.plots = isArray(plots) ? plots : []\n    // 是否需要检查参数\n    this.shouldCheckParamCount = isBoolean(shouldCheckParamCount) ? shouldCheckParamCount : true\n    // 是否需要ohlc\n    this.shouldOhlc = isBoolean(shouldOhlc) ? shouldOhlc : false\n    // 是否需要格式化大数据值，从1000开始格式化，比如100000是否需要格式化100K\n    this.shouldFormatBigNumber = isBoolean(shouldFormatBigNumber) ? shouldFormatBigNumber : false\n    // 指定的最小值\n    this.minValue = minValue\n    // 指定的最大值\n    this.maxValue = maxValue\n    // 样式\n    this.styles = styles\n    // 扩展数据\n    this.extendData = extendData\n    // 结果\n    this.result = []\n  }\n\n  _createParams (calcParams) {\n    return calcParams.map(param => {\n      if (isObject(param)) {\n        return param.value\n      }\n      return param\n    })\n  }\n\n  /**\n   * 设置简短名称\n   * @param shortName\n   * @returns\n   */\n  setShortName (shortName) {\n    if (isValid(shortName) && this.shortName !== shortName) {\n      this.shortName = shortName\n      return true\n    }\n    return false\n  }\n\n  /**\n   * 设置精度\n   * @param precision\n   * @param flag\n   * @returns\n   */\n  setPrecision (precision, flag) {\n    if (isNumber(precision) && precision >= 0 && (!flag || (flag && !this._precisionFlag))) {\n      this.precision = parseInt(precision, 10)\n      if (!flag) {\n        this._precisionFlag = true\n      }\n      return true\n    }\n    return false\n  }\n\n  /**\n   * 设置计算参数\n   * @param params\n   * @returns\n   */\n  setCalcParams (params) {\n    if (!isArray(params)) {\n      return false\n    }\n    if (this.shouldCheckParamCount && params.length !== this.calcParams.length) {\n      return false\n    }\n    const calcParams = []\n    for (let i = 0; i < params.length; i++) {\n      const param = params[i]\n      let v\n      let allowDecimal\n      if (isObject(param)) {\n        v = param.value\n        allowDecimal = param.allowDecimal\n      } else {\n        v = param\n        allowDecimal = false\n      }\n      const oldParam = this.calcParams[i]\n      if (isObject(oldParam) && isBoolean(oldParam.allowDecimal)) {\n        allowDecimal = oldParam.allowDecimal\n      }\n      if (\n        !isNumber(v) ||\n        (!allowDecimal && parseInt(v, 10) !== v)\n      ) {\n        return false\n      }\n      calcParams.push({ allowDecimal, value: v })\n    }\n    this.calcParams = calcParams\n    const plots = this.regeneratePlots(this._createParams(calcParams))\n    if (plots && isArray(plots)) {\n      this.plots = plots\n    }\n    return true\n  }\n\n  setShouldOhlc (shouldOhlc) {\n    if (isBoolean(shouldOhlc) && this.shouldOhlc !== shouldOhlc) {\n      this.shouldOhlc = shouldOhlc\n      return true\n    }\n    return false\n  }\n\n  setShouldFormatBigNumber (shouldFormatBigNumber) {\n    if (isBoolean(shouldFormatBigNumber) && this.shouldFormatBigNumber !== shouldFormatBigNumber) {\n      this.shouldFormatBigNumber = shouldFormatBigNumber\n      return true\n    }\n    return false\n  }\n\n  setStyles (styles, defaultStyles) {\n    if (!isObject(styles)) {\n      return false\n    }\n    if (!this.styles) {\n      this.styles = {\n        margin: clone(defaultStyles.margin),\n        bar: clone(defaultStyles.bar),\n        line: clone(defaultStyles.line),\n        circle: clone(defaultStyles.circle)\n      }\n    }\n    merge(this.styles, styles)\n    return true\n  }\n\n  setExtendData (extendData) {\n    if (extendData !== undefined && this.extendData !== extendData) {\n      this.extendData = extendData\n      return true\n    }\n    return false\n  }\n\n  /**\n   * 计算\n   * @param dataList\n   * @return {*}\n   */\n  async calc (dataList) {\n    this.result = await this.calcTechnicalIndicator(dataList, {\n      params: this._createParams(this.calcParams),\n      plots: this.plots,\n      extendData: this.extendData\n    }) || []\n  }\n\n  /**\n   * 计算技术指标\n   */\n  calcTechnicalIndicator (dataList, options) {}\n\n  /**\n   * 重新生成各项数据\n   * @param params\n   */\n  regeneratePlots (params) {}\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport extension from './extension'\n\nimport { isFunction, isValid, isObject, clone, merge } from '../utils/typeChecks'\nimport { logWarn } from '../utils/logger'\n\nimport TechnicalIndicator, { TechnicalIndicatorSeries } from '../component/technicalindicator/TechnicalIndicator'\n\nexport default class TechnicalIndicatorStore {\n  constructor (chartStore) {\n    this._chartStore = chartStore\n    // 指标模板\n    this._templates = this._createTemplates()\n    this._instances = new Map()\n  }\n\n  /**\n   * 获取指标信息\n   * @param tech\n   * @return {{ calcParams, series, precision, name, shortName, shouldCheckParamCount, shouldOhlc, shouldFormatBigNumber, styles }}\n   */\n  _createTechInfo (tech) {\n    return {\n      name: tech.name,\n      shortName: tech.shortName,\n      series: tech.series,\n      calcParams: tech.calcParams,\n      shouldCheckParamCount: tech.shouldCheckParamCount,\n      shouldOhlc: tech.shouldOhlc,\n      shouldFormatBigNumber: tech.shouldFormatBigNumber,\n      precision: tech.precision,\n      styles: tech.styles,\n      plots: tech.plots,\n      result: tech.result || []\n    }\n  }\n\n  /**\n   * 创建技术指标模板\n   * @return {{}}\n   */\n  _createTemplates () {\n    const mapping = {}\n    const extensions = extension.technicalIndicatorExtensions\n    for (const name in extensions) {\n      const templateInstance = this._createTemplateInstance(extensions[name])\n      if (templateInstance) {\n        mapping[name] = templateInstance\n      }\n    }\n    return mapping\n  }\n\n  /**\n   * 创建一个新的技术指标\n   * @param name\n   * @param shortName\n   * @param series\n   * @param calcParams\n   * @param plots\n   * @param precision\n   * @param shouldCheckParamCount\n   * @param shouldOhlc\n   * @param shouldFormatBigNumber\n   * @param minValue\n   * @param maxValue\n   * @param styles\n   * @param calcTechnicalIndicator\n   * @param regeneratePlots\n   * @param render\n   * @returns {templateInstance|null}\n   */\n  _createTemplateInstance ({\n    name, shortName, series, calcParams, plots, precision,\n    shouldCheckParamCount, shouldOhlc, shouldFormatBigNumber,\n    minValue, maxValue, styles, extendData,\n    calcTechnicalIndicator, regeneratePlots, createToolTipDataSource, render\n  }) {\n    if (!name || !isFunction(calcTechnicalIndicator)) {\n      logWarn('', '', 'The required attribute \"name\" and method \"calcTechnicalIndicator\" are missing, and new technical indicator cannot be generated!!!')\n      return null\n    }\n    let defaultStyles\n    if (isObject(styles)) {\n      const techOptions = this._chartStore.styleOptions().technicalIndicator\n      defaultStyles = {\n        margin: clone(techOptions.margin),\n        bar: clone(techOptions.bar),\n        line: clone(techOptions.line),\n        circle: clone(techOptions.circle)\n      }\n      merge(defaultStyles, styles)\n    }\n    class Template extends TechnicalIndicator {\n      constructor () {\n        super(\n          {\n            name,\n            shortName,\n            series,\n            calcParams,\n            plots,\n            precision,\n            shouldCheckParamCount,\n            shouldOhlc,\n            shouldFormatBigNumber,\n            minValue,\n            maxValue,\n            defaultStyles,\n            extendData\n          }\n        )\n      }\n    }\n    Template.prototype.calcTechnicalIndicator = calcTechnicalIndicator\n    if (isFunction(regeneratePlots)) {\n      Template.prototype.regeneratePlots = regeneratePlots\n    }\n    if (isFunction(createToolTipDataSource)) {\n      Template.prototype.createToolTipDataSource = createToolTipDataSource\n    }\n    if (isFunction(render)) {\n      Template.prototype.render = render\n    }\n    return new Template()\n  }\n\n  /**\n   * 添加指标模板\n   * @param templates\n   */\n  addTemplate (templates) {\n    templates.forEach(tmp => {\n      const instance = this._createTemplateInstance(tmp || {})\n      if (instance) {\n        // 将生成的新的指标类放入集合\n        this._templates[instance.name] = instance\n      }\n    })\n  }\n\n  /**\n   * 模板是否存在\n   * @param {*} name\n   * @returns\n   */\n  hasTemplate (name) {\n    return !!this._templates[name]\n  }\n\n  /**\n   * 获取技术指标模板信息\n   * @param name\n   * @return {{}|{calcParams: *, precision: *, name: *}}\n   */\n  getTemplateInfo (name) {\n    if (isValid(name)) {\n      const template = this._templates[name]\n      if (template) {\n        return this._createTechInfo(template)\n      }\n    } else {\n      const templateInfos = {}\n      for (const name in this._templates) {\n        const template = this._templates[name]\n        templateInfos[name] = this._createTechInfo(template)\n      }\n      return templateInfos\n    }\n    return {}\n  }\n\n  /**\n   * 添加技术指标实例\n   * @param paneId\n   * @param tech\n   * @param isStack\n   * @returns\n   */\n  addInstance (paneId, tech, isStack) {\n    const { name, calcParams, precision, shouldOhlc, shouldFormatBigNumber, styles, extendData } = tech\n    let paneInstances = this._instances.get(paneId)\n    if (paneInstances && paneInstances.has(name)) {\n      return\n    }\n    if (!paneInstances) {\n      paneInstances = new Map()\n      this._instances.set(paneId, paneInstances)\n    }\n    const template = this._templates[name]\n    const instance = Object.create(Object.getPrototypeOf(template))\n    for (const key in template) {\n      if (Object.prototype.hasOwnProperty.call(template, key)) {\n        instance[key] = template[key]\n      }\n    }\n    instance.setCalcParams(calcParams)\n    instance.setPrecision(precision)\n    instance.setShouldOhlc(shouldOhlc)\n    instance.setShouldFormatBigNumber(shouldFormatBigNumber)\n    instance.setStyles(styles, this._chartStore.styleOptions().technicalIndicator)\n    instance.setExtendData(extendData)\n    if (!isStack) {\n      paneInstances.clear()\n    }\n    paneInstances.set(name, instance)\n    return instance.calc(this._chartStore.dataList())\n  }\n\n  /**\n   * 获取实例\n   * @param {*} paneId\n   * @returns\n   */\n  instances (paneId) {\n    return this._instances.get(paneId) || new Map()\n  }\n\n  /**\n   * 移除技术指标\n   * @param paneId\n   * @param name\n   * @return {boolean}\n   */\n  removeInstance (paneId, name) {\n    let removed = false\n    if (this._instances.has(paneId)) {\n      const paneInstances = this._instances.get(paneId)\n      if (isValid(name)) {\n        if (paneInstances.has(name)) {\n          paneInstances.delete(name)\n          removed = true\n        }\n      } else {\n        paneInstances.clear()\n        removed = true\n      }\n      if (paneInstances.size === 0) {\n        this._instances.delete(paneId)\n      }\n    }\n    return removed\n  }\n\n  /**\n   * 是否有实例\n   * @param paneId\n   * @returns\n   */\n  hasInstance (paneId) {\n    return this._instances.has(paneId)\n  }\n\n  /**\n   * 实例计算\n   * @param paneId\n   * @param name\n   */\n  calcInstance (name, paneId) {\n    const tasks = []\n    if (isValid(name)) {\n      if (isValid(paneId)) {\n        const paneInstances = this._instances.get(paneId)\n        if (paneInstances && paneInstances.has(name)) {\n          tasks.push(paneInstances.get(name).calc(this._chartStore.dataList()))\n        }\n      } else {\n        this._instances.forEach(paneInstances => {\n          if (paneInstances.has(name)) {\n            tasks.push(paneInstances.get(name).calc(this._chartStore.dataList()))\n          }\n        })\n      }\n    } else {\n      this._instances.forEach(paneInstances => {\n        paneInstances.forEach(instance => {\n          tasks.push(instance.calc(this._chartStore.dataList()))\n        })\n      })\n    }\n    return Promise.all(tasks)\n  }\n\n  /**\n   * 获取实例信息\n   * @param paneId\n   * @param name\n   * @returns\n   */\n  getInstanceInfo (paneId, name) {\n    const info = (paneInstances) => {\n      const instanceInfos = []\n      for (const entry of paneInstances) {\n        const instance = entry[1]\n        if (instance) {\n          const instanceInfo = this._createTechInfo(instance)\n          if (instance.name === name) {\n            return instanceInfo\n          }\n          instanceInfos.push(instanceInfo)\n        }\n      }\n      return instanceInfos\n    }\n\n    if (isValid(paneId)) {\n      if (this._instances.has(paneId)) {\n        return info(this._instances.get(paneId))\n      }\n    } else {\n      const infos = {}\n      this._instances.forEach((paneInstance, paneId) => {\n        infos[paneId] = info(paneInstance)\n      })\n      return infos\n    }\n    return {}\n  }\n\n  /**\n   * 设置系列精度\n   * @param pricePrecision\n   * @param volumePrecision\n   */\n  setSeriesPrecision (pricePrecision, volumePrecision) {\n    const setPrecision = (tech) => {\n      if (tech.series === TechnicalIndicatorSeries.PRICE) {\n        tech.setPrecision(pricePrecision, true)\n      }\n      if (tech.series === TechnicalIndicatorSeries.VOLUME) {\n        tech.setPrecision(volumePrecision, true)\n      }\n    }\n    for (const key in this._templates) {\n      setPrecision(this._templates[key])\n    }\n    this._instances.forEach(paneInstances => {\n      paneInstances.forEach(instance => {\n        setPrecision(instance)\n      })\n    })\n  }\n\n  /**\n   * 覆盖\n   * @param techOverride\n   * @param paneId\n   * @returns\n   */\n  override (techOverride, paneId) {\n    const { name, shortName, calcParams, precision, shouldOhlc, shouldFormatBigNumber, styles, extendData } = techOverride\n    const defaultTechStyleOptions = this._chartStore.styleOptions().technicalIndicator\n    let instances = new Map()\n    if (isValid(paneId)) {\n      if (this._instances.has(paneId)) {\n        instances.set(paneId, this._instances.get(paneId))\n      }\n    } else {\n      instances = this._instances\n      const template = this._templates[name]\n      if (template) {\n        template.setCalcParams(calcParams)\n        template.setShortName(shortName)\n        template.setPrecision(precision)\n        template.setShouldOhlc(shouldOhlc)\n        template.setShouldFormatBigNumber(shouldFormatBigNumber)\n        template.setStyles(styles, defaultTechStyleOptions)\n        template.setExtendData(extendData)\n      }\n    }\n    let overiderSuccss = false\n    const tasks = []\n    instances.forEach(paneInstances => {\n      if (paneInstances.has(name)) {\n        const tech = paneInstances.get(name)\n        const shortNameSuccess = tech.setShortName(shortName)\n        const calcParamsSuccess = tech.setCalcParams(calcParams)\n        const precisionSuccess = tech.setPrecision(precision)\n        const shouldOhlcSuccess = tech.setShouldOhlc(shouldOhlc)\n        const shouldFormatBigNumberSuccess = tech.setShouldFormatBigNumber(shouldFormatBigNumber)\n        const styleSuccess = tech.setStyles(styles, defaultTechStyleOptions)\n        const extendDataSuccess = tech.setExtendData(extendData)\n        if (shortNameSuccess || calcParamsSuccess || precisionSuccess || shouldOhlcSuccess || shouldFormatBigNumberSuccess || styleSuccess || extendDataSuccess) {\n          overiderSuccss = true\n        }\n        if (calcParamsSuccess) {\n          tasks.push(tech.calc(this._chartStore.dataList()))\n        }\n      }\n    })\n    if (overiderSuccss) {\n      return Promise.all(tasks)\n    }\n  }\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isFunction, isObject, clone, merge } from '../../utils/typeChecks'\n\n/**\n * 完善覆盖物实例\n * @param overlay 覆盖物实例\n * @param options 参数\n */\nexport function perfectOverlayFunc (overlay, funcs) {\n  funcs.forEach(({ key, fn }) => {\n    if (isFunction(fn)) {\n      overlay[key] = fn\n    }\n  })\n}\n\n/**\n * 覆盖物\n */\nexport default class Overlay {\n  constructor ({\n    id, chartStore, points, xAxis, yAxis\n  }) {\n    this._id = id\n    this._chartStore = chartStore\n    this._points = points\n    this._xAxis = xAxis\n    this._yAxis = yAxis\n    this._styles = null\n  }\n\n  /**\n   * 绘制\n   * @param ctx\n   */\n  draw (ctx) {}\n\n  /**\n   * 设置样式\n   * @param styles\n   * @param defaultStyles\n   */\n  setStyles (styles, defaultStyles) {\n    if (!isObject(styles)) {\n      return false\n    }\n    if (!this._styles) {\n      this._styles = clone(defaultStyles)\n    }\n    merge(this._styles, styles)\n    return true\n  }\n\n  /**\n   * 获取id\n   * @return {*}\n   */\n  id () {\n    return this._id\n  }\n\n  /**\n   * 获取样式\n   * @return {null}\n   */\n  styles () {\n    return this._styles\n  }\n\n  /**\n   * 获取点信息\n   */\n  points () {\n    return this._points\n  }\n\n  /**\n   * 设置y轴\n   * @param yAxis\n   */\n  setYAxis (yAxis) {\n    if (yAxis) {\n      this._yAxis = yAxis\n    }\n  }\n\n  /**\n   * 检查鼠标点是否在图形上\n   * @param coordinate\n   */\n  checkEventCoordinateOn (coordinate) {}\n\n  // -------------------- 事件开始 -------------------\n\n  /**\n   * 点击事件\n   * @param id\n   * @param points\n   * @param event\n   */\n  onClick ({ id, points, event }) {}\n\n  /**\n   * 右击事件\n   * @param id\n   * @param points\n   * @param event\n   */\n  onRightClick ({ id, points, event }) {}\n\n  /**\n   * 鼠标进入事件\n   * @param id\n   * @param points\n   * @param event\n   */\n  onMouseEnter ({ id, points, event }) {}\n\n  /**\n   * 鼠标离开事件\n   * @param id\n   * @param points\n   * @param event\n   */\n  onMouseLeave ({ id, points, event }) {}\n\n  // -------------------- 事件结束 -------------------\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 绘制边框圆\n * @param ctx\n * @param borderColor\n * @param borderSize\n * @param circleCoordinate\n * @param radius\n */\nexport function renderStrokeCircle (ctx, borderColor, borderSize, circleCoordinate, radius) {\n  ctx.lineWidth = borderSize\n  ctx.strokeStyle = borderColor\n  ctx.beginPath()\n  ctx.arc(circleCoordinate.x, circleCoordinate.y, radius, 0, Math.PI * 2)\n  ctx.closePath()\n  ctx.stroke()\n}\n\n/**\n * 绘制实心圆\n * @param ctx\n * @param fillColor\n * @param circleCoordinate\n * @param radius\n */\nexport function renderFillCircle (ctx, fillColor, circleCoordinate, radius) {\n  ctx.fillStyle = fillColor\n  ctx.beginPath()\n  ctx.arc(circleCoordinate.x, circleCoordinate.y, radius, 0, Math.PI * 2)\n  ctx.closePath()\n  ctx.fill()\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const DEVIATION = 2\n\n/**\n * 获取两点之间的距离\n * @param coordinate\n * @param coordinate2\n * @return {number}\n */\nexport function getDistance (coordinate1, coordinate2) {\n  const xDif = coordinate1.x - coordinate2.x\n  const yDif = coordinate1.y - coordinate2.y\n  return Math.sqrt(xDif * xDif + yDif * yDif)\n}\n\n/**\n * 根据三角形三个点获取三角形面积\n * @param coordinate1\n * @param coordinate2\n * @param coordinate3\n * @return {number}\n */\nexport function getTriangleSquare (coordinate1, coordinate2, coordinate3) {\n  const x1 = Math.abs(coordinate2.x - coordinate1.x)\n  const y1 = Math.abs(coordinate2.y - coordinate1.y)\n  const x2 = Math.abs(coordinate3.x - coordinate1.x)\n  const y2 = Math.abs(coordinate3.y - coordinate1.y)\n  return Math.abs(x1 * y2 - x2 * y1) / 2\n}\n\n/**\n * 获取一点绕另一点旋转一定角度后新的点坐标\n * @param coordinate 旋转点\n * @param targetCoordinate 参照点\n * @param angle 角度\n * @return {{x: *, y: *}}\n */\nexport function getRotateCoordinate (coordinate, targetCoordinate, angle) {\n  const x = (coordinate.x - targetCoordinate.x) * Math.cos(angle) - (coordinate.y - targetCoordinate.y) * Math.sin(angle) + targetCoordinate.x\n  const y = (coordinate.x - targetCoordinate.x) * Math.sin(angle) + (coordinate.y - targetCoordinate.y) * Math.cos(angle) + targetCoordinate.y\n  return { x, y }\n}\n\n/**\n * 获取一次函数斜率和截距，即 y = kx + b 中的k值和b值\n * @param coordinate1\n * @param coordinate2\n */\nexport function getLinearSlopeIntercept (coordinate1, coordinate2) {\n  const difX = (coordinate1.x - coordinate2.x)\n  if (difX !== 0) {\n    const k = (coordinate1.y - coordinate2.y) / difX\n    const b = coordinate1.y - k * coordinate1.x\n    return { k, b }\n  }\n}\n\n/**\n * 获取点在两点决定的一次函数上的y值\n * @param coordinate1\n * @param coordinate2\n * @param targetCoordinate\n */\nexport function getLinearYFromCoordinates (coordinate1, coordinate2, targetCoordinate) {\n  const kb = getLinearSlopeIntercept(coordinate1, coordinate2)\n  return getLinearYFromSlopeIntercept(kb, targetCoordinate)\n}\n\n/**\n * 获取点在斜率和截距确定的线上的y值\n * @param kb\n * @param targetCoordinate\n */\nexport function getLinearYFromSlopeIntercept (kb, targetCoordinate) {\n  if (kb) {\n    return targetCoordinate.x * kb.k + kb.b\n  }\n  return targetCoordinate.y\n}\n\n/**\n * 点是否在线上\n * @param coordinate1\n * @param coordinate2\n * @param targetCoordinate\n */\nexport function checkCoordinateOnStraightLine (coordinate1, coordinate2, targetCoordinate) {\n  if (!targetCoordinate || !coordinate1 || !coordinate2) {\n    return false\n  }\n  if (coordinate1.x === coordinate2.x) {\n    return Math.abs(targetCoordinate.x - coordinate1.x) < DEVIATION\n  }\n  const kb = getLinearSlopeIntercept(coordinate1, coordinate2)\n  const y = getLinearYFromSlopeIntercept(kb, targetCoordinate)\n  const yDif = Math.abs(y - targetCoordinate.y)\n  return yDif * yDif / (kb.k * kb.k + 1) < DEVIATION * DEVIATION\n}\n\n/**\n * 点是否在线段上\n * @param coordinate1\n * @param coordinate2\n * @param targetCoordinate\n * @returns {boolean}\n */\nexport function checkCoordinateOnRayLine (coordinate1, coordinate2, targetCoordinate) {\n  if (checkCoordinateOnStraightLine(coordinate1, coordinate2, targetCoordinate)) {\n    if (coordinate1.x === coordinate2.x) {\n      if (coordinate1.y < coordinate2.y) {\n        return coordinate1.y - targetCoordinate.y < DEVIATION\n      } else {\n        return targetCoordinate.y - coordinate1.y < DEVIATION\n      }\n    }\n    if (coordinate1.x < coordinate2.x) {\n      return coordinate1.x - targetCoordinate.x < DEVIATION\n    } else {\n      return targetCoordinate.x - coordinate1.x < DEVIATION\n    }\n  }\n  return false\n}\n\n/**\n * 判断点是否在线段上面\n * @param coordinate1\n * @param coordinate2\n * @param targetCoordinate\n */\nexport function checkCoordinateOnSegment (coordinate1, coordinate2, targetCoordinate) {\n  if (checkCoordinateOnStraightLine(coordinate1, coordinate2, targetCoordinate)) {\n    if (coordinate1.x === coordinate2.x) {\n      return Math.abs(coordinate1.y - targetCoordinate.y) + Math.abs(coordinate2.y - targetCoordinate.y) - Math.abs(coordinate1.y - coordinate2.y) < DEVIATION * 2\n    }\n    return Math.abs(coordinate1.x - targetCoordinate.x) + Math.abs(coordinate2.x - targetCoordinate.x) - Math.abs(coordinate1.x - coordinate2.x) < DEVIATION * 2\n  }\n  return false\n}\n\n/**\n * 点是否在圆内\n * @param circleCenterCoordinate\n * @param radius\n * @param targetCoordinate\n * @returns {boolean}\n */\nexport function checkCoordinateInCircle (circleCenterCoordinate, radius, targetCoordinate) {\n  if (!targetCoordinate) {\n    return false\n  }\n  const difX = targetCoordinate.x - circleCenterCoordinate.x\n  const difY = targetCoordinate.y - circleCenterCoordinate.y\n  return !(difX * difX + difY * difY > radius * radius)\n}\n\n/**\n * 点是否在圆上\n * @param circleCenterCoordinate\n * @param radius\n * @param targetCoordinate\n * @return {boolean}\n */\nexport function checkCoordinateOnCircle (circleCenterCoordinate, radius, targetCoordinate) {\n  if (!targetCoordinate) {\n    return false\n  }\n  return Math.abs(getDistance(targetCoordinate, circleCenterCoordinate) - radius) < DEVIATION\n}\n\n/**\n * 检查点是否在圆弧上\n * @param circleCenterCoordinate\n * @param radius\n * @param startAngle\n * @param endAngle\n * @param targetCoordinate\n * @return {boolean}\n */\nexport function checkCoordinateOnArc (circleCenterCoordinate, radius, startAngle, endAngle, targetCoordinate) {\n  if (checkCoordinateOnCircle(circleCenterCoordinate, radius, targetCoordinate)) {\n    const startCoordinateX = radius * Math.cos(startAngle) + circleCenterCoordinate.x\n    const startCoordinateY = radius * Math.sin(startAngle) + circleCenterCoordinate.y\n    const endCoordinateX = radius * Math.cos(endAngle) + circleCenterCoordinate.x\n    const endCoordinateY = radius * Math.sin(endAngle) + circleCenterCoordinate.y\n    return (\n      targetCoordinate.x <= Math.max(startCoordinateX, endCoordinateX) + DEVIATION &&\n      targetCoordinate.x >= Math.min(startCoordinateX, endCoordinateX) - DEVIATION &&\n      targetCoordinate.y <= Math.max(startCoordinateY, endCoordinateY) + DEVIATION &&\n      targetCoordinate.y >= Math.min(startCoordinateY, endCoordinateY) - DEVIATION\n    )\n  }\n}\n\n/**\n * 检查点是否在三角形内部\n * @param triangleCoordinates\n * @param targetCoordinate\n * @return {boolean}\n */\nexport function checkCoordinateInTriangle (triangleCoordinates, targetCoordinate) {\n  const square = getTriangleSquare(triangleCoordinates[0], triangleCoordinates[1], triangleCoordinates[2])\n  const compareSquare =\n    getTriangleSquare(triangleCoordinates[0], triangleCoordinates[1], targetCoordinate) +\n    getTriangleSquare(triangleCoordinates[0], triangleCoordinates[2], targetCoordinate) +\n    getTriangleSquare(triangleCoordinates[1], triangleCoordinates[2], targetCoordinate)\n  return Math.abs(square - compareSquare) < DEVIATION\n}\n\n/**\n * 检查点是否在三角形菱形内部\n * @param centerCoordinate\n * @param width\n * @param height\n * @param targetCoordinate\n * @return {boolean}\n */\nexport function checkCoordinateInDiamond (centerCoordinate, width, height, targetCoordinate) {\n  const xDis = Math.abs(centerCoordinate.x - targetCoordinate.x)\n  const yDis = Math.abs(centerCoordinate.y - targetCoordinate.y)\n  return xDis * height + yDis * width < width * height / 2 + DEVIATION\n}\n\n/**\n * 检查点是否在矩形内部\n * @param coordinate1\n * @param coordinate2\n * @param targetCoordinate\n * @return {boolean}\n */\nexport function checkCoordinateInRect (coordinate1, coordinate2, targetCoordinate) {\n  return targetCoordinate.x >= coordinate1.x && targetCoordinate.x <= coordinate2.x && targetCoordinate.y >= coordinate1.y && targetCoordinate.y <= coordinate2.y\n}\n\n/**\n * 根据两点获取一条射线\n * @param coordinate1\n * @param coordinate2\n * @param xyMax\n * @return {(*|{x: *, y: *})[]|*[]}\n */\nexport function getRayLine (coordinate1, coordinate2, xyMax) {\n  if (coordinate1 && coordinate2) {\n    let coordinate\n    if (coordinate1.x === coordinate2.x && coordinate1.y !== coordinate2.y) {\n      if (coordinate1.y < coordinate2.y) {\n        coordinate = {\n          x: coordinate1.x,\n          y: xyMax.y\n        }\n      } else {\n        coordinate = {\n          x: coordinate1.x,\n          y: 0\n        }\n      }\n    } else if (coordinate1.x > coordinate2.x) {\n      coordinate = {\n        x: 0,\n        y: getLinearYFromCoordinates(coordinate1, coordinate2, { x: 0, y: coordinate1.y })\n      }\n    } else {\n      coordinate = {\n        x: xyMax.x,\n        y: getLinearYFromCoordinates(coordinate1, coordinate2, { x: xyMax.x, y: coordinate1.y })\n      }\n    }\n    return [coordinate1, coordinate]\n  }\n  return []\n}\n\n/**\n * 获取平行线\n * @param coordinates\n * @param xyMax\n * @param extendParallelLineCount\n * @returns {Array}\n */\nexport function getParallelLines (coordinates, xyMax, extendParallelLineCount = 0) {\n  const lines = []\n  if (coordinates.length > 1) {\n    if (coordinates[0].x === coordinates[1].x) {\n      const startY = 0\n      const endY = xyMax.y\n      lines.push([{ x: coordinates[0].x, y: startY }, { x: coordinates[0].x, y: endY }])\n      if (coordinates.length > 2) {\n        lines.push([{ x: coordinates[2].x, y: startY }, { x: coordinates[2].x, y: endY }])\n        const distance = coordinates[0].x - coordinates[2].x\n        for (let i = 0; i < extendParallelLineCount; i++) {\n          const d = distance * (i + 1)\n          lines.push([{ x: coordinates[0].x + d, y: startY }, { x: coordinates[0].x + d, y: endY }])\n        }\n      }\n    } else {\n      const startX = 0\n      const endX = xyMax.x\n      const kb = getLinearSlopeIntercept(coordinates[0], coordinates[1])\n      const k = kb.k\n      const b = kb.b\n      lines.push([{ x: startX, y: startX * k + b }, { x: endX, y: endX * k + b }])\n      if (coordinates.length > 2) {\n        const b1 = coordinates[2].y - k * coordinates[2].x\n        lines.push([{ x: startX, y: startX * k + b1 }, { x: endX, y: endX * k + b1 }])\n        const distance = b - b1\n        for (let i = 0; i < extendParallelLineCount; i++) {\n          const b2 = b + distance * (i + 1)\n          lines.push([{ x: startX, y: startX * k + b2 }, { x: endX, y: endX * k + b2 }])\n        }\n      }\n    }\n  }\n  return lines\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 绘制路径\n * @param ctx\n * @param coordinates\n * @param strokeFill\n */\nexport function renderPath (ctx, coordinates, strokeFill) {\n  ctx.save()\n  if (ctx.lineWidth % 2) {\n    ctx.translate(0.5, 0.5)\n  }\n  ctx.beginPath()\n  let move = true\n  coordinates.forEach(coordinate => {\n    if (coordinate) {\n      if (move) {\n        ctx.moveTo(coordinate.x, coordinate.y)\n        move = false\n      } else {\n        ctx.lineTo(coordinate.x, coordinate.y)\n      }\n    }\n  })\n  strokeFill()\n  ctx.restore()\n}\n\nexport function renderCloseStrokePath (ctx, coordinates) {\n  renderPath(ctx, coordinates, () => {\n    ctx.closePath()\n    ctx.stroke()\n  })\n}\n\n/**\n * 渲染填充路径\n * @param ctx\n * @param coordinates\n */\nexport function renderCloseFillPath (ctx, coordinates) {\n  renderPath(ctx, coordinates, () => {\n    ctx.closePath()\n    ctx.fill()\n  })\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { renderPath } from './path'\n\n/**\n * 绘制水平直线\n * @param ctx\n * @param y\n * @param left\n * @param right\n */\nexport function renderHorizontalLine (ctx, y, left, right) {\n  ctx.beginPath()\n  const correction = (ctx.lineWidth % 2) ? 0.5 : 0\n  ctx.moveTo(left, y + correction)\n  ctx.lineTo(right, y + correction)\n  ctx.stroke()\n  ctx.closePath()\n}\n\n/**\n * 绘制垂直直线\n * @param ctx\n * @param x\n * @param top\n * @param bottom\n */\nexport function renderVerticalLine (ctx, x, top, bottom) {\n  ctx.beginPath()\n  const correction = (ctx.lineWidth % 2) ? 0.5 : 0\n  ctx.moveTo(x + correction, top)\n  ctx.lineTo(x + correction, bottom)\n  ctx.stroke()\n  ctx.closePath()\n}\n\n/**\n * 绘制线\n * @param ctx\n * @param coordinates\n */\nexport function renderLine (ctx, coordinates) {\n  renderPath(ctx, coordinates, () => {\n    ctx.stroke()\n    ctx.closePath()\n  })\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 获取屏幕比\n * @param canvas\n * @returns {number}\n */\nexport function getPixelRatio (canvas) {\n  return (canvas.ownerDocument && canvas.ownerDocument.defaultView && canvas.ownerDocument.defaultView.devicePixelRatio) || 2\n}\n\n/**\n * 测量文字的宽度\n * @param ctx\n * @param text\n * @returns {number}\n */\nexport function calcTextWidth (ctx, text) {\n  return Math.round(ctx.measureText(text).width)\n}\n\n/**\n * 创建字体\n * @param fontSize\n * @param fontFamily\n * @param fontWeight\n * @returns {string}\n */\nexport function createFont (fontSize = 12, fontWeight = 'normal', fontFamily = 'Helvetica Neue') {\n  return `${fontWeight} ${fontSize}px ${fontFamily}`\n}\n\n/**\n * 获取文字框宽度\n * @param ctx\n * @param text\n * @param options\n * @returns {number}\n */\nexport function getTextRectWidth (ctx, text, options) {\n  ctx.font = createFont(options.size, options.weight, options.family)\n  const textWidth = calcTextWidth(ctx, text)\n  return options.paddingLeft + options.paddingRight + textWidth + (options.borderSize || 0) * 2\n}\n\n/**\n * 获取文字框高度\n * @param options\n * @returns {number}\n */\nexport function getTextRectHeight (options) {\n  return options.paddingTop + options.paddingBottom + options.size + (options.borderSize || 0) * 2\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Overlay from './Overlay'\n\nimport { renderFillCircle } from '../../renderer/circle'\nimport { checkCoordinateInCircle } from '../../extension/shape/shapeHelper'\nimport { renderHorizontalLine, renderLine, renderVerticalLine } from '../../renderer/line'\nimport { renderCloseStrokePath, renderCloseFillPath } from '../../renderer/path'\nimport { isArray, isValid, clone } from '../../utils/typeChecks'\nimport { createFont } from '../../utils/canvas'\n\nimport { StrokeFillStyle, LineStyle } from '../../options/styleOptions'\n\n// 标记图形绘制步骤开始\nconst SHAPE_DRAW_STEP_START = 1\n\n// 标记图形绘制步骤结束\nconst SHAPE_DRAW_STEP_FINISHED = -1\n\n/**\n * 事件操作元素类型\n * @type {{OTHER: string, POINT: string, NONE: string}}\n */\nexport const ShapeEventOperateElement = {\n  OTHER: 'other',\n  POINT: 'point',\n  NONE: 'none'\n}\n\n/**\n * 绘制类型\n * @type {{ARC: string, POLYGON: string, LINE: string, CONTINUOUS_LINE: string, TEXT: string}}\n */\nconst ShapeElementType = {\n  LINE: 'line',\n  TEXT: 'text',\n  CONTINUOUS_LINE: 'continuous_line',\n  POLYGON: 'polygon',\n  ARC: 'arc'\n}\n\n/**\n * 线类型\n * @type {{VERTICAL: number, COMMON: number, HORIZONTAL: number}}\n */\nconst LineType = {\n  COMMON: 0,\n  HORIZONTAL: 1,\n  VERTICAL: 2\n}\n\n/**\n * 图形模式\n */\nconst ShapeMode = {\n  NORMAL: 'normal',\n  WEAK_MAGNET: 'weak_magnet',\n  STRONG_MAGNET: 'strong_magnet'\n}\n\n/**\n * 获取绘制线类型\n * @param coordinate1\n * @param coordinate2\n * @private\n */\nfunction getLineType (coordinate1, coordinate2) {\n  if (coordinate1.x === coordinate2.x) {\n    return LineType.VERTICAL\n  }\n  if (coordinate1.y === coordinate2.y) {\n    return LineType.HORIZONTAL\n  }\n  return LineType.COMMON\n}\n\n/**\n * 标记图形\n */\nexport default class Shape extends Overlay {\n  constructor ({\n    id, name, totalStep,\n    chartStore, xAxis, yAxis,\n    points = [], styles, lock, mode, data\n  }) {\n    super({ id, chartStore, points, xAxis, yAxis })\n    this._name = name\n    this._totalStep = totalStep\n    this._lock = lock\n    this._mode = ShapeMode.NORMAL\n    this.setMode(mode)\n    this._data = data\n    this._drawStep = SHAPE_DRAW_STEP_START\n    this.setPoints(points)\n    this.setStyles(styles, chartStore.styleOptions().shape)\n    this._prevPressPoint = null\n    this._prevPoints = null\n    this._coordinates = []\n  }\n\n  /**\n   * 加载点\n   * @param points\n   * @return {undefined|boolean}\n   */\n  setPoints (points) {\n    if (isArray(points) && points.length > 0) {\n      let repeatTotalStep\n      if (points.length >= this._totalStep - 1) {\n        this._drawStep = SHAPE_DRAW_STEP_FINISHED\n        this._points = points.slice(0, this._totalStep - 1)\n        repeatTotalStep = this._totalStep - 1\n      } else {\n        this._drawStep = points.length + 1\n        this._points = clone(points)\n        repeatTotalStep = points.length\n      }\n      // 重新演练绘制一遍，防止因为点不对而绘制出错误的图形\n      for (let i = 0; i < repeatTotalStep; i++) {\n        this.performEventMoveForDrawing({\n          step: i + 2,\n          mode: this._mode,\n          points: this._points,\n          movePoint: this._points[i],\n          xAxis: this._xAxis,\n          yAxis: this._yAxis\n        })\n      }\n      if (this._drawStep === SHAPE_DRAW_STEP_FINISHED) {\n        this.performEventPressedMove({\n          mode: this._mode,\n          points: this._points,\n          pressPointIndex: this._points.length - 1,\n          pressPoint: this._points[this._points.length - 1],\n          xAxis: this._xAxis,\n          yAxis: this._yAxis\n        })\n      }\n      // 设置点后需要重绘，返回重绘标识\n      return true\n    }\n  }\n\n  /**\n   * 时间戳转换成x轴上点的位置\n   * @param point\n   * @return {*|number}\n   * @private\n   */\n  _timestampOrDataIndexToCoordinateX ({ timestamp, dataIndex }) {\n    if (timestamp) {\n      dataIndex = this._chartStore.timeScaleStore().timestampToDataIndex(timestamp)\n    }\n    return this._xAxis.convertToPixel(dataIndex)\n  }\n\n  /**\n   * 绘制线\n   * @param ctx\n   * @param lines\n   * @param styles\n   * @param defaultStyles\n   * @private\n   */\n  _drawLines (ctx, lines, styles, defaultStyles) {\n    ctx.save()\n    ctx.strokeStyle = styles.color || defaultStyles.color\n    ctx.lineWidth = styles.size || defaultStyles.size\n    if (styles.style === LineStyle.DASH) {\n      ctx.setLineDash(styles.dashValue || defaultStyles.dashValue)\n    }\n    lines.forEach(coordinates => {\n      if (coordinates.length > 1) {\n        const lineType = getLineType(coordinates[0], coordinates[1])\n        switch (lineType) {\n          case LineType.COMMON: {\n            renderLine(ctx, coordinates)\n            break\n          }\n          case LineType.HORIZONTAL: {\n            renderHorizontalLine(ctx, coordinates[0].y, coordinates[0].x, coordinates[1].x)\n            break\n          }\n          case LineType.VERTICAL: {\n            renderVerticalLine(ctx, coordinates[0].x, coordinates[0].y, coordinates[1].y)\n            break\n          }\n          default: { break }\n        }\n      }\n    })\n    ctx.restore()\n  }\n\n  /**\n   * 绘制连续线\n   * @param ctx\n   * @param continuousLines\n   * @param styles\n   * @param styles\n   * @private\n   */\n  _drawContinuousLines (ctx, continuousLines, styles, defaultStyles) {\n    ctx.save()\n    ctx.strokeStyle = styles.color || defaultStyles.color\n    ctx.lineWidth = styles.size || defaultStyles.size\n    if (styles.style === LineStyle.DASH) {\n      ctx.setLineDash(styles.dashValue || defaultStyles.dashValue)\n    }\n    continuousLines.forEach(coordinates => {\n      if (coordinates.length > 0) {\n        renderLine(ctx, coordinates)\n      }\n    })\n    ctx.restore()\n  }\n\n  /**\n   * 绘制多边形\n   * @param ctx\n   * @param polygons\n   * @param styles\n   * @param defaultStyles\n   * @private\n   */\n  _drawPolygons (ctx, polygons, styles, defaultStyles) {\n    ctx.save()\n    let strokeFill\n    if (styles.style === StrokeFillStyle.FILL) {\n      ctx.fillStyle = (styles.fill || defaultStyles.fill).color\n      strokeFill = renderCloseFillPath\n    } else {\n      const strokeStyles = styles.stroke || defaultStyles.stroke\n      if (strokeStyles.style === LineStyle.DASH) {\n        ctx.setLineDash(strokeStyles.dashValue)\n      }\n      ctx.lineWidth = strokeStyles.size\n      ctx.strokeStyle = strokeStyles.color\n      strokeFill = renderCloseStrokePath\n    }\n    polygons.forEach(coordinates => {\n      if (coordinates.length > 0) {\n        strokeFill(ctx, coordinates)\n      }\n    })\n    ctx.restore()\n  }\n\n  /**\n   * 画圆弧\n   * @param ctx\n   * @param arcs\n   * @param styles\n   * @param defaultStyles\n   * @private\n   */\n  _drawArcs (ctx, arcs, styles, defaultStyles) {\n    ctx.save()\n    if (styles.style === StrokeFillStyle.FILL) {\n      ctx.fillStyle = (styles.fill || defaultStyles.fill).color\n    } else {\n      const strokeStyles = styles.stroke || defaultStyles.stroke\n      if (strokeStyles.style === LineStyle.DASH) {\n        ctx.setLineDash(strokeStyles.dashValue)\n      }\n      ctx.lineWidth = strokeStyles.size\n      ctx.strokeStyle = strokeStyles.color\n    }\n    arcs.forEach(({ x, y, radius, startAngle, endAngle }) => {\n      ctx.beginPath()\n      ctx.arc(x, y, radius, startAngle, endAngle)\n      if (styles.style === StrokeFillStyle.FILL) {\n        ctx.closePath()\n        ctx.fill()\n      } else {\n        ctx.stroke()\n        ctx.closePath()\n      }\n    })\n    ctx.restore()\n  }\n\n  /**\n   * 绘制文字\n   * @param ctx\n   * @param texts\n   * @param styles\n   * @param defaultStyles\n   * @private\n   */\n  _drawText (ctx, texts, styles, defaultStyles) {\n    ctx.save()\n    let fillStroke\n    if (styles.style === StrokeFillStyle.STROKE) {\n      ctx.strokeStyle = styles.color || defaultStyles.color\n      fillStroke = ctx.strokeText\n    } else {\n      ctx.fillStyle = styles.color || defaultStyles.color\n      fillStroke = ctx.fillText\n    }\n    ctx.font = createFont(\n      styles.size || defaultStyles.size,\n      styles.weight || defaultStyles.weight,\n      styles.family || defaultStyles.family\n    )\n    const offset = styles.offset || defaultStyles.offset || [0, 0]\n    texts.forEach(({ x, y, text }) => {\n      fillStroke.call(\n        ctx,\n        text,\n        x + offset[1],\n        y + offset[0]\n      )\n    })\n    ctx.restore()\n  }\n\n  /**\n   * 绘制\n   * @param ctx\n   */\n  draw (ctx) {\n    this._coordinates = this._points.map(({ timestamp, value, dataIndex }) => {\n      return {\n        x: this._timestampOrDataIndexToCoordinateX({ timestamp, dataIndex }),\n        y: this._yAxis.convertToPixel(value)\n      }\n    })\n    const shapeOptions = this._styles || this._chartStore.styleOptions().shape\n    if (this._drawStep !== SHAPE_DRAW_STEP_START && this._coordinates.length > 0) {\n      const viewport = { width: this._xAxis.width(), height: this._yAxis.height() }\n      const precision = { price: this._chartStore.pricePrecision(), volume: this._chartStore.volumePrecision() }\n      this._shapeDataSources = this.createShapeDataSource({\n        step: this._drawStep,\n        mode: this._mode,\n        points: this._points,\n        coordinates: this._coordinates,\n        viewport: { width: this._xAxis.width(), height: this._yAxis.height() },\n        precision: { price: this._chartStore.pricePrecision(), volume: this._chartStore.volumePrecision() },\n        styles: shapeOptions,\n        xAxis: this._xAxis,\n        yAxis: this._yAxis,\n        data: this._data\n      }) || []\n      this._shapeDataSources.forEach(({ type, isDraw, styles, dataSource = [] }) => {\n        if (isDraw) {\n          switch (type) {\n            case ShapeElementType.LINE: {\n              this._drawLines(ctx, dataSource, styles || shapeOptions.line, shapeOptions.line)\n              break\n            }\n            case ShapeElementType.CONTINUOUS_LINE: {\n              this._drawContinuousLines(ctx, dataSource, styles || shapeOptions.line, shapeOptions.line)\n              break\n            }\n            case ShapeElementType.POLYGON: {\n              this._drawPolygons(ctx, dataSource, styles || shapeOptions.polygon, shapeOptions.polygon)\n              break\n            }\n            case ShapeElementType.ARC: {\n              this._drawArcs(ctx, dataSource, styles || shapeOptions.arc, shapeOptions.arc)\n              break\n            }\n            case ShapeElementType.TEXT: {\n              this._drawText(ctx, dataSource, styles || shapeOptions.text, shapeOptions.text)\n              break\n            }\n            default: { break }\n          }\n        }\n      })\n      if (this.drawExtend) {\n        ctx.save()\n        this.drawExtend({\n          ctx,\n          dataSource: this._shapeDataSources,\n          styles: shapeOptions,\n          viewport,\n          precision,\n          mode: this._mode,\n          xAxis: this._xAxis,\n          yAxis: this._yAxis,\n          data: this._data\n        })\n        ctx.restore()\n      }\n    }\n    const shapeEventOperate = this._chartStore.shapeStore().eventOperate()\n    if (\n      (shapeEventOperate.hover.id === this._id && shapeEventOperate.hover.element !== ShapeEventOperateElement.NONE) ||\n      (shapeEventOperate.click.id === this._id && shapeEventOperate.click.element !== ShapeEventOperateElement.NONE) ||\n      this.isDrawing()\n    ) {\n      this._coordinates.forEach(({ x, y }, index) => {\n        let radius = shapeOptions.point.radius\n        let color = shapeOptions.point.backgroundColor\n        let borderColor = shapeOptions.point.borderColor\n        let borderSize = shapeOptions.point.borderSize\n        if (\n          shapeEventOperate.hover.id === this._id &&\n          shapeEventOperate.hover.element === ShapeEventOperateElement.POINT &&\n          index === shapeEventOperate.hover.elementIndex\n        ) {\n          radius = shapeOptions.point.activeRadius\n          color = shapeOptions.point.activeBackgroundColor\n          borderColor = shapeOptions.point.activeBorderColor\n          borderSize = shapeOptions.point.activeBorderSize\n        }\n        renderFillCircle(ctx, borderColor, { x, y }, radius + borderSize)\n        renderFillCircle(ctx, color, { x, y }, radius)\n      })\n    }\n  }\n\n  /**\n   * 设置是否锁定\n   * @param lock\n   */\n  setLock (lock) {\n    this._lock = lock\n  }\n\n  /**\n   * 获取名字\n   * @return {*}\n   */\n  name () {\n    return this._name\n  }\n\n  /**\n   * 是否锁定\n   * @return {*}\n   */\n  lock () {\n    return this._lock\n  }\n\n  /**\n   * 总步骤数\n   * @return {*}\n   */\n  totalStep () {\n    return this._totalStep\n  }\n\n  /**\n   * 获取模式类型\n   * @returns\n   */\n  mode () {\n    return this._mode\n  }\n\n  /**\n   * 设置模式\n   * @param mode\n   */\n  setMode (mode) {\n    if (Object.values(ShapeMode).indexOf(mode) > -1) {\n      this._mode = mode\n    }\n  }\n\n  /**\n   * 设置数据\n   * @param data\n   */\n  setData (data) {\n    if (data !== undefined && data !== this._data) {\n      this._data = data\n      return true\n    }\n    return false\n  }\n\n  /**\n   * 获取数据\n   * @returns\n   */\n  data () {\n    return this._data\n  }\n\n  /**\n   * 是否在绘制中\n   * @return {boolean}\n   */\n  isDrawing () {\n    return this._drawStep !== SHAPE_DRAW_STEP_FINISHED\n  }\n\n  /**\n   * 是否开始\n   * @returns\n   */\n  isStart () {\n    return this._drawStep === SHAPE_DRAW_STEP_START\n  }\n\n  /**\n   * 检查事件点是否在图形上\n   * @param eventCoordinate\n   * @return {{id: *, elementIndex: number, element: string}}\n   */\n  checkEventCoordinateOn (eventCoordinate) {\n    const shapeOptions = this._styles || this._chartStore.styleOptions().shape\n    // 检查鼠标点是否在图形的点上\n    const start = this._coordinates.length - 1\n    for (let i = start; i > -1; i--) {\n      if (checkCoordinateInCircle(this._coordinates[i], shapeOptions.point.radius, eventCoordinate)) {\n        return {\n          id: this._id,\n          element: ShapeEventOperateElement.POINT,\n          elementIndex: i,\n          instance: this\n        }\n      }\n    }\n    // 检查鼠标点是否在点构成的其它图形上\n    if (this._shapeDataSources) {\n      for (const { key, type, isCheck, dataSource = [] } of this._shapeDataSources) {\n        if (isCheck) {\n          for (let i = 0; i < dataSource.length; i++) {\n            const sources = dataSource[i]\n            if (this.checkEventCoordinateOnShape({ key, type, dataSource: sources, eventCoordinate })) {\n              return {\n                id: this._id,\n                element: ShapeEventOperateElement.OTHER,\n                elementIndex: i,\n                instance: this\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * 不同的模式下处理值\n   * @param value\n   * @param dataIndex\n   * @param paneId\n   */\n  _performValue (y, dataIndex, paneId) {\n    const value = this._yAxis.convertFromPixel(y)\n    if (this._mode === ShapeMode.NORMAL || paneId !== 'candle_pane') {\n      return value\n    }\n    const kLineData = this._chartStore.timeScaleStore().getDataByDataIndex(dataIndex)\n    if (!kLineData) {\n      return value\n    }\n    if (value > kLineData.high) {\n      if (this._mode === ShapeMode.WEAK_MAGNET) {\n        const highY = this._yAxis.convertToPixel(kLineData.high)\n        const buffValue = this._yAxis.convertFromPixel(highY - 8)\n        if (value < buffValue) {\n          return kLineData.high\n        }\n        return value\n      }\n      return kLineData.high\n    }\n    if (value < kLineData.low) {\n      if (this._mode === ShapeMode.WEAK_MAGNET) {\n        const lowY = this._yAxis.convertToPixel(kLineData.low)\n        const buffValue = this._yAxis.convertFromPixel(lowY - 8)\n        if (value > buffValue) {\n          return kLineData.low\n        }\n        return value\n      }\n      return kLineData.low\n    }\n    const max = Math.max(kLineData.open, kLineData.close)\n    if (value > max) {\n      if (value - max < kLineData.high - value) {\n        return max\n      }\n      return kLineData.high\n    }\n    const min = Math.min(kLineData.open, kLineData.close)\n    if (value < min) {\n      if (value - kLineData.low < min - value) {\n        return kLineData.low\n      }\n      return min\n    }\n    if (max - value < value - min) {\n      return max\n    }\n    return min\n  }\n\n  /**\n   * 绘制过程中鼠标移动事件\n   * @param coordinate\n   * @param event\n   */\n  mouseMoveForDrawing (coordinate, event) {\n    const dataIndex = this._xAxis.convertFromPixel(coordinate.x)\n    const timestamp = this._chartStore.timeScaleStore().dataIndexToTimestamp(dataIndex)\n    const value = this._performValue(coordinate.y, dataIndex, event.paneId)\n    this._points[this._drawStep - 1] = { timestamp, value, dataIndex }\n    this.performEventMoveForDrawing({\n      step: this._drawStep,\n      mode: this._mode,\n      points: this._points,\n      movePoint: { timestamp, value, dataIndex },\n      xAxis: this._xAxis,\n      yAxis: this._yAxis\n    })\n    this.onDrawing({ id: this._id, step: this._drawStep, points: this._points })\n  }\n\n  /**\n   * 鼠标左边按钮点击事件\n   */\n  mouseLeftButtonDownForDrawing () {\n    if (this._drawStep === this._totalStep - 1) {\n      this._drawStep = SHAPE_DRAW_STEP_FINISHED\n      this._chartStore.shapeStore().progressInstanceComplete()\n      this.onDrawEnd({ id: this._id, points: this._points })\n    } else {\n      this._drawStep++\n    }\n  }\n\n  /**\n   * 鼠标按住移动方法\n   * @param coordinate\n   * @param event\n   */\n  mousePressedPointMove (coordinate, event) {\n    const shapeEventOperate = this._chartStore.shapeStore().eventOperate()\n    const elementIndex = shapeEventOperate.click.elementIndex\n    if (\n      !this._lock &&\n      shapeEventOperate.click.id === this._id &&\n      shapeEventOperate.click.element === ShapeEventOperateElement.POINT &&\n      elementIndex !== -1\n    ) {\n      const dataIndex = this._xAxis.convertFromPixel(coordinate.x)\n      const timestamp = this._chartStore.timeScaleStore().dataIndexToTimestamp(dataIndex)\n      const value = this._performValue(coordinate.y, dataIndex, event.paneId)\n      this._points[elementIndex].timestamp = timestamp\n      this._points[elementIndex].dataIndex = dataIndex\n      this._points[elementIndex].value = value\n      this.performEventPressedMove({\n        points: this._points,\n        mode: this._mode,\n        pressPointIndex: elementIndex,\n        pressPoint: { dataIndex, timestamp, value },\n        xAxis: this._xAxis,\n        yAxis: this._yAxis\n      })\n      this.onPressedMove({\n        id: this._id,\n        element: ShapeEventOperateElement.POINT,\n        points: this._points,\n        event\n      })\n    }\n  }\n\n  /**\n   * 按住非点拖动开始事件\n   * @param coordinate\n   */\n  startPressedOtherMove (coordinate) {\n    const dataIndex = this._xAxis.convertFromPixel(coordinate.x)\n    const value = this._yAxis.convertFromPixel(coordinate.y)\n    this._prevPressPoint = { dataIndex, value }\n    this._prevPoints = clone(this._points)\n  }\n\n  /**\n   * 按住非点拖动时事件\n   * @param coordinate\n   */\n  mousePressedOtherMove (coordinate, event) {\n    if (!this._lock && this._prevPressPoint) {\n      const dataIndex = this._xAxis.convertFromPixel(coordinate.x)\n      const value = this._yAxis.convertFromPixel(coordinate.y)\n      const difDataIndex = dataIndex - this._prevPressPoint.dataIndex\n      const difValue = value - this._prevPressPoint.value\n      this._points = this._prevPoints.map(point => {\n        // 防止因为创建时传入进来的point没有dataIndex，导致无法计算时间戳问题\n        if (!isValid(point.dataIndex)) {\n          point.dataIndex = this._chartStore.timeScaleStore().timestampToDataIndex(point.timestamp)\n        }\n        const dataIndex = point.dataIndex + difDataIndex\n        const value = point.value + difValue\n        return {\n          dataIndex,\n          value,\n          timestamp: this._chartStore.timeScaleStore().dataIndexToTimestamp(dataIndex)\n        }\n      })\n      this.onPressedMove({\n        id: this._id,\n        element: ShapeEventOperateElement.OTHER,\n        points: this._points,\n        event\n      })\n    }\n  }\n\n  // -------------------- 事件开始 -------------------\n\n  /**\n   * 开始绘制事件回调\n   * @param id\n   */\n  onDrawStart ({ id }) {}\n\n  /**\n   * 绘制过程中事件回调\n   * @param id\n   * @param step\n   * @param points\n   */\n  onDrawing ({ id, step, points }) {}\n\n  /**\n   * 绘制结束事件回调\n   * @param id\n   * @param points\n   */\n  onDrawEnd ({ id, points }) {}\n\n  /**\n   * 按住移动事件\n   * @param id\n   * @param points\n   * @param event\n   */\n  onPressedMove ({ id, points, event }) {}\n\n  /**\n   * 移除事件回调\n   * @param id\n   */\n  onRemove ({ id }) {}\n\n  // -------------------- 事件结束 -------------------\n\n  // --------------------- 自定义时需要实现的一些方法开始 ----------------------\n\n  /**\n   * 检查事件坐标是否在图形上\n   * @param key\n   * @param type\n   * @param points\n   * @param mousePoint\n   */\n  checkEventCoordinateOnShape ({ key, type, dataSource, eventCoordinate }) {}\n\n  /**\n   * 创建图形配置\n   * @param step\n   * @param points\n   * @param coordinates\n   * @param viewport\n   * @param precision\n   * @param xAxis\n   * @param yAxis\n   */\n  createShapeDataSource ({ step, mode, points, coordinates, viewport, precision, styles, xAxis, yAxis, data }) {}\n\n  /**\n   * 处理绘制过程中鼠标移动\n   * @param step\n   * @param mode\n   * @param points\n   * @param point\n   * @param xAxis\n   * @param yAxis\n   */\n  performEventMoveForDrawing ({ step, mode, points, movePoint, xAxis, yAxis }) {}\n\n  /**\n   * 处理鼠标按住移动\n   * @param mode\n   * @param points\n   * @param pressPointIndex\n   * @param point\n   * @param xAxis\n   * @param yAxis\n   */\n  performEventPressedMove ({ mode, points, pressPointIndex, pressPoint, xAxis, yAxis }) {}\n\n  // --------------------- 自定义时需要实现的一些方法结束 ----------------------\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 刷新层级\n * @type {{OVERLAY: number, MAIN: number, NONE: number, FULL: number}}\n */\nconst InvalidateLevel = {\n  NONE: 0,\n  OVERLAY: 1,\n  MAIN: 2,\n  FULL: 3\n}\n\nexport default InvalidateLevel\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport extension from './extension'\n\nimport { isNumber, isFunction, isValid } from '../utils/typeChecks'\nimport { logWarn } from '../utils/logger'\n\nimport Shape, { ShapeEventOperateElement } from '../component/overlay/Shape'\n\nimport InvalidateLevel from '../enum/InvalidateLevel'\n\nexport default class ShapeStore {\n  constructor (chartStore) {\n    this._chartStore = chartStore\n    // 图形标记映射\n    this._templates = this._createTemplates()\n    // 图形标记鼠标操作信息\n    this._eventOperate = {\n      click: {\n        id: '',\n        element: ShapeEventOperateElement.NONE,\n        elementIndex: -1\n      },\n      hover: {\n        id: '',\n        element: ShapeEventOperateElement.NONE,\n        elementIndex: -1\n      }\n    }\n    // 进行中的实例\n    this._progressInstance = null\n    // 事件按住的示例\n    this._pressedInstance = null\n    // 图形实例\n    this._instances = new Map()\n  }\n\n  /**\n   * 创建模板\n   * @returns\n   */\n  _createTemplates () {\n    const templates = {}\n    const extensions = extension.shapeExtensions\n    for (const name in extensions) {\n      const TemplateClass = this._createTemplateClass(extensions[name])\n      if (TemplateClass) {\n        templates[name] = TemplateClass\n      }\n    }\n    return templates\n  }\n\n  /**\n   * 创建模板类\n   * @param name\n   * @param totalStep\n   * @param checkEventCoordinateOnShape\n   * @param createShapeDataSource\n   * @param performEventPressedMove\n   * @param performEventMoveForDrawing\n   * @param drawExtend\n   * @return\n   */\n  _createTemplateClass ({\n    name, totalStep,\n    checkEventCoordinateOnShape,\n    createShapeDataSource,\n    performEventPressedMove,\n    performEventMoveForDrawing,\n    drawExtend\n  }) {\n    if (\n      !name ||\n      !isNumber(totalStep) ||\n      !isFunction(checkEventCoordinateOnShape) ||\n      !isFunction(createShapeDataSource)\n    ) {\n      logWarn('', '', 'Required attribute \"name\" and \"totalStep\", method \"checkEventCoordinateOnShape\" and \"createShapeDataSource\", new shape cannot be generated!!!')\n      return null\n    }\n    class Template extends Shape {\n      constructor ({\n        id, chartStore, xAxis, yAxis, points, styles, lock, mode, data\n      }) {\n        super({\n          id, name, totalStep, chartStore, xAxis, yAxis, points, styles, lock, mode, data\n        })\n      }\n    }\n    Template.prototype.checkEventCoordinateOnShape = checkEventCoordinateOnShape\n    Template.prototype.createShapeDataSource = createShapeDataSource\n    if (isFunction(performEventPressedMove)) {\n      Template.prototype.performEventPressedMove = performEventPressedMove\n    }\n    if (isFunction(performEventMoveForDrawing)) {\n      Template.prototype.performEventMoveForDrawing = performEventMoveForDrawing\n    }\n    if (isFunction(drawExtend)) {\n      Template.prototype.drawExtend = drawExtend\n    }\n    return Template\n  }\n\n  /**\n   * 添加自定义标记图形\n   * @param templates\n   */\n  addTemplate (templates) {\n    templates.forEach(tmp => {\n      const Template = this._createTemplateClass(tmp)\n      if (Template) {\n        this._templates[tmp.name] = Template\n      }\n    })\n  }\n\n  /**\n   * 获取图形标记模板类\n   * @param name\n   * @return {*}\n   */\n  getTemplate (name) {\n    return this._templates[name]\n  }\n\n  /**\n   * 获取实例\n   * @param shapeId\n   * @returns\n   */\n  getInstance (shapeId) {\n    for (const entry of this._instances) {\n      const shape = (entry[1] || []).find(s => s.id() === shapeId)\n      if (shape) {\n        return shape\n      }\n    }\n    return null\n  }\n\n  /**\n   * 是否有实例\n   * @param shapeId\n   * @returns\n   */\n  hasInstance (shapeId) {\n    return !!this.getInstance(shapeId)\n  }\n\n  /**\n   * 添加标记实例\n   * @param instance\n   * @param paneId\n   */\n  addInstance (instance, paneId) {\n    if (instance.isDrawing()) {\n      this._progressInstance = { paneId, instance, fixed: isValid(paneId) }\n    } else {\n      if (!this._instances.has(paneId)) {\n        this._instances.set(paneId, [])\n      }\n      this._instances.get(paneId).push(instance)\n    }\n    this._chartStore.invalidate(InvalidateLevel.OVERLAY)\n  }\n\n  /**\n   * 获取进行中的实例\n   * @returns\n   */\n  progressInstance () {\n    return this._progressInstance || {}\n  }\n\n  /**\n   * 进行中的实例完成\n   */\n  progressInstanceComplete () {\n    const { instance, paneId } = this.progressInstance()\n    if (instance && !instance.isDrawing()) {\n      if (!this._instances.has(paneId)) {\n        this._instances.set(paneId, [])\n      }\n      this._instances.get(paneId).push(instance)\n      this._progressInstance = null\n    }\n  }\n\n  /**\n   * 更新进行中的实例\n   * @param yAxis\n   * @param paneId\n   */\n  updateProgressInstance (yAxis, paneId) {\n    const { instance, fixed } = this.progressInstance()\n    if (instance && !fixed) {\n      instance.setYAxis(yAxis)\n      this._progressInstance.paneId = paneId\n    }\n  }\n\n  /**\n   * 获取按住的实例\n   * @returns\n   */\n  pressedInstance () {\n    return this._pressedInstance || {}\n  }\n\n  /**\n   * 更新事件按住的实例\n   * @param instance\n   * @param paneId\n   * @param element\n   */\n  updatePressedInstance (instance, paneId, element) {\n    if (instance) {\n      this._pressedInstance = { instance, paneId, element }\n    } else {\n      this._pressedInstance = null\n    }\n  }\n\n  /**\n   * 获取图形标记的数据\n   * @param paneId\n   * @returns {{}}\n   */\n  instances (paneId) {\n    return this._instances.get(paneId) || []\n  }\n\n  /**\n   * 设置图形标记实例配置\n   * @param options\n   */\n  setInstanceOptions (options = {}) {\n    const { id, styles, lock, mode, data, points } = options\n    const defaultStyles = this._chartStore.styleOptions().shape\n    let shouldInvalidate = false\n    const apply = instance => {\n      instance.setLock(lock)\n      instance.setMode(mode)\n      if (instance.setStyles(styles, defaultStyles) || instance.setData(data) || instance.setPoints(points)) {\n        shouldInvalidate = true\n      }\n    }\n    if (isValid(id)) {\n      const instance = this.getInstance(id)\n      instance && apply(instance)\n    } else {\n      this._instances.forEach(instance => instance.forEach(apply))\n    }\n    if (shouldInvalidate) {\n      this._chartStore.invalidate(InvalidateLevel.OVERLAY)\n    }\n  }\n\n  /**\n   * 获取图形标记信息\n   * @param id\n   * @return {{name, lock: *, styles, id, points: (*|*[])}[]|{name, lock: *, styles, id, points: (*|*[])}}\n   */\n  getInstanceInfo (shapeId) {\n    const create = (instance) => {\n      return {\n        name: instance.name(),\n        id: instance.id(),\n        totalStep: instance.totalStep(),\n        lock: instance.lock(),\n        mode: instance.mode(),\n        points: instance.points(),\n        styles: instance.styles(),\n        data: instance.data()\n      }\n    }\n    const progressInstance = this.progressInstance()\n    if (isValid(shapeId)) {\n      if (progressInstance.instance && progressInstance.instance.id() === shapeId) {\n        return create(progressInstance.instance)\n      }\n      const shape = this.getInstance(shapeId)\n      if (shape) {\n        return create(shape)\n      }\n    } else {\n      const infos = {}\n      this._instances.forEach((shapes, paneId) => {\n        infos[paneId] = shapes.map(shape => create(shape))\n        if (progressInstance.paneId === paneId && progressInstance.instance) {\n          infos[paneId].push(create(progressInstance.instance))\n        }\n      })\n      return infos\n    }\n    return null\n  }\n\n  /**\n   * 移除图形实例\n   * @param shapeId 参数\n   * @param isProgress\n   */\n  removeInstance (shapeId) {\n    let shouldInvalidate = false\n    const progressInstance = this.progressInstance().instance\n    if (progressInstance && (!isValid(shapeId) || progressInstance.id() === shapeId)) {\n      progressInstance.onRemove({ id: progressInstance.id() })\n      this._progressInstance = null\n      shouldInvalidate = true\n    }\n    if (isValid(shapeId)) {\n      for (const entry of this._instances) {\n        const shapes = entry[1] || []\n        const removeIndex = shapes.findIndex(shape => shape.id() === shapeId)\n        if (removeIndex > -1) {\n          shapes[removeIndex].onRemove({ id: shapes[removeIndex].id() })\n          shapes.splice(removeIndex, 1)\n          if (shapes.length === 0) {\n            this._instances.delete(entry[0])\n          }\n          shouldInvalidate = true\n          break\n        }\n      }\n    } else {\n      this._instances.forEach(shapes => {\n        if (shapes.length > 0) {\n          shapes.forEach(shape => {\n            shape.onRemove({ id: shape.id() })\n          })\n        }\n      })\n      this._instances.clear()\n      shouldInvalidate = true\n    }\n    if (shouldInvalidate) {\n      this._chartStore.invalidate(InvalidateLevel.OVERLAY)\n    }\n  }\n\n  /**\n   * 获取图形标记操作信息\n   * @return {{hover: {id: string, elementIndex: number, element: string}, click: {id: string, elementIndex: number, element: string}}}\n   */\n  eventOperate () {\n    return this._eventOperate\n  }\n\n  /**\n   * 设置事件操作信息\n   * @param operate\n   * @return\n   */\n  setEventOperate (operate) {\n    const { hover, click } = this._eventOperate\n    let hoverSuccess\n    if (operate.hover &&\n      (hover.id !== operate.hover.id || hover.element !== operate.hover.element || hover.elementIndex !== operate.hover.elementIndex)\n    ) {\n      this._eventOperate.hover = { ...operate.hover }\n      hoverSuccess = true\n    }\n    let clickSuccess\n    if (operate.click &&\n      (click.id !== operate.click.id || click.element !== operate.click.element || click.elementIndex !== operate.click.elementIndex)\n    ) {\n      this._eventOperate.click = { ...operate.click }\n      clickSuccess = true\n    }\n    return hoverSuccess || clickSuccess\n  }\n\n  /**\n   * 是否为空\n   * @returns\n   */\n  isEmpty () {\n    return this._instances.size === 0 && !this.progressInstance().instance\n  }\n\n  /**\n   * 是否正在绘制\n   * @return\n   */\n  isDrawing () {\n    const instance = this.progressInstance().instance\n    return instance && instance.isDrawing()\n  }\n\n  /**\n   * 是否按住\n   * @returns\n   */\n  isPressed () {\n    return !!this.pressedInstance().instance\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isValid } from '../utils/typeChecks'\n\nimport InvalidateLevel from '../enum/InvalidateLevel'\n\nexport default class AnnotationStore {\n  constructor (chartStore) {\n    this._chartStore = chartStore\n    // 注解标记\n    this._annotations = new Map()\n    // 注解标记\n    this._visibleAnnotations = new Map()\n    // 注解事件操作信息\n    this._eventOperate = { id: '' }\n  }\n\n  /**\n   * 获取注解事件操作信息\n   * @return {null}\n   */\n  eventOperate () {\n    return this._eventOperate\n  }\n\n  /**\n   * 设置事件操作信息\n   * @param operate\n   */\n  setEventOperate (operate) {\n    const { id } = this._eventOperate\n    if (operate && id !== operate.id) {\n      this._eventOperate = { ...operate }\n    }\n  }\n\n  /**\n   * 创建可见的注解数据\n   */\n  createVisibleAnnotations () {\n    this._visibleAnnotations.clear()\n    if (this._annotations.size > 0) {\n      this._chartStore.visibleDataList().forEach(({ data, x }) => {\n        this._annotations.forEach((annotations, paneId) => {\n          if (annotations.size > 0) {\n            const annotation = annotations.get(data.timestamp) || []\n            if (annotation.length > 0) {\n              for (const an of annotation) {\n                an.createSymbolCoordinate(x)\n                if (this._visibleAnnotations.has(paneId)) {\n                  this._visibleAnnotations.get(paneId).push(an)\n                } else {\n                  this._visibleAnnotations.set(paneId, [an])\n                }\n              }\n            }\n          }\n        })\n      })\n    }\n  }\n\n  /**\n   * 创建注解\n   * @param annotations\n   * @param paneId\n   */\n  add (annotations, paneId) {\n    if (!this._annotations.has(paneId)) {\n      this._annotations.set(paneId, new Map())\n    }\n    annotations.forEach(annotation => {\n      const timestampAnnotations = this._annotations.get(paneId)\n      const timestamp = annotation.points().timestamp\n      if (timestampAnnotations.has(timestamp)) {\n        timestampAnnotations.get(timestamp).push(annotation)\n      } else {\n        timestampAnnotations.set(timestamp, [annotation])\n      }\n    })\n    this.createVisibleAnnotations()\n    this._chartStore.invalidate(InvalidateLevel.OVERLAY)\n  }\n\n  /**\n   * 获取注解\n   * @param paneId\n   * @returns\n   */\n  get (paneId) {\n    return this._visibleAnnotations.get(paneId)\n  }\n\n  /**\n   * 移除注解\n   * @param paneId\n   * @param point\n   */\n  remove (paneId, point) {\n    let shouldAdjust = false\n    if (isValid(paneId)) {\n      if (this._annotations.has(paneId)) {\n        if (isValid(point)) {\n          const paneAnnotations = this._annotations.get(paneId)\n          const points = [].concat(point)\n          points.forEach(({ timestamp }) => {\n            if (paneAnnotations.has(timestamp)) {\n              shouldAdjust = true\n              paneAnnotations.delete(timestamp)\n            }\n          })\n          if (paneAnnotations.size === 0) {\n            this._annotations.delete(paneId)\n          }\n          if (shouldAdjust) {\n            this.createVisibleAnnotations()\n          }\n        } else {\n          shouldAdjust = true\n          this._annotations.delete(paneId)\n          this._visibleAnnotations.delete(paneId)\n        }\n      }\n    } else {\n      shouldAdjust = true\n      this._annotations.clear()\n      this._visibleAnnotations.clear()\n    }\n    if (shouldAdjust) {\n      this._chartStore.invalidate(InvalidateLevel.OVERLAY)\n    }\n  }\n\n  /**\n   * 是否为空\n   * @returns\n   */\n  isEmpty () {\n    return this._visibleAnnotations.size === 0\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isValid } from '../utils/typeChecks'\n\nimport InvalidateLevel from '../enum/InvalidateLevel'\n\nexport default class TagStore {\n  constructor (chartStore) {\n    // 刷新回调\n    this._chartStore = chartStore\n    // 标签\n    this._tags = new Map()\n  }\n\n  /**\n   * 根据id获取tag实例\n   * @param id\n   * @param paneId\n   * @returns\n   */\n  _getById (id, paneId) {\n    const tags = this.get(paneId)\n    if (tags) {\n      return tags.get(id)\n    }\n    return null\n  }\n\n  /**\n   * 是否包含某一个标签\n   * @param id\n   * @param paneId\n   * @returns\n   */\n  has (id, paneId) {\n    return !!this._getById(id, paneId)\n  }\n\n  /**\n   * 更新tag\n   * @param id\n   * @param paneId\n   * @param options\n   */\n  update (id, paneId, options) {\n    const tag = this._getById(id, paneId)\n    if (tag) {\n      return tag.update(options)\n    }\n    return false\n  }\n\n  /**\n  * 根据id获取标签实例\n  * @param tagId\n  * @param paneId\n  * @return\n  */\n  get (paneId) {\n    return this._tags.get(paneId)\n  }\n\n  /**\n  * 添加标签\n  * @param tags\n  * @param paneId\n  */\n  add (tags, paneId) {\n    if (!this._tags.has(paneId)) {\n      this._tags.set(paneId, new Map())\n    }\n    const idTags = this._tags.get(paneId)\n    tags.forEach(tag => {\n      idTags.set(tag.id(), tag)\n    })\n    this._chartStore.invalidate(InvalidateLevel.OVERLAY)\n  }\n\n  /**\n  * 移除标签\n  * @param paneId\n  * @param tagId\n  */\n  remove (paneId, tagId) {\n    let shouldInvalidate = false\n    if (isValid(paneId)) {\n      if (this._tags.has(paneId)) {\n        if (isValid(tagId)) {\n          const paneTags = this._tags.get(paneId)\n          const ids = [].concat(tagId)\n          ids.forEach(id => {\n            if (paneTags.has(id)) {\n              shouldInvalidate = true\n              paneTags.delete(id)\n            }\n          })\n          if (paneTags.size === 0) {\n            this._tags.delete(paneId)\n          }\n        } else {\n          shouldInvalidate = true\n          this._tags.delete(paneId)\n        }\n      }\n    } else {\n      shouldInvalidate = true\n      this._tags.clear()\n    }\n    if (shouldInvalidate) {\n      this._chartStore.invalidate(InvalidateLevel.OVERLAY)\n    }\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isValid } from '../utils/typeChecks'\n\nimport InvalidateLevel from '../enum/InvalidateLevel'\n\nexport default class CrosshairStore {\n  constructor (chartStore) {\n    this._chartStore = chartStore\n    // 十字光标信息\n    this._crosshair = {}\n  }\n\n  /**\n     * 设置十字光标点信息\n     * @param crosshair\n     * @param notInvalidate\n     */\n  set (crosshair, notInvalidate) {\n    const dataList = this._chartStore.dataList()\n    const cr = crosshair || {}\n    let realDataIndex\n    let dataIndex\n    if (isValid(cr.x)) {\n      realDataIndex = this._chartStore.timeScaleStore().coordinateToDataIndex(cr.x)\n      if (realDataIndex < 0) {\n        dataIndex = 0\n      } else if (realDataIndex > dataList.length - 1) {\n        dataIndex = dataList.length - 1\n      } else {\n        dataIndex = realDataIndex\n      }\n    } else {\n      realDataIndex = dataList.length - 1\n      dataIndex = realDataIndex\n    }\n    const kLineData = dataList[dataIndex]\n    const realX = this._chartStore.timeScaleStore().dataIndexToCoordinate(realDataIndex)\n    const prevCrosshair = { x: this._crosshair.x, y: this._crosshair.y, paneId: this._crosshair.paneId }\n    this._crosshair = { ...cr, realX, kLineData, realDataIndex, dataIndex }\n    if (kLineData) {\n      this._chartStore.crosshairChange(this._crosshair)\n    }\n    if (\n      (prevCrosshair.x !== cr.x || prevCrosshair.y !== cr.y || prevCrosshair.paneId !== cr.paneId) && !notInvalidate\n    ) {\n      this._chartStore.invalidate(InvalidateLevel.OVERLAY)\n    }\n  }\n\n  /**\n   * 重新计算十字光标\n   * @param notInvalidate\n   */\n  recalculate (notInvalidate) {\n    this.set(this._crosshair, notInvalidate)\n  }\n\n  /**\n   * 获取crosshair信息\n   * @returns\n   */\n  get () {\n    return this._crosshair\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { hasAction } from '../enum/ActionType'\n\nclass Delegate {\n  constructor () {\n    this._observers = []\n  }\n\n  subscribe (observer) {\n    if (this._observers.indexOf(observer) < 0) {\n      this._observers.push(observer)\n    }\n  }\n\n  unsubscribe (observer) {\n    const index = this._observers.indexOf(observer)\n    if (index > -1) {\n      this._observers.splice(index, 1)\n    } else {\n      this._observers = []\n    }\n  }\n\n  execute (data) {\n    this._observers.forEach(observer => {\n      observer(data)\n    })\n  }\n\n  hasObservers () {\n    return this._observers.length > 0\n  }\n}\n\nexport default class ActionStore {\n  constructor () {\n    // 事件代理\n    this._delegates = new Map()\n  }\n\n  /**\n   * 事件执行\n   * @param type\n   * @param data\n   */\n  execute (type, data) {\n    if (this.has(type)) {\n      this._delegates.get(type).execute(data)\n    }\n  }\n\n  /**\n   * 是否有事件监听\n   * @param type\n   * @return {boolean}\n   */\n  has (type) {\n    return this._delegates.has(type) && this._delegates.get(type).hasObservers()\n  }\n\n  /**\n   * 订阅事件\n   * @param type\n   * @param callback\n   * @return {boolean}\n   */\n  subscribe (type, callback) {\n    if (!this._delegates.has(type)) {\n      this._delegates.set(type, new Delegate())\n    }\n    this._delegates.get(type).subscribe(callback)\n  }\n\n  /**\n   * 取消事件订阅\n   * @param type\n   * @param callback\n   * @return {boolean}\n   */\n  unsubscribe (type, callback) {\n    if (hasAction(type)) {\n      const delegate = this._delegates.get(type)\n      if (delegate) {\n        delegate.unsubscribe(callback)\n        if (!delegate.hasObservers()) {\n          this._delegates.delete(type)\n        }\n      }\n    }\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isArray, isObject, isBoolean, merge, clone } from '../utils/typeChecks'\nimport { defaultStyleOptions } from '../options/styleOptions'\n\nimport TimeScaleStore from './TimeScaleStore'\nimport TechnicalIndicatorStore from './TechnicalIndicatorStore'\nimport ShapeStore from './ShapeStore'\nimport AnnotationStore from './AnnotationStore'\nimport TagStore from './TagStore'\nimport CrosshairStore from './CrosshairStore'\nimport ActionStore from './ActionStore'\n\nexport default class ChartStore {\n  constructor (styleOptions, handler) {\n    // 持有者\n    this._handler = handler\n    // 样式配置\n    this._styleOptions = clone(defaultStyleOptions)\n    merge(this._styleOptions, styleOptions)\n\n    // 价格精度\n    this._pricePrecision = 2\n    // 数量精度\n    this._volumePrecision = 0\n\n    // 数据源\n    this._dataList = []\n    // 可见的数据(需要绘制的数据)\n    this._visibleDataList = []\n\n    // 调整pane标记\n    this._dragPaneFlag = false\n\n    // 时间轴缩放数据存储\n    this._timeScaleStore = new TimeScaleStore(this)\n    // 技术指标数据存储\n    this._technicalIndicatorStore = new TechnicalIndicatorStore(this)\n    // 图形数据存储\n    this._shapeStore = new ShapeStore(this)\n    // 注解数据存储\n    this._annotationStore = new AnnotationStore(this)\n    // 标签数据存储\n    this._tagStore = new TagStore(this)\n    // 十字光标数据存储\n    this._crosshairStore = new CrosshairStore(this)\n    // 事件存储\n    this._actionStore = new ActionStore()\n  }\n\n  /**\n   * 调整可见数据\n   */\n  adjustVisibleDataList () {\n    // 处理需要绘制的数据\n    this._visibleDataList = []\n    const from = this._timeScaleStore.from()\n    const to = this._timeScaleStore.to()\n    for (let i = from; i < to; i++) {\n      const kLineData = this._dataList[i]\n      const x = this._timeScaleStore.dataIndexToCoordinate(i)\n      this._visibleDataList.push({\n        index: i,\n        x,\n        data: kLineData\n      })\n    }\n    this._annotationStore.createVisibleAnnotations()\n  }\n\n  /**\n   * 获取样式配置\n   * @return {{}}\n   */\n  styleOptions () {\n    return this._styleOptions\n  }\n\n  /**\n   * 设置样式配置\n   * @param options\n   */\n  applyStyleOptions (options) {\n    merge(this._styleOptions, options)\n  }\n\n  /**\n   * 价格精度\n   * @returns {number}\n   */\n  pricePrecision () {\n    return this._pricePrecision\n  }\n\n  /**\n   * 数量精度\n   * @returns {number}\n   */\n  volumePrecision () {\n    return this._volumePrecision\n  }\n\n  /**\n   * 设置价格和数量精度\n   * @param pricePrecision\n   * @param volumePrecision\n   */\n  setPriceVolumePrecision (pricePrecision, volumePrecision) {\n    this._pricePrecision = pricePrecision\n    this._volumePrecision = volumePrecision\n    this._technicalIndicatorStore.setSeriesPrecision(pricePrecision, volumePrecision)\n  }\n\n  /**\n   * 获取数据源\n   * @returns {[]|*[]}\n   */\n  dataList () {\n    return this._dataList\n  }\n\n  /**\n   * 获取可见数据源\n   * @returns {[]|*[]}\n   */\n  visibleDataList () {\n    return this._visibleDataList\n  }\n\n  /**\n   * 添加数据\n   * @param data\n   * @param pos\n   * @param more\n   */\n  addData (data, pos, more) {\n    if (isObject(data)) {\n      if (isArray(data)) {\n        this._timeScaleStore.setLoading(false)\n        this._timeScaleStore.setMore(isBoolean(more) ? more : true)\n        const isFirstAdd = this._dataList.length === 0\n        this._dataList = data.concat(this._dataList)\n        if (isFirstAdd) {\n          this._timeScaleStore.resetOffsetRightSpace()\n        }\n        this._timeScaleStore.adjustFromTo()\n      } else {\n        const dataSize = this._dataList.length\n        if (pos >= dataSize) {\n          this._dataList.push(data)\n          let offsetRightBarCount = this._timeScaleStore.offsetRightBarCount()\n          if (offsetRightBarCount < 0) {\n            this._timeScaleStore.setOffsetRightBarCount(--offsetRightBarCount)\n          }\n          this._timeScaleStore.adjustFromTo()\n        } else {\n          this._dataList[pos] = data\n          this.adjustVisibleDataList()\n        }\n      }\n      this._crosshairStore.recalculate(true)\n    }\n  }\n\n  /**\n   * 清空数据源\n   */\n  clearDataList () {\n    this._dataList = []\n    this._visibleDataList = []\n    this._timeScaleStore.clear()\n  }\n\n  /**\n   * 获取时间缩放存储\n   * @returns\n   */\n  timeScaleStore () {\n    return this._timeScaleStore\n  }\n\n  /**\n   * 获取技术指标存储\n   * @returns\n   */\n  technicalIndicatorStore () {\n    return this._technicalIndicatorStore\n  }\n\n  /**\n   * 获取图形存储\n   * @returns\n   */\n  shapeStore () {\n    return this._shapeStore\n  }\n\n  /**\n   * 获取注解存储\n   * @returns\n   */\n  annotationStore () {\n    return this._annotationStore\n  }\n\n  /**\n   * 获取标签数据存储\n   * @returns\n   */\n  tagStore () {\n    return this._tagStore\n  }\n\n  /**\n   * 获取十字光标数据存储\n   * @returns\n   */\n  crosshairStore () {\n    return this._crosshairStore\n  }\n\n  /**\n   * 获取事件数据存储\n   * @returns\n   */\n  actionStore () {\n    return this._actionStore\n  }\n\n  /**\n   * 刷新\n   * @param invalidateLevel\n   */\n  invalidate (invalidateLevel) {\n    this._handler.invalidate(invalidateLevel)\n  }\n\n  /**\n   * 十字光标变化\n   * @param data\n   */\n  crosshairChange (data) {\n    this._handler.crosshair(data)\n  }\n\n  /**\n   * 获取拖拽Pane标记\n   * @return {boolean}\n   */\n  dragPaneFlag () {\n    return this._dragPaneFlag\n  }\n\n  /**\n   * 设置拖拽Pane标记\n   * @param flag\n   */\n  setDragPaneFlag (flag) {\n    this._dragPaneFlag = flag\n  }\n}\n","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import superPropBase from \"./superPropBase.js\";\nexport default function _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get.apply(this, arguments);\n}","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 创建一个元素\n * @param name\n * @param styles\n * @return {*}\n */\nexport function createElement (name, styles = {}) {\n  const element = document.createElement(name)\n  for (const key in styles) {\n    if (Object.prototype.hasOwnProperty.call(styles, key)) {\n      (element.style)[key] = styles[key]\n    }\n  }\n  return element\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 容器位置\n */\nconst ContainerPosition = {\n  ROOT: 'root',\n  CONTENT: 'content',\n  YAXIS: 'yAxis'\n}\n\nexport default ContainerPosition\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getPixelRatio } from '../utils/canvas'\nimport { createElement } from '../utils/element'\n\nimport ContainerPosition from '../enum/ContainerPosition'\n\nexport default class Pane {\n  constructor (props) {\n    this._height = -1\n    this._container = props.container\n    this._chartStore = props.chartStore\n    this._initBefore(props)\n    this._initElement()\n    this._mainWidget = this._createMainWidget(this._element, props)\n    this._yAxisWidget = this._createYAxisWidget(this._element, props)\n  }\n\n  _initBefore (props) {}\n\n  _initElement () {\n    this._element = createElement('div', {\n      width: '100%',\n      margin: '0',\n      padding: '0',\n      position: 'relative',\n      overflow: 'hidden',\n      boxSizing: 'border-box'\n    })\n    const lastElement = this._container.lastChild\n    if (lastElement) {\n      this._container.insertBefore(this._element, lastElement)\n    } else {\n      this._container.appendChild(this._element)\n    }\n  }\n\n  /**\n   * 创建主组件\n   * @param container\n   * @param props\n   * @private\n   */\n  _createMainWidget (container, props) {}\n\n  /**\n   * 创建y轴组件\n   * @param container\n   * @param props\n   * @private\n   */\n  _createYAxisWidget (container, props) {}\n\n  /**\n   * 获取容器\n   * @param position\n   * @returns\n   */\n  container (position) {\n    switch (position) {\n      case ContainerPosition.CONTENT: {\n        return this._mainWidget.container()\n      }\n      case ContainerPosition.YAXIS: {\n        return this._yAxisWidget.container()\n      }\n      default: return this._element\n    }\n  }\n\n  /**\n   * 获取宽度\n   * @returns {number}\n   */\n  width () {\n    return this._element.offsetWidth\n  }\n\n  setWidth (mainWidgetWidth, yAxisWidgetWidth) {\n    this._mainWidget.setWidth(mainWidgetWidth)\n    this._yAxisWidget && this._yAxisWidget.setWidth(yAxisWidgetWidth)\n  }\n\n  /**\n   * 获取高度\n   */\n  height () {\n    return this._height\n  }\n\n  /**\n   * 设置临时高度\n   * @param height\n   */\n  setHeight (height) {\n    this._height = height\n    this._mainWidget.setHeight(height)\n    this._yAxisWidget && this._yAxisWidget.setHeight(height)\n  }\n\n  setOffsetLeft (mainWidgetOffsetLeft, yAxisWidgetOffsetLeft) {\n    this._mainWidget.setOffsetLeft(mainWidgetOffsetLeft)\n    this._yAxisWidget && this._yAxisWidget.setOffsetLeft(yAxisWidgetOffsetLeft)\n  }\n\n  layout () {\n    if (this._element.offsetHeight !== this._height) {\n      this._element.style.height = `${this._height}px`\n    }\n    this._mainWidget.layout()\n    this._yAxisWidget && this._yAxisWidget.layout()\n  }\n\n  /**\n   * 刷新\n   * @param level\n   */\n  invalidate (level) {\n    this._yAxisWidget && this._yAxisWidget.invalidate(level)\n    this._mainWidget.invalidate(level)\n  }\n\n  /**\n   * 创建html元素\n   */\n  createHtml ({ id, content, style, position }) {\n    let htmlId\n    if (position === ContainerPosition.YAXIS) {\n      htmlId = this._yAxisWidget && this._yAxisWidget.createHtml({ id, content, style })\n    } else {\n      htmlId = this._mainWidget.createHtml({ id, content, style })\n    }\n    return htmlId\n  }\n\n  /**\n   * 移除html元素\n   * @param id\n   */\n  removeHtml (id) {\n    this._yAxisWidget && this._yAxisWidget.removeHtml(id)\n    this._mainWidget.removeHtml(id)\n  }\n\n  /**\n   * 将canvas转换成图片\n   * @param includeOverlay\n   * @return {HTMLCanvasElement}\n   */\n  getImage (includeOverlay) {\n    const width = this._element.offsetWidth\n    const height = this._element.offsetHeight\n    const canvas = createElement('canvas', {\n      width: `${width}px`,\n      height: `${height}px`,\n      boxSizing: 'border-box'\n    })\n    const ctx = canvas.getContext('2d')\n    const pixelRatio = getPixelRatio(canvas)\n    canvas.width = width * pixelRatio\n    canvas.height = height * pixelRatio\n    ctx.scale(pixelRatio, pixelRatio)\n\n    const mainWidgetElement = this._mainWidget.getElement()\n    const mainWidgetWidth = mainWidgetElement.offsetWidth\n    const mainWidgetHeight = mainWidgetElement.offsetHeight\n    const mainWidgetOffsetLeft = parseInt(mainWidgetElement.style.left, 10)\n\n    ctx.drawImage(\n      this._mainWidget.getImage(includeOverlay),\n      mainWidgetOffsetLeft, 0,\n      mainWidgetWidth, mainWidgetHeight\n    )\n    if (this._yAxisWidget) {\n      const yAxisWidgetElement = this._yAxisWidget.getElement()\n      const yAxisWidgetWidth = yAxisWidgetElement.offsetWidth\n      const yAxisWidgetHeight = yAxisWidgetElement.offsetHeight\n      const yAxisWidgetOffsetLeft = parseInt(yAxisWidgetElement.style.left, 10)\n      ctx.drawImage(\n        this._yAxisWidget.getImage(includeOverlay),\n        yAxisWidgetOffsetLeft, 0,\n        yAxisWidgetWidth, yAxisWidgetHeight\n      )\n    }\n    return canvas\n  }\n\n  /**\n   * 销毁\n   */\n  destroy () {\n    this._container.removeChild(this._element)\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport InvalidateLevel from '../enum/InvalidateLevel'\nimport { getPixelRatio } from '../utils/canvas'\nimport { createElement } from '../utils/element'\nimport { isString } from '../utils/typeChecks'\n\nexport default class Widget {\n  constructor (props) {\n    this._width = 0\n    this._height = 0\n    this._initElement(props.container)\n    this._mainView = this._createMainView(this._element, props)\n    this._overlayView = this._createOverlayView(this._element, props)\n    this._htmlBaseId = 0\n    this._htmls = new Map()\n  }\n\n  /**\n   * 初始化element\n   * @param container\n   * @private\n   */\n  _initElement (container) {\n    this._element = createElement('div', {\n      margin: '0',\n      padding: '0',\n      position: 'absolute',\n      top: '0',\n      overflow: 'hidden',\n      boxSizing: 'border-box'\n    })\n    container.appendChild(this._element)\n  }\n\n  /**\n   * 创建主view\n   * @param container\n   * @param props\n   * @private\n   */\n  _createMainView (container, props) {}\n\n  /**\n   * 创建浮层view\n   * @param container\n   * @param props\n   * @private\n   */\n  _createOverlayView (container, props) {}\n\n  /**\n   * 获取容器\n   * @returns\n   */\n  container () {\n    return this._element\n  }\n\n  /**\n   * 创建html元素\n   * @param id 标识\n   * @param content 内容\n   * @param style 样式\n   */\n  createHtml ({ id, content, style = {} }) {\n    const html = createElement('div', { boxSizing: 'border-box', position: 'absolute', zIndex: 12, ...style })\n    if (isString(content)) {\n      const str = content.replace(/(^\\s*)|(\\s*$)/g, '')\n      html.innerHTML = str\n    } else {\n      html.appendChild(content)\n    }\n    const htmlId = id || `html_${++this._htmlBaseId}`\n    if (this._htmls.has(htmlId)) {\n      this._element.replaceChild(html, this._htmls.get(htmlId))\n    } else {\n      this._element.appendChild(html)\n    }\n    this._htmls.set(htmlId, html)\n    return htmlId\n  }\n\n  /**\n   * 移除html元素\n   * @param id\n   */\n  removeHtml (id) {\n    if (id) {\n      const ids = [].concat(id)\n      ids.forEach(htmlId => {\n        const html = this._htmls.get(htmlId)\n        if (html) {\n          this._element.removeChild(html)\n          this._htmls.delete(htmlId)\n        }\n      })\n    } else {\n      this._htmls.forEach(html => {\n        this._element.removeChild(html)\n      })\n      this._htmls.clear()\n    }\n  }\n\n  getElement () {\n    return this._element\n  }\n\n  setWidth (width) {\n    this._width = width\n    this._mainView.setWidth(width)\n    this._overlayView.setWidth(width)\n  }\n\n  setHeight (height) {\n    this._height = height\n    this._mainView.setHeight(height)\n    this._overlayView.setHeight(height)\n  }\n\n  setOffsetLeft (offsetLeft) {\n    this._element.style.left = `${offsetLeft}px`\n  }\n\n  layout () {\n    if (this._element.offsetWidth !== this._width) {\n      this._element.style.width = `${this._width}px`\n    }\n    if (this._element.offsetHeight !== this._height) {\n      this._element.style.height = `${this._height}px`\n    }\n    this._mainView.layout()\n    this._overlayView.layout()\n  }\n\n  /**\n   * 更新\n   * @param level\n   */\n  invalidate (level) {\n    switch (level) {\n      case InvalidateLevel.OVERLAY: {\n        this._overlayView.flush()\n        break\n      }\n      case InvalidateLevel.MAIN:\n      case InvalidateLevel.FULL: {\n        this._mainView.flush()\n        this._overlayView.flush()\n        break\n      }\n      default: {\n        break\n      }\n    }\n  }\n\n  /**\n   * 将widget转换成图片\n   * @param includeOverlay\n   * @returns {HTMLCanvasElement}\n   */\n  getImage (includeOverlay) {\n    const canvas = createElement('canvas', {\n      width: `${this._width}px`,\n      height: `${this._height}px`,\n      boxSizing: 'border-box'\n    })\n    const ctx = canvas.getContext('2d')\n    const pixelRatio = getPixelRatio(canvas)\n    canvas.width = this._width * pixelRatio\n    canvas.height = this._height * pixelRatio\n    ctx.scale(pixelRatio, pixelRatio)\n\n    ctx.drawImage(this._mainView.getImage(), 0, 0, this._width, this._height)\n\n    if (includeOverlay && this._overlayView) {\n      ctx.drawImage(this._overlayView.getImage(), 0, 0, this._width, this._height)\n    }\n    return canvas\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * requestAnimationFrame兼容\n * @param fn\n */\nexport function requestAnimationFrame (fn) {\n  if (!window.requestAnimationFrame) {\n    return window.setTimeout(fn, 20)\n  }\n  return window.requestAnimationFrame(fn)\n}\n\n/**\n * cancelAnimationFrame兼容\n * @param id\n */\nexport function cancelAnimationFrame (id) {\n  if (!window.cancelAnimationFrame) {\n    clearTimeout(id)\n  }\n  window.cancelAnimationFrame(id)\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getPixelRatio } from '../utils/canvas'\nimport { createElement } from '../utils/element'\nimport { cancelAnimationFrame, requestAnimationFrame } from '../utils/compatible'\n\nclass View {\n  constructor (container, chartStore) {\n    this._chartStore = chartStore\n    this._initCanvas(container)\n  }\n\n  /**\n   * 初始化画布\n   * @param container\n   * @private\n   */\n  _initCanvas (container) {\n    this._canvas = createElement('canvas', {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      zIndex: '2',\n      boxSizing: 'border-box'\n    })\n    this._ctx = this._canvas.getContext('2d')\n    container.appendChild(this._canvas)\n  }\n\n  /**\n   * 重新绘制\n   * @param extendFun\n   * @private\n   */\n  _redraw (extendFun) {\n    this._ctx.clearRect(0, 0, this._canvas.offsetWidth, this._canvas.offsetHeight)\n    extendFun && extendFun()\n    this._draw()\n  }\n\n  /**\n   * 绘制\n   */\n  _draw () {\n  }\n\n  setWidth (width) {\n    this._width = width\n  }\n\n  setHeight (height) {\n    this._height = height\n  }\n\n  layout () {\n    if (this._height !== this._canvas.offsetHeight || this._width !== this._canvas.offsetWidth) {\n      this._redraw(() => {\n        const pixelRatio = getPixelRatio(this._canvas)\n        this._canvas.style.width = `${this._width}px`\n        this._canvas.style.height = `${this._height}px`\n        this._canvas.width = Math.floor(this._width * pixelRatio)\n        this._canvas.height = Math.floor(this._height * pixelRatio)\n        this._ctx.scale(pixelRatio, pixelRatio)\n      })\n    } else {\n      this.flush()\n    }\n  }\n\n  /**\n   * 刷新\n   */\n  flush () {\n    if (this.requestAnimationId) {\n      cancelAnimationFrame(this.requestAnimationId)\n      this.requestAnimationId = null\n    }\n    this.requestAnimationId = requestAnimationFrame(() => {\n      this._redraw()\n    })\n  }\n\n  /**\n   * 获取图片\n   * @returns {HTMLCanvasElement}\n   */\n  getImage () {\n    return this._canvas\n  }\n}\n\nexport default View\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport View from './View'\n\nimport { CandleType, LineStyle } from '../options/styleOptions'\nimport { TechnicalIndicatorPlotType, getTechnicalIndicatorPlotStyle } from '../component/technicalindicator/TechnicalIndicator'\nimport { renderHorizontalLine, renderVerticalLine, renderLine } from '../renderer/line'\nimport { isValid } from '../utils/typeChecks'\n\nexport default class TechnicalIndicatorView extends View {\n  constructor (container, chartStore, xAxis, yAxis, paneId) {\n    super(container, chartStore)\n    this._xAxis = xAxis\n    this._yAxis = yAxis\n    this._paneId = paneId\n  }\n\n  _draw () {\n    this._ctx.globalCompositeOperation = 'destination-over'\n    this._drawContent()\n  }\n\n  _drawContent () {\n    this._drawTechs()\n    this._drawGrid()\n  }\n\n  /**\n   * 绘制网格\n   */\n  _drawGrid () {\n    const gridOptions = this._chartStore.styleOptions().grid\n    if (!gridOptions.show) {\n      return\n    }\n    const gridHorizontalOptions = gridOptions.horizontal\n    this._ctx.save()\n    if (gridHorizontalOptions.show) {\n      this._ctx.strokeStyle = gridHorizontalOptions.color\n      this._ctx.lineWidth = gridHorizontalOptions.size\n      if (gridHorizontalOptions.style === LineStyle.DASH) {\n        this._ctx.setLineDash(gridHorizontalOptions.dashValue)\n      } else {\n        this._ctx.setLineDash([])\n      }\n      this._yAxis.ticks().forEach(tick => {\n        renderHorizontalLine(this._ctx, tick.y, 0, this._width)\n      })\n    }\n\n    const gridVerticalOptions = gridOptions.vertical\n    if (gridVerticalOptions.show) {\n      this._ctx.strokeStyle = gridVerticalOptions.color\n      this._ctx.lineWidth = gridVerticalOptions.size\n      if (gridVerticalOptions.style === LineStyle.DASH) {\n        this._ctx.setLineDash(gridVerticalOptions.dashValue)\n      } else {\n        this._ctx.setLineDash([])\n      }\n      this._xAxis.ticks().forEach(tick => {\n        renderVerticalLine(this._ctx, tick.x, 0, this._height)\n      })\n    }\n    this._ctx.restore()\n  }\n\n  /**\n   * 绘制指标\n   */\n  _drawTechs () {\n    this._ctx.globalCompositeOperation = 'source-over'\n    const to = this._chartStore.timeScaleStore().to()\n    const techOptions = this._chartStore.styleOptions().technicalIndicator\n    const techs = this._chartStore.technicalIndicatorStore().instances(this._paneId)\n    techs.forEach(tech => {\n      const plots = tech.plots\n      const lines = []\n      const dataList = this._chartStore.dataList()\n      const techResult = tech.result\n      const styles = tech.styles || techOptions\n      // 技术指标自定义绘制\n      if (tech.render) {\n        this._ctx.save()\n        tech.render({\n          ctx: this._ctx,\n          dataSource: {\n            from: this._chartStore.timeScaleStore().from(),\n            to,\n            kLineDataList: this._chartStore.dataList(),\n            technicalIndicatorDataList: techResult\n          },\n          viewport: {\n            width: this._width,\n            height: this._height,\n            dataSpace: this._chartStore.timeScaleStore().dataSpace(),\n            barSpace: this._chartStore.timeScaleStore().barSpace()\n          },\n          styles,\n          xAxis: this._xAxis,\n          yAxis: this._yAxis\n        })\n        this._ctx.restore()\n      }\n      const lineColors = styles.line.colors || []\n      const lineColorSize = lineColors.length\n      const linePlotStyles = []\n      const lineCoordinates = []\n      const isCandleYAxis = this._yAxis.isCandleYAxis()\n\n      this._ctx.lineWidth = 1\n      this._drawGraphics(\n        (x, i, kLineData, halfBarSpace, barSpace) => {\n          const techData = techResult[i] || {}\n          let lineCount = 0\n          if (tech.shouldOhlc && !isCandleYAxis) {\n            this._drawCandleBar(x, halfBarSpace, barSpace, kLineData, styles.bar, CandleType.OHLC)\n          }\n          plots.forEach(plot => {\n            const value = techData[plot.key]\n            const valueY = this._yAxis.convertToPixel(value)\n            switch (plot.type) {\n              case TechnicalIndicatorPlotType.CIRCLE: {\n                if (isValid(value)) {\n                  const plotStyle = getTechnicalIndicatorPlotStyle(\n                    dataList, techResult, i, plot, styles, { color: styles.circle.noChangeColor, isStroke: true }\n                  )\n                  this._drawCircle({\n                    x,\n                    y: valueY,\n                    radius: halfBarSpace,\n                    color: plotStyle.color,\n                    isStroke: plotStyle.isStroke\n                  })\n                }\n                break\n              }\n              case TechnicalIndicatorPlotType.BAR: {\n                if (isValid(value)) {\n                  let baseValue\n                  if (isValid(plot.baseValue)) {\n                    baseValue = plot.baseValue\n                  } else {\n                    baseValue = this._yAxis.min()\n                  }\n                  const baseValueY = this._yAxis.convertToPixel(baseValue)\n                  const height = Math.abs(baseValueY - valueY)\n                  const bar = {\n                    x: x - halfBarSpace,\n                    width: halfBarSpace * 2,\n                    height: Math.max(1, height)\n                  }\n                  if (valueY > baseValueY) {\n                    bar.y = baseValueY\n                  } else {\n                    bar.y = height < 1 ? baseValueY - 1 : valueY\n                  }\n                  const plotStyle = getTechnicalIndicatorPlotStyle(\n                    dataList, techResult, i, plot, styles, { color: styles.bar.noChangeColor }\n                  )\n                  bar.color = plotStyle.color\n                  bar.isStroke = plotStyle.isStroke\n                  this._drawBar(bar)\n                }\n                break\n              }\n              case TechnicalIndicatorPlotType.LINE: {\n                let plotStyle = null\n                if (isValid(value)) {\n                  plotStyle = getTechnicalIndicatorPlotStyle(\n                    dataList, techResult, i, plot, styles, { color: lineColors[lineCount % lineColorSize] }\n                  )\n                  const coordinate = { x: x, y: valueY }\n                  const prePlotStyle = linePlotStyles[lineCount]\n                  if (!lineCoordinates[lineCount]) {\n                    lineCoordinates[lineCount] = []\n                  }\n                  lineCoordinates[lineCount].push(coordinate)\n                  if (prePlotStyle) {\n                    if (prePlotStyle.color !== plotStyle.color) {\n                      lines.push({ color: prePlotStyle.color, isDashed: prePlotStyle.isDashed, coordinates: lineCoordinates[lineCount] })\n                      lineCoordinates[lineCount] = [coordinate]\n                    } else {\n                      if (prePlotStyle.isDashed !== plotStyle.isDashed) {\n                        lines.push({ color: prePlotStyle.color, isDashed: prePlotStyle.isDashed, coordinates: lineCoordinates[lineCount] })\n                        lineCoordinates[lineCount] = [coordinate]\n                      }\n                    }\n                  }\n                  if (i === to - 1) {\n                    lines.push({ color: plotStyle.color, isDashed: plotStyle.isDashed, coordinates: lineCoordinates[lineCount] })\n                  }\n                }\n                linePlotStyles[lineCount] = plotStyle\n                lineCount++\n                break\n              }\n              default: { break }\n            }\n          })\n        },\n        () => {\n          this._drawLines(lines, styles)\n        }\n      )\n    })\n    this._ctx.globalCompositeOperation = 'destination-over'\n  }\n\n  /**\n   * 绘制图形\n   * @param onDrawing\n   * @param onDrawEnd\n   */\n  _drawGraphics (onDrawing, onDrawEnd) {\n    const visibleDataList = this._chartStore.visibleDataList()\n    const barSpace = this._chartStore.timeScaleStore().barSpace()\n    const halfBarSpace = this._chartStore.timeScaleStore().halfBarSpace()\n    visibleDataList.forEach(({ x, index, data }, n) => {\n      onDrawing(x, index, data, halfBarSpace, barSpace, n)\n    })\n    onDrawEnd && onDrawEnd()\n  }\n\n  /**\n   * 绘制线\n   * @param lines\n   * @param techOptions\n   */\n  _drawLines (lines, techOptions) {\n    this._ctx.lineWidth = techOptions.line.size\n    lines.forEach(line => {\n      this._ctx.strokeStyle = line.color\n      if (line.isDashed) {\n        this._ctx.setLineDash(techOptions.line.dashValue)\n      } else {\n        this._ctx.setLineDash([])\n      }\n      renderLine(this._ctx, line.coordinates)\n    })\n  }\n\n  /**\n   * 绘制柱\n   */\n  _drawBar (bar) {\n    if (bar.isStroke) {\n      this._ctx.strokeStyle = bar.color\n      this._ctx.strokeRect(bar.x + 0.5, bar.y, bar.width - 1, bar.height)\n    } else {\n      this._ctx.fillStyle = bar.color\n      this._ctx.fillRect(bar.x, bar.y, bar.width, bar.height)\n    }\n  }\n\n  /**\n   * 绘制圆点\n   * @param circle\n   * @private\n   */\n  _drawCircle (circle) {\n    this._ctx.strokeStyle = circle.color\n    this._ctx.fillStyle = circle.color\n    this._ctx.beginPath()\n    this._ctx.arc(circle.x, circle.y, circle.radius, Math.PI * 2, 0, true)\n    if (circle.isStroke) {\n      this._ctx.stroke()\n    } else {\n      this._ctx.fill()\n    }\n    this._ctx.closePath()\n  }\n\n  /**\n   * 绘制蜡烛柱\n   * @param x\n   * @param halfBarSpace\n   * @param barSpace\n   * @param kLineData\n   * @param barOptions\n   * @param barStyle\n   */\n  _drawCandleBar (x, halfBarSpace, barSpace, kLineData, barOptions, barStyle) {\n    const { open, close, high, low } = kLineData\n    if (close > open) {\n      this._ctx.strokeStyle = barOptions.upColor\n      this._ctx.fillStyle = barOptions.upColor\n    } else if (close < open) {\n      this._ctx.strokeStyle = barOptions.downColor\n      this._ctx.fillStyle = barOptions.downColor\n    } else {\n      this._ctx.strokeStyle = barOptions.noChangeColor\n      this._ctx.fillStyle = barOptions.noChangeColor\n    }\n    const openY = this._yAxis.convertToPixel(open)\n    const closeY = this._yAxis.convertToPixel(close)\n    const priceY = [\n      openY, closeY,\n      this._yAxis.convertToPixel(high),\n      this._yAxis.convertToPixel(low)\n    ]\n    priceY.sort((a, b) => a - b)\n    this._ctx.fillRect(x - 0.5, priceY[0], 1, priceY[1] - priceY[0])\n    this._ctx.fillRect(x - 0.5, priceY[2], 1, priceY[3] - priceY[2])\n\n    const barHeight = Math.max(1, priceY[2] - priceY[1])\n    switch (barStyle) {\n      case CandleType.CANDLE_SOLID: {\n        this._ctx.fillRect(x - halfBarSpace, priceY[1], barSpace, barHeight)\n        break\n      }\n      case CandleType.CANDLE_STROKE: {\n        this._ctx.strokeRect(x - halfBarSpace + 0.5, priceY[1], barSpace - 1, barHeight)\n        break\n      }\n      case CandleType.CANDLE_UP_STROKE: {\n        if (close > open) {\n          this._ctx.strokeRect(x - halfBarSpace + 0.5, priceY[1], barSpace - 1, barHeight)\n        } else {\n          this._ctx.fillRect(x - halfBarSpace, priceY[1], barSpace, barHeight)\n        }\n        break\n      }\n      case CandleType.CANDLE_DOWN_STROKE: {\n        if (close > open) {\n          this._ctx.fillRect(x - halfBarSpace, priceY[1], barSpace, barHeight)\n        } else {\n          this._ctx.strokeRect(x - halfBarSpace + 0.5, priceY[1], barSpace - 1, barHeight)\n        }\n        break\n      }\n      default: {\n        this._ctx.fillRect(x - 0.5, priceY[0], 1, priceY[3] - priceY[0])\n        this._ctx.fillRect(x - halfBarSpace, openY, halfBarSpace, 1)\n        this._ctx.fillRect(x, closeY, halfBarSpace, 1)\n        break\n      }\n    }\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 绘制文字\n * @param ctx\n * @param color\n * @param x\n * @param y\n * @param text\n */\nexport function renderText (ctx, color, x, y, text) {\n  ctx.fillStyle = color\n  ctx.fillText(text, x, y)\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport View from './View'\nimport { TooltipShowRule, LineStyle } from '../options/styleOptions'\nimport { TechnicalIndicatorPlotType, getTechnicalIndicatorPlotStyle } from '../component/technicalindicator/TechnicalIndicator'\nimport { isValid, isObject, isFunction } from '../utils/typeChecks'\nimport { formatPrecision, formatBigNumber } from '../utils/format'\nimport { renderHorizontalLine, renderVerticalLine } from '../renderer/line'\nimport { calcTextWidth, createFont } from '../utils/canvas'\nimport { renderText } from '../renderer/text'\n\nexport default class TechnicalIndicatorOverlayView extends View {\n  constructor (container, chartStore, xAxis, yAxis, paneId) {\n    super(container, chartStore)\n    this._xAxis = xAxis\n    this._yAxis = yAxis\n    this._paneId = paneId\n  }\n\n  _draw () {\n    this._ctx.textBaseline = 'alphabetic'\n    this._drawTag()\n    this._drawShape()\n    this._drawAnnotation()\n    const crosshair = this._chartStore.crosshairStore().get()\n    if (crosshair.kLineData) {\n      const styleOptions = this._chartStore.styleOptions()\n      const crosshairOptions = styleOptions.crosshair\n      if (crosshair.paneId === this._paneId) {\n        // 绘制十字光标水平线\n        this._drawCrosshairLine(crosshairOptions, 'horizontal', crosshair.y, 0, this._width, renderHorizontalLine)\n      }\n      if (crosshair.paneId) {\n        // 绘制十字光标垂直线\n        this._drawCrosshairLine(crosshairOptions, 'vertical', crosshair.realX, 0, this._height, renderVerticalLine)\n      }\n      this._drawTooltip(crosshair, this._chartStore.technicalIndicatorStore().instances(this._paneId))\n    }\n  }\n\n  /**\n   * 绘制注解\n   */\n  _drawAnnotation () {\n    const annotations = this._chartStore.annotationStore().get(this._paneId)\n    if (annotations) {\n      annotations.forEach(annotation => {\n        annotation.draw(this._ctx)\n      })\n    }\n  }\n\n  /**\n   * 绘制标签\n   */\n  _drawTag () {\n    const tags = this._chartStore.tagStore().get(this._paneId)\n    if (tags) {\n      tags.forEach(tag => {\n        tag.drawMarkLine(this._ctx)\n      })\n    }\n  }\n\n  /**\n   * 绘制图形标记\n   * @private\n   */\n  _drawShape () {\n    this._chartStore.shapeStore().instances(this._paneId).forEach(shape => {\n      shape.draw(this._ctx)\n    })\n    const progressShape = this._chartStore.shapeStore().progressInstance()\n    if (progressShape.paneId === this._paneId) {\n      progressShape.instance.draw(this._ctx)\n    }\n  }\n\n  /**\n   * 绘制图例\n   * @param crosshair\n   * @param techs\n   * @private\n   */\n  _drawTooltip (crosshair, techs) {\n    const techOptions = this._chartStore.styleOptions().technicalIndicator\n    this._drawBatchTechToolTip(\n      crosshair,\n      techs,\n      techOptions,\n      0,\n      this._shouldDrawTooltip(crosshair, techOptions.tooltip)\n    )\n  }\n\n  /**\n   * 绘制十字光标线\n   * @param crosshairOptions\n   * @param optionsKey\n   * @param fixed\n   * @param start\n   * @param end\n   * @param drawLine\n   * @private\n   */\n  _drawCrosshairLine (crosshairOptions, optionsKey, fixed, start, end, drawLine) {\n    const crosshairDirectionOptions = crosshairOptions[optionsKey]\n    const crosshairLineOptions = crosshairDirectionOptions.line\n    if (!crosshairOptions.show || !crosshairDirectionOptions.show || !crosshairLineOptions.show) {\n      return\n    }\n    this._ctx.save()\n    this._ctx.lineWidth = crosshairLineOptions.size\n    this._ctx.strokeStyle = crosshairLineOptions.color\n\n    if (crosshairLineOptions.style === LineStyle.DASH) {\n      this._ctx.setLineDash(crosshairLineOptions.dashValue)\n    }\n    drawLine(this._ctx, fixed, start, end)\n    this._ctx.restore()\n  }\n\n  /**\n   * 批量绘制技术指标提示\n   * @param crosshair\n   * @param techs\n   * @param techOptions\n   * @param offsetTop\n   * @param isDrawTechTooltip\n   * @returns {number}\n   */\n  _drawBatchTechToolTip (crosshair, techs, techOptions, offsetTop = 0, isDrawTechTooltip) {\n    if (!isDrawTechTooltip) {\n      return 0\n    }\n    const techTooltipOptions = techOptions.tooltip\n    let top = offsetTop\n    const startTop = top\n    techs.forEach(tech => {\n      top += (\n        techTooltipOptions.text.marginTop +\n        this._drawTechTooltip(crosshair, tech, techOptions, top) +\n        techTooltipOptions.text.marginBottom\n      )\n    })\n    return top - startTop\n  }\n\n  /**\n   * 绘制指标图例\n   * @param crosshair\n   * @param tech\n   * @param techOptions\n   * @param offsetTop\n   * @returns {number}\n   * @private\n   */\n  _drawTechTooltip (crosshair, tech, techOptions, offsetTop = 0) {\n    const techTooltipOptions = techOptions.tooltip\n    const techTooltipTextOptions = techTooltipOptions.text\n    const textMarginLeft = techTooltipTextOptions.marginLeft\n    const textMarginRight = techTooltipTextOptions.marginRight\n    const textSize = techTooltipTextOptions.size\n    const textColor = techTooltipTextOptions.color\n    let labelX = 0\n    let labelY = techTooltipTextOptions.marginTop + offsetTop\n    let tooltipHeight = textSize\n    const tooltipData = this._getTechTooltipData(crosshair, tech, techOptions)\n    this._ctx.textBaseline = 'top'\n    this._ctx.font = createFont(textSize, techTooltipTextOptions.weight, techTooltipTextOptions.family)\n    if (techTooltipOptions.showName) {\n      const nameText = tooltipData.name\n      const nameTextWidth = calcTextWidth(this._ctx, nameText)\n      labelX += textMarginLeft\n      renderText(this._ctx, textColor, labelX, labelY, nameText)\n      labelX += nameTextWidth\n      if (!techTooltipOptions.showParams) {\n        labelX += textMarginRight\n      }\n    }\n    if (techTooltipOptions.showParams) {\n      const calcParamText = tooltipData.calcParamText\n      const calcParamTextWidth = calcTextWidth(this._ctx, calcParamText)\n      if (!techTooltipOptions.showName) {\n        labelX += textMarginLeft\n      }\n      renderText(this._ctx, textColor, labelX, labelY, calcParamText)\n      labelX += (calcParamTextWidth + textMarginRight)\n    }\n    tooltipData.values.forEach(v => {\n      labelX += textMarginLeft\n      const text = `${v.title}${v.value}`\n      const textWidth = calcTextWidth(this._ctx, text)\n      if (labelX + textWidth > this._width) {\n        labelX = textMarginLeft\n        tooltipHeight += (textSize + 1)\n        labelY += (textSize + 1)\n      }\n      renderText(this._ctx, v.color || techTooltipTextOptions.color, labelX, labelY, text)\n      labelX += (textWidth + textMarginRight)\n    })\n    return tooltipHeight\n  }\n\n  /**\n   * 是否需要绘制图例\n   * @param crosshair\n   * @param tooltipOptions\n   * @return {boolean|boolean|*}\n   */\n  _shouldDrawTooltip (crosshair, tooltipOptions) {\n    const showRule = tooltipOptions.showRule\n    return showRule === TooltipShowRule.ALWAYS ||\n      (showRule === TooltipShowRule.FOLLOW_CROSS && (!!crosshair.paneId))\n  }\n\n  /**\n   * 获取技术指标提示数据\n   * @param techData\n   * @param tech\n   * @returns\n   */\n  _getTechTooltipData (crosshair, tech, techOptions) {\n    const dataList = this._chartStore.dataList()\n    const techResult = tech.result\n\n    let calcParamText = ''\n    const calcParams = tech.calcParams\n    if (calcParams.length > 0) {\n      const params = calcParams.map(param => {\n        if (isObject(param)) {\n          return param.value\n        }\n        return param\n      })\n      calcParamText = `(${params.join(',')})`\n    }\n\n    let values = []\n    if (isFunction(tech.createToolTipDataSource)) {\n      values = tech.createToolTipDataSource({\n        dataSource: {\n          from: this._chartStore.timeScaleStore().from(),\n          to: this._chartStore.timeScaleStore().to(),\n          kLineDataList: this._chartStore.dataList(),\n          technicalIndicatorDataList: techResult\n        },\n        viewport: {\n          width: this._width,\n          height: this._height,\n          dataSpace: this._chartStore.timeScaleStore().dataSpace(),\n          barSpace: this._chartStore.timeScaleStore().barSpace()\n        },\n        crosshair,\n        technicalIndicator: tech,\n        xAxis: this._xAxis,\n        yAxis: this._yAxis,\n        defaultStyles: techOptions\n      }) || []\n    } else {\n      const dataIndex = crosshair.dataIndex\n      const styles = tech.styles || techOptions\n      const techData = techResult[dataIndex]\n\n      const plots = tech.plots\n      const precision = tech.precision\n      const shouldFormatBigNumber = tech.shouldFormatBigNumber\n      const lineColors = styles.line.colors || []\n      const colorSize = lineColors.length\n      let lineCount = 0\n      plots.forEach(plot => {\n        let defaultStyle = {}\n        switch (plot.type) {\n          case TechnicalIndicatorPlotType.CIRCLE: {\n            defaultStyle = { color: styles.circle.noChangeColor }\n            break\n          }\n          case TechnicalIndicatorPlotType.BAR: {\n            defaultStyle = { color: styles.bar.noChangeColor }\n            break\n          }\n          case TechnicalIndicatorPlotType.LINE: {\n            defaultStyle = { color: lineColors[lineCount % colorSize] || techOptions.tooltip.text.color }\n            lineCount++\n            break\n          }\n          default: { break }\n        }\n        const plotStyle = getTechnicalIndicatorPlotStyle(\n          dataList, techResult, crosshair.dataIndex, plot, styles, defaultStyle\n        )\n        const data = {}\n        if (isValid(plot.title)) {\n          let value = (techData || {})[plot.key]\n          if (isValid(value)) {\n            value = formatPrecision(value, precision)\n            if (shouldFormatBigNumber) {\n              value = formatBigNumber(value)\n            }\n          }\n          data.title = plot.title\n          data.value = value || techOptions.tooltip.defaultValue\n          data.color = plotStyle.color\n          values.push(data)\n        }\n      })\n    }\n    return { values, name: tech.shortName, calcParamText }\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Widget from './Widget'\nimport TechnicalIndicatorView from '../view/TechnicalIndicatorView'\nimport TechnicalIndicatorOverlayView from '../view/TechnicalIndicatorOverlayView'\n\nexport default class TechnicalIndicatorWidget extends Widget {\n  _createMainView (container, props) {\n    return new TechnicalIndicatorView(container, props.chartStore, props.xAxis, props.yAxis, props.paneId)\n  }\n\n  _createOverlayView (container, props) {\n    return new TechnicalIndicatorOverlayView(container, props.chartStore, props.xAxis, props.yAxis, props.paneId)\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 绘制带边框的圆角填充矩形\n * @param ctx\n * @param fillColor\n * @param borderColor\n * @param borderSize\n * @param x\n * @param y\n * @param width\n * @param height\n * @param borderRadius\n */\nexport function renderStrokeFillRoundRect (\n  ctx, fillColor, borderColor, borderSize,\n  x, y, width, height, borderRadius\n) {\n  renderFillRoundRect(ctx, fillColor, x, y, width, height, borderRadius)\n  renderStrokeRoundRect(ctx, borderColor, borderSize, x, y, width, height, borderRadius)\n}\n\n/**\n * 绘制填充的矩形\n * @param ctx\n * @param color\n * @param x\n * @param y\n * @param width\n * @param height\n */\nexport function renderFillRect (ctx, color, x, y, width, height) {\n  ctx.fillStyle = color\n  ctx.fillRect(x, y, width, height)\n}\n\n/**\n * 绘制圆角空心矩形\n * @param ctx\n * @param borderColor\n * @param borderSize\n * @param x\n * @param y\n * @param w\n * @param h\n * @param r\n */\nexport function renderStrokeRoundRect (ctx, borderColor, borderSize, x, y, w, h, r) {\n  ctx.lineWidth = borderSize\n  ctx.strokeStyle = borderColor\n  renderRoundRect(ctx, x, y, w, h, r)\n  ctx.stroke()\n}\n\n/**\n * 绘制填充圆角矩形\n * @param ctx\n * @param color\n * @param x\n * @param y\n * @param w\n * @param h\n * @param r\n */\nexport function renderFillRoundRect (ctx, color, x, y, w, h, r) {\n  ctx.fillStyle = color\n  renderRoundRect(ctx, x, y, w, h, r)\n  ctx.fill()\n}\n\n/**\n * 绘制圆角矩形\n * @param ctx\n * @param x\n * @param y\n * @param w\n * @param h\n * @param r\n */\nexport function renderRoundRect (ctx, x, y, w, h, r) {\n  ctx.beginPath()\n  ctx.moveTo(x + r, y)\n  ctx.arcTo(x + w, y, x + w, y + h, r)\n  ctx.arcTo(x + w, y + h, x, y + h, r)\n  ctx.arcTo(x, y + h, x, y, r)\n  ctx.arcTo(x, y, x + w, y, r)\n  ctx.closePath()\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport View from './View'\nimport { YAxisType } from '../options/styleOptions'\nimport { TechnicalIndicatorPlotType } from '../component/technicalindicator/TechnicalIndicator'\nimport { calcTextWidth, createFont } from '../utils/canvas'\nimport { renderHorizontalLine, renderVerticalLine } from '../renderer/line'\nimport { formatBigNumber, formatPrecision } from '../utils/format'\nimport { isValid } from '../utils/typeChecks'\nimport { renderFillRoundRect } from '../renderer/rect'\nimport { renderText } from '../renderer/text'\n\nexport default class YAxisView extends View {\n  constructor (container, chartStore, yAxis, paneId) {\n    super(container, chartStore)\n    this._yAxis = yAxis\n    this._paneId = paneId\n  }\n\n  _draw () {\n    const yAxisOptions = this._chartStore.styleOptions().yAxis\n    if (yAxisOptions.show) {\n      this._drawAxisLine(yAxisOptions)\n      this._drawTickLines(yAxisOptions)\n      this._drawTickLabels(yAxisOptions)\n      this._drawTechLastValue()\n      this._drawLastPriceLabel()\n    }\n  }\n\n  _drawAxisLine (yAxisOptions) {\n    const axisLine = yAxisOptions.axisLine\n    if (!axisLine.show) {\n      return\n    }\n    this._ctx.strokeStyle = axisLine.color\n    this._ctx.lineWidth = axisLine.size\n    let x\n    if (this._yAxis.isFromYAxisZero()) {\n      x = 0\n    } else {\n      x = this._width - 1\n    }\n    renderVerticalLine(this._ctx, x, 0, this._height)\n  }\n\n  _drawTickLines (yAxisOptions) {\n    const tickLine = yAxisOptions.tickLine\n    if (!tickLine.show) {\n      return\n    }\n    this._ctx.lineWidth = tickLine.size\n    this._ctx.strokeStyle = tickLine.color\n\n    const tickLineLength = tickLine.length\n\n    let startX\n    let endX\n    if (this._yAxis.isFromYAxisZero()) {\n      startX = 0\n      if (yAxisOptions.axisLine.show) {\n        startX += yAxisOptions.axisLine.size\n      }\n      endX = startX + tickLineLength\n    } else {\n      startX = this._width\n      if (yAxisOptions.axisLine.show) {\n        startX -= yAxisOptions.axisLine.size\n      }\n      endX = startX - tickLineLength\n    }\n    this._yAxis.ticks().forEach(tick => {\n      renderHorizontalLine(this._ctx, tick.y, startX, endX)\n    })\n  }\n\n  _drawTickLabels (yAxisOptions) {\n    const tickText = yAxisOptions.tickText\n    if (!tickText.show) {\n      return\n    }\n    const tickLine = yAxisOptions.tickLine\n    const tickLineShow = tickLine.show\n    const tickLineLength = tickLine.length\n    let labelX\n    if (this._yAxis.isFromYAxisZero()) {\n      labelX = tickText.paddingLeft\n      if (yAxisOptions.axisLine.show) {\n        labelX += yAxisOptions.axisLine.size\n      }\n      if (tickLineShow) {\n        labelX += tickLineLength\n      }\n      this._ctx.textAlign = 'left'\n    } else {\n      labelX = this._width - tickText.paddingRight\n      if (yAxisOptions.axisLine.show) {\n        labelX -= yAxisOptions.axisLine.size\n      }\n      if (tickLineShow) {\n        labelX -= tickLineLength\n      }\n      this._ctx.textAlign = 'right'\n    }\n    this._ctx.textBaseline = 'middle'\n    this._ctx.font = createFont(tickText.size, tickText.weight, tickText.family)\n    this._ctx.fillStyle = tickText.color\n    this._yAxis.ticks().forEach(tick => {\n      this._ctx.fillText(tick.v, labelX, tick.y)\n    })\n    this._ctx.textAlign = 'left'\n  }\n\n  /**\n   * 绘制技术指标最后值\n   * @private\n   */\n  _drawTechLastValue () {\n    const techOptions = this._chartStore.styleOptions().technicalIndicator\n    const lastValueMarkOptions = techOptions.lastValueMark\n    if (!lastValueMarkOptions.show || !lastValueMarkOptions.text.show) {\n      return\n    }\n    const techs = this._chartStore.technicalIndicatorStore().instances(this._paneId)\n    const dataList = this._chartStore.dataList()\n    techs.forEach(tech => {\n      const techResult = tech.result || []\n      const dataSize = techResult.length\n      const techData = techResult[dataSize - 1] || {}\n      const plots = tech.plots\n      const cbData = {\n        prev: { kLineData: dataList[dataSize - 2], technicalIndicatorData: techResult[dataSize - 2] },\n        current: { kLineData: dataList[dataSize - 1], technicalIndicatorData: techData },\n        next: { kLineData: null, technicalIndicatorData: null }\n      }\n      const precision = tech.precision\n      const styles = tech.styles || techOptions\n      const colors = styles.line.colors || []\n      const colorSize = colors.length\n      let lineCount = 0\n      plots.forEach(plot => {\n        const value = techData[plot.key]\n        let backgroundColor\n        switch (plot.type) {\n          case TechnicalIndicatorPlotType.CIRCLE: {\n            backgroundColor = (plot.color && plot.color(cbData, styles)) || styles.circle.noChangeColor\n            break\n          }\n          case TechnicalIndicatorPlotType.BAR: {\n            backgroundColor = (plot.color && plot.color(cbData, styles)) || styles.bar.noChangeColor\n            break\n          }\n          case TechnicalIndicatorPlotType.LINE: {\n            backgroundColor = colors[lineCount % colorSize]\n            lineCount++\n            break\n          }\n          default: { break }\n        }\n        if (isValid(value)) {\n          this._drawMarkLabel(\n            value, precision, tech.shouldFormatBigNumber,\n            {\n              ...lastValueMarkOptions.text, backgroundColor\n            }\n          )\n        }\n      })\n    })\n  }\n\n  /**\n   * 绘制最新价文字\n   * @private\n   */\n  _drawLastPriceLabel () {\n    if (!this._yAxis.isCandleYAxis()) {\n      return\n    }\n    const priceMarkOptions = this._chartStore.styleOptions().candle.priceMark\n    const lastPriceMarkOptions = priceMarkOptions.last\n    if (!priceMarkOptions.show || !lastPriceMarkOptions.show || !lastPriceMarkOptions.text.show) {\n      return\n    }\n    const dataList = this._chartStore.dataList()\n    const kLineData = dataList[dataList.length - 1]\n    if (!kLineData) {\n      return\n    }\n    const close = kLineData.close\n    const open = kLineData.open\n    let backgroundColor\n    if (close > open) {\n      backgroundColor = lastPriceMarkOptions.upColor\n    } else if (close < open) {\n      backgroundColor = lastPriceMarkOptions.downColor\n    } else {\n      backgroundColor = lastPriceMarkOptions.noChangeColor\n    }\n    this._drawMarkLabel(\n      close, this._chartStore.pricePrecision(), false,\n      {\n        ...lastPriceMarkOptions.text, backgroundColor\n      }\n    )\n  }\n\n  /**\n   * 绘制标记label\n   * @param value\n   * @param precision\n   * @param shouldFormatBigNumber\n   * @param size\n   * @param weight\n   * @param family\n   * @param color\n   * @param backgroundColor\n   * @param borderRadius\n   * @param paddingLeft\n   * @param paddingTop\n   * @param paddingRight\n   * @param paddingBottom\n   * @private\n   */\n  _drawMarkLabel (\n    value, precision, shouldFormatBigNumber,\n    {\n      size, weight, family, color, backgroundColor, borderRadius,\n      paddingLeft, paddingTop, paddingRight, paddingBottom\n    }\n  ) {\n    const valueY = this._yAxis.convertToNicePixel(value)\n    let text\n    if (this._yAxis.yAxisType() === YAxisType.PERCENTAGE) {\n      const fromData = (this._chartStore.visibleDataList()[0] || {}).data || {}\n      const fromClose = fromData.close\n      text = `${((value - fromClose) / fromClose * 100).toFixed(2)}%`\n    } else {\n      text = formatPrecision(value, precision)\n      if (shouldFormatBigNumber) {\n        text = formatBigNumber(text)\n      }\n    }\n    this._ctx.font = createFont(size, weight, family)\n    const rectWidth = calcTextWidth(this._ctx, text) + paddingLeft + paddingRight\n    const rectHeight = paddingTop + size + paddingBottom\n    let rectStartX\n    if (this._yAxis.isFromYAxisZero()) {\n      rectStartX = 0\n    } else {\n      rectStartX = this._width - rectWidth\n    }\n    renderFillRoundRect(\n      this._ctx, backgroundColor,\n      rectStartX, valueY - paddingTop - size / 2, rectWidth, rectHeight, borderRadius\n    )\n    this._ctx.textBaseline = 'middle'\n    renderText(this._ctx, color, rectStartX + paddingLeft, valueY, text)\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport View from './View'\nimport { getTextRectWidth, getTextRectHeight } from '../utils/canvas'\nimport { formatBigNumber, formatPrecision } from '../utils/format'\nimport { YAxisType } from '../options/styleOptions'\nimport { renderStrokeFillRoundRect } from '../renderer/rect'\nimport { renderText } from '../renderer/text'\n\nexport default class YAxisOverlayView extends View {\n  constructor (container, chartStore, yAxis, paneId) {\n    super(container, chartStore)\n    this._yAxis = yAxis\n    this._paneId = paneId\n  }\n\n  _draw () {\n    this._ctx.textBaseline = 'middle'\n    this._drawTag()\n    this._drawCrossHairLabel()\n  }\n\n  /**\n   * 绘制标签\n   * @private\n   */\n  _drawTag () {\n    const tags = this._chartStore.tagStore().get(this._paneId)\n    if (tags) {\n      tags.forEach(tag => {\n        tag.drawText(this._ctx)\n      })\n    }\n  }\n\n  _drawCrossHairLabel () {\n    const crosshair = this._chartStore.crosshairStore().get()\n    if (crosshair.paneId !== this._paneId || this._chartStore.dataList().length === 0) {\n      return\n    }\n    const styleOptions = this._chartStore.styleOptions()\n    const crosshairOptions = styleOptions.crosshair\n    const crosshairHorizontalOptions = crosshairOptions.horizontal\n    const crosshairHorizontalTextOptions = crosshairHorizontalOptions.text\n    if (!crosshairOptions.show || !crosshairHorizontalOptions.show || !crosshairHorizontalTextOptions.show) {\n      return\n    }\n    const value = this._yAxis.convertFromPixel(crosshair.y)\n    let text\n    if (this._yAxis.yAxisType() === YAxisType.PERCENTAGE) {\n      const fromData = (this._chartStore.visibleDataList()[0] || {}).data || {}\n      text = `${((value - fromData.close) / fromData.close * 100).toFixed(2)}%`\n    } else {\n      const techs = this._chartStore.technicalIndicatorStore().instances(this._paneId)\n      let precision = 0\n      let shouldFormatBigNumber = false\n      if (this._yAxis.isCandleYAxis()) {\n        precision = this._chartStore.pricePrecision()\n      } else {\n        techs.forEach(tech => {\n          precision = Math.max(tech.precision, precision)\n          if (!shouldFormatBigNumber) {\n            shouldFormatBigNumber = tech.shouldFormatBigNumber\n          }\n        })\n      }\n      text = formatPrecision(value, precision)\n      if (shouldFormatBigNumber) {\n        text = formatBigNumber(text)\n      }\n    }\n    let rectStartX\n    const borderSize = crosshairHorizontalTextOptions.borderSize\n\n    const rectWidth = getTextRectWidth(this._ctx, text, crosshairHorizontalTextOptions)\n    const rectHeight = getTextRectHeight(crosshairHorizontalTextOptions)\n    if (this._yAxis.isFromYAxisZero()) {\n      rectStartX = 0\n    } else {\n      rectStartX = this._width - rectWidth\n    }\n\n    const rectY = crosshair.y - borderSize - crosshairHorizontalTextOptions.paddingTop - crosshairHorizontalTextOptions.size / 2\n    // 绘制y轴文字外的边框\n    renderStrokeFillRoundRect(\n      this._ctx,\n      crosshairHorizontalTextOptions.backgroundColor,\n      crosshairHorizontalTextOptions.borderColor,\n      borderSize,\n      rectStartX,\n      rectY,\n      rectWidth,\n      rectHeight,\n      crosshairHorizontalTextOptions.borderRadius\n    )\n    renderText(\n      this._ctx,\n      crosshairHorizontalTextOptions.color,\n      rectStartX + borderSize + crosshairHorizontalTextOptions.paddingLeft,\n      crosshair.y,\n      text\n    )\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Widget from './Widget'\nimport YAxisView from '../view/YAxisView'\nimport YAxisOverlayView from '../view/YAxisOverlayView'\n\nexport default class YAxisWidget extends Widget {\n  _createMainView (container, props) {\n    return new YAxisView(container, props.chartStore, props.yAxis, props.paneId)\n  }\n\n  _createOverlayView (container, props) {\n    return new YAxisOverlayView(container, props.chartStore, props.yAxis, props.paneId)\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getPixelRatio } from '../../utils/canvas'\nimport { getPrecision, nice, round } from '../../utils/number'\nimport { createElement } from '../../utils/element'\n\nexport default class Axis {\n  constructor (chartStore) {\n    this._chartStore = chartStore\n    this._width = 0\n    this._height = 0\n    this._cacheMinValue = 0\n    this._cacheMaxValue = 0\n    this._minValue = 0\n    this._maxValue = 0\n    this._range = 0\n    this._realMinValue = 0\n    this._realMaxValue = 0\n    this._realRange = 0\n    this._ticks = []\n    this._initMeasureCanvas()\n  }\n\n  _initMeasureCanvas () {\n    const measureCanvas = createElement('canvas')\n    const pixelRatio = getPixelRatio(measureCanvas)\n    this._measureCtx = measureCanvas.getContext('2d')\n    this._measureCtx.scale(pixelRatio, pixelRatio)\n  }\n\n  min () {\n    return this._minValue\n  }\n\n  max () {\n    return this._maxValue\n  }\n\n  width () {\n    return this._width\n  }\n\n  height () {\n    return this._height\n  }\n\n  setWidth (width) {\n    this._width = width\n  }\n\n  setHeight (height) {\n    this._height = height\n  }\n\n  /**\n   * 获取ticks\n   * @returns {[]|*[]}\n   */\n  ticks () {\n    return this._ticks\n  }\n\n  /**\n   * 计算轴\n   * @param forceCompute\n   */\n  computeAxis (forceCompute) {\n    const minMax = this._optimalMinMax(this._computeMinMax())\n    this._minValue = minMax.min\n    this._maxValue = minMax.max\n    this._range = minMax.range\n    this._realMinValue = minMax.realMin\n    this._realMaxValue = minMax.realMax\n    this._realRange = minMax.realRange\n    if (this._cacheMinValue !== minMax.min || this._cacheMaxValue !== minMax.max || forceCompute) {\n      this._cacheMinValue = minMax.min\n      this._cacheMaxValue = minMax.max\n      this._ticks = this._optimalTicks(this._computeTicks())\n      return true\n    }\n    return false\n  }\n\n  /**\n   * 计算最大最小值\n   * @private\n   */\n  _computeMinMax () {}\n\n  /**\n   * 优化最大最小值\n   * @param minMax\n   * @private\n   */\n  _optimalMinMax (minMax) {}\n\n  /**\n   * 计算轴上的tick值\n   */\n  _computeTicks () {\n    const ticks = []\n    if (this._range >= 0) {\n      const intervalPrecision = this._computeInterval(this._realRange)\n      const interval = intervalPrecision.interval\n      const precision = intervalPrecision.precision\n      const first = round(Math.ceil(this._realMinValue / interval) * interval, precision)\n      const last = round(Math.floor(this._realMaxValue / interval) * interval, precision)\n      let n = 0\n      let f = first\n\n      if (interval !== 0) {\n        while (f <= last) {\n          ticks[n] = { v: f.toFixed(precision) }\n          ++n\n          f += interval\n        }\n      }\n    }\n    return ticks\n  }\n\n  /**\n   * 计算最佳的tick\n   * @param ticks\n   */\n  _optimalTicks (ticks) {}\n\n  /**\n   * 计算间隔\n   * @private\n   */\n  _computeInterval (range) {\n    const interval = nice(range / 8.0)\n    const precision = getPrecision(interval)\n    return {\n      interval, precision\n    }\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Axis from './Axis'\nimport { CandleType, YAxisPosition, YAxisType } from '../../options/styleOptions'\nimport { isNumber, isValid } from '../../utils/typeChecks'\nimport { calcTextWidth, createFont } from '../../utils/canvas'\nimport { formatBigNumber, formatPrecision } from '../../utils/format'\nimport { log10, index10 } from '../../utils/number'\n\nexport default class YAxis extends Axis {\n  constructor (chartStore, isCandleYAxis, paneId) {\n    super(chartStore)\n    this._isCandleYAxis = isCandleYAxis\n    this._paneId = paneId\n  }\n\n  _computeMinMax () {\n    const minMaxArray = [Number.MAX_SAFE_INTEGER, Number.MIN_SAFE_INTEGER]\n    const plotsResult = []\n    let shouldOhlc = false\n    let minValue = Number.MAX_SAFE_INTEGER\n    let maxValue = Number.MIN_SAFE_INTEGER\n    let techPrecision = Number.MAX_SAFE_INTEGER\n    const techs = this._chartStore.technicalIndicatorStore().instances(this._paneId)\n    let techGap\n    techs.forEach(tech => {\n      if (!shouldOhlc) {\n        shouldOhlc = tech.shouldOhlc\n      }\n      techPrecision = Math.min(techPrecision, tech.precision)\n      if (isNumber(tech.minValue)) {\n        minValue = Math.min(minValue, tech.minValue)\n      }\n      if (isNumber(tech.maxValue)) {\n        maxValue = Math.max(maxValue, tech.maxValue)\n      }\n      if (tech.styles) {\n        if (!techGap) {\n          techGap = { top: 0, bottom: 0 }\n        }\n        const margin = tech.styles.margin\n        if (isNumber(margin.top)) {\n          if (margin.top < 1) {\n            techGap.top = Math.max(margin.top, techGap.top)\n          } else {\n            techGap.top = Math.max(margin.top / this._height, techGap.top)\n          }\n        }\n        if (isNumber(margin.bottom)) {\n          if (margin.bottom < 1) {\n            techGap.bottom = Math.max(margin.bottom, techGap.bottom)\n          } else {\n            techGap.bottom = Math.max(margin.bottom / this._height, techGap.bottom)\n          }\n        }\n      }\n      plotsResult.push({\n        plots: tech.plots,\n        result: tech.result\n      })\n    })\n\n    let precision = 4\n    if (this._isCandleYAxis) {\n      const pricePrecision = this._chartStore.pricePrecision()\n      if (techPrecision !== Number.MAX_SAFE_INTEGER) {\n        precision = Math.min(techPrecision, pricePrecision)\n      } else {\n        precision = pricePrecision\n      }\n    } else {\n      if (techPrecision !== Number.MAX_SAFE_INTEGER) {\n        precision = techPrecision\n      }\n    }\n    const visibleDataList = this._chartStore.visibleDataList()\n    const candleOptions = this._chartStore.styleOptions().candle\n    const isArea = candleOptions.type === CandleType.AREA\n    const areaValueKey = candleOptions.area.value\n    const shouldCompareHighLow = (this._isCandleYAxis && !isArea) || (!this._isCandleYAxis && shouldOhlc)\n    visibleDataList.forEach(({ index, data }) => {\n      if (shouldCompareHighLow) {\n        minMaxArray[0] = Math.min(minMaxArray[0], data.low)\n        minMaxArray[1] = Math.max(minMaxArray[1], data.high)\n      }\n      if (this._isCandleYAxis && isArea) {\n        minMaxArray[0] = Math.min(minMaxArray[0], data[areaValueKey])\n        minMaxArray[1] = Math.max(minMaxArray[1], data[areaValueKey])\n      }\n      plotsResult.forEach(({ plots, result }) => {\n        const techData = result[index] || {}\n        plots.forEach(plot => {\n          const value = techData[plot.key]\n          if (isValid(value)) {\n            minMaxArray[0] = Math.min(minMaxArray[0], value)\n            minMaxArray[1] = Math.max(minMaxArray[1], value)\n          }\n        })\n      })\n    })\n    if (minMaxArray[0] !== Number.MAX_SAFE_INTEGER && minMaxArray[1] !== Number.MIN_SAFE_INTEGER) {\n      minMaxArray[0] = Math.min(minValue, minMaxArray[0])\n      minMaxArray[1] = Math.max(maxValue, minMaxArray[1])\n    } else {\n      minMaxArray[0] = 0\n      minMaxArray[1] = 10\n    }\n    return { min: minMaxArray[0], max: minMaxArray[1], precision, specifyMin: minValue, specifyMax: maxValue, techGap }\n  }\n\n  _optimalMinMax ({ min, max, precision, specifyMin, specifyMax, techGap }) {\n    let minValue = min\n    let maxValue = max\n    const yAxisType = this.yAxisType()\n    let dif\n    switch (yAxisType) {\n      case YAxisType.PERCENTAGE: {\n        const fromData = (this._chartStore.visibleDataList()[0] || {}).data || {}\n        if (isNumber(fromData.close)) {\n          minValue = (minValue - fromData.close) / fromData.close * 100\n          maxValue = (maxValue - fromData.close) / fromData.close * 100\n        }\n        dif = Math.pow(10, -2)\n        break\n      }\n      case YAxisType.LOG: {\n        minValue = log10(minValue)\n        maxValue = log10(maxValue)\n        dif = 0.05 * index10(-precision)\n        break\n      }\n      default: {\n        dif = index10(-precision)\n      }\n    }\n    if (\n      minValue === maxValue ||\n      Math.abs(minValue - maxValue) < dif\n    ) {\n      const minCheck = specifyMin === minValue\n      const maxCheck = specifyMax === maxValue\n      minValue = minCheck ? minValue : (maxCheck ? minValue - 8 * dif : minValue - 4 * dif)\n      maxValue = maxCheck ? maxValue : (minCheck ? maxValue + 8 * dif : maxValue + 4 * dif)\n    }\n    let marginOptions\n    if (this._isCandleYAxis) {\n      marginOptions = this._chartStore.styleOptions().candle.margin\n    } else {\n      // 如果是副图，直接取指标的样式配置\n      marginOptions = techGap ? { top: 0, bottom: 0 } : this._chartStore.styleOptions().technicalIndicator.margin\n    }\n    let topRate = 0.2\n    if (isNumber(marginOptions.top)) {\n      let rate\n      if (marginOptions.top < 1) {\n        rate = marginOptions.top\n      } else {\n        rate = marginOptions.top / this._height\n      }\n      topRate = techGap ? Math.max(techGap.top, rate) : rate\n    }\n    let bottomRate = 0.1\n    if (isNumber(marginOptions.bottom)) {\n      let rate\n      if (marginOptions.bottom < 1) {\n        rate = marginOptions.bottom\n      } else {\n        rate = marginOptions.bottom / this._height\n      }\n      bottomRate = techGap ? Math.max(techGap.bottom, rate) : rate\n    }\n    let range = Math.abs(maxValue - minValue)\n    // 保证每次图形绘制上下都留间隙\n    minValue = minValue - range * bottomRate\n    maxValue = maxValue + range * topRate\n    range = Math.abs(maxValue - minValue)\n    let realMinValue\n    let realMaxValue\n    let realRange\n    if (yAxisType === YAxisType.LOG) {\n      realMinValue = index10(minValue)\n      realMaxValue = index10(maxValue)\n      realRange = Math.abs(realMaxValue - realMinValue)\n    } else {\n      realMinValue = minValue\n      realMaxValue = maxValue\n      realRange = range\n    }\n    return {\n      min: minValue,\n      max: maxValue,\n      range,\n      realMin: realMinValue,\n      realMax: realMaxValue,\n      realRange\n    }\n  }\n\n  _optimalTicks (ticks) {\n    const optimalTicks = []\n    const yAxisType = this.yAxisType()\n    const techs = this._chartStore.technicalIndicatorStore().instances(this._paneId)\n    let precision = 0\n    let shouldFormatBigNumber = false\n    if (this._isCandleYAxis) {\n      precision = this._chartStore.pricePrecision()\n    } else {\n      techs.forEach(tech => {\n        precision = Math.max(precision, tech.precision)\n        if (!shouldFormatBigNumber) {\n          shouldFormatBigNumber = tech.shouldFormatBigNumber\n        }\n      })\n    }\n    const textHeight = this._chartStore.styleOptions().xAxis.tickText.size\n    let validY\n    ticks.forEach(({ v }) => {\n      let value\n      let y = this._innerConvertToPixel(+v)\n      switch (yAxisType) {\n        case YAxisType.PERCENTAGE: {\n          value = `${formatPrecision(v, 2)}%`\n          break\n        }\n        case YAxisType.LOG: {\n          y = this._innerConvertToPixel(log10(v))\n          value = formatPrecision(v, precision)\n          break\n        }\n        default: {\n          value = formatPrecision(v, precision)\n          if (shouldFormatBigNumber) {\n            value = formatBigNumber(value)\n          }\n          break\n        }\n      }\n      if (y > textHeight && y < this._height - textHeight && ((validY && (Math.abs(validY - y) > textHeight * 2)) || !validY)) {\n        optimalTicks.push({ v: value, y })\n        validY = y\n      }\n    })\n    return optimalTicks\n  }\n\n  /**\n   * 内部值转换成坐标\n   * @param value\n   * @return {number}\n   * @private\n   */\n  _innerConvertToPixel (value) {\n    const rate = (value - this._minValue) / this._range\n    return this.isReverse() ? Math.round(rate * this._height) : Math.round((1.0 - rate) * this._height)\n  }\n\n  /**\n   * 是否是蜡烛图轴\n   * @return {boolean}\n   */\n  isCandleYAxis () {\n    return this._isCandleYAxis\n  }\n\n  /**\n   * y轴类型\n   * @return {string}\n   */\n  yAxisType () {\n    return this._isCandleYAxis ? this._chartStore.styleOptions().yAxis.type : YAxisType.NORMAL\n  }\n\n  /**\n   * 是否反转\n   * @return {boolean}\n   */\n  isReverse () {\n    return this._isCandleYAxis && this._chartStore.styleOptions().yAxis.reverse\n  }\n\n  /**\n   * 是否从y轴0开始\n   * @return {boolean}\n   */\n  isFromYAxisZero () {\n    const yAxisOptions = this._chartStore.styleOptions().yAxis\n    return (\n      (yAxisOptions.position === YAxisPosition.LEFT && yAxisOptions.inside) ||\n      (yAxisOptions.position === YAxisPosition.RIGHT && !yAxisOptions.inside)\n    )\n  }\n\n  /**\n   * 获取自身宽度\n   * @return {number}\n   */\n  getSelfWidth () {\n    const styleOptions = this._chartStore.styleOptions()\n    const yAxisOptions = styleOptions.yAxis\n    const width = yAxisOptions.width\n    if (isNumber(width)) {\n      return width\n    }\n    let yAxisWidth = 0\n    if (yAxisOptions.show) {\n      if (yAxisOptions.axisLine.show) {\n        yAxisWidth += yAxisOptions.axisLine.size\n      }\n      if (yAxisOptions.tickLine.show) {\n        yAxisWidth += yAxisOptions.tickLine.length\n      }\n      if (yAxisOptions.tickText.show) {\n        let textWidth = 0\n        this._measureCtx.font = createFont(yAxisOptions.tickText.size, yAxisOptions.tickText.weight, yAxisOptions.tickText.family)\n        this._ticks.forEach(tick => {\n          textWidth = Math.max(textWidth, calcTextWidth(this._measureCtx, tick.v))\n        })\n        yAxisWidth += (yAxisOptions.tickText.paddingLeft + yAxisOptions.tickText.paddingRight + textWidth)\n      }\n    }\n    const crosshairOptions = styleOptions.crosshair\n    let crosshairVerticalTextWidth = 0\n    if (\n      crosshairOptions.show &&\n      crosshairOptions.horizontal.show &&\n      crosshairOptions.horizontal.text.show\n    ) {\n      const techs = this._chartStore.technicalIndicatorStore().instances(this._paneId)\n      let techPrecision = 0\n      let shouldFormatBigNumber = false\n      techs.forEach(tech => {\n        techPrecision = Math.max(tech.precision, techPrecision)\n        if (!shouldFormatBigNumber) {\n          shouldFormatBigNumber = tech.shouldFormatBigNumber\n        }\n      })\n      this._measureCtx.font = createFont(\n        crosshairOptions.horizontal.text.size,\n        crosshairOptions.horizontal.text.weight,\n        crosshairOptions.horizontal.text.family\n      )\n      let precision = 2\n      if (this.yAxisType() !== YAxisType.PERCENTAGE) {\n        if (this._isCandleYAxis) {\n          const pricePrecision = this._chartStore.pricePrecision()\n          const lastValueMarkOptions = styleOptions.technicalIndicator.lastValueMark\n          if (lastValueMarkOptions.show && lastValueMarkOptions.text.show) {\n            precision = Math.max(techPrecision, pricePrecision)\n          } else {\n            precision = pricePrecision\n          }\n        } else {\n          precision = techPrecision\n        }\n      }\n      let valueText = formatPrecision(this._maxValue, precision)\n      if (shouldFormatBigNumber) {\n        valueText = formatBigNumber(valueText)\n      }\n      crosshairVerticalTextWidth += (\n        crosshairOptions.horizontal.text.paddingLeft +\n        crosshairOptions.horizontal.text.paddingRight +\n        crosshairOptions.horizontal.text.borderSize * 2 +\n        calcTextWidth(this._measureCtx, valueText)\n      )\n    }\n    return Math.max(yAxisWidth, crosshairVerticalTextWidth)\n  }\n\n  convertFromPixel (pixel) {\n    const rate = this.isReverse() ? pixel / this._height : 1 - pixel / this._height\n    const value = rate * this._range + this._minValue\n    switch (this.yAxisType()) {\n      case YAxisType.PERCENTAGE: {\n        const fromData = (this._chartStore.visibleDataList()[0] || {}).data || {}\n        if (isNumber(fromData.close)) {\n          return fromData.close * value / 100 + fromData.close\n        }\n        break\n      }\n      case YAxisType.LOG: {\n        return index10(value)\n      }\n      default: {\n        return value\n      }\n    }\n  }\n\n  convertToPixel (value) {\n    let v\n    switch (this.yAxisType()) {\n      case YAxisType.PERCENTAGE: {\n        const fromData = (this._chartStore.visibleDataList()[0] || {}).data || {}\n        if (isNumber(fromData.close)) {\n          v = (value - fromData.close) / fromData.close * 100\n        }\n        break\n      }\n      case YAxisType.LOG: {\n        v = log10(value)\n        break\n      }\n      default: {\n        v = value\n      }\n    }\n    return this._innerConvertToPixel(v)\n  }\n\n  /**\n   * 将值转换成坐标，即使坐标不在范围内，也会显示在顶部或者底部\n   * @param value\n   * @return {number}\n   */\n  convertToNicePixel (value) {\n    const y = this.convertToPixel(value)\n    return Math.round(Math.max(this._height * 0.05, Math.min(y, this._height * 0.98)))\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Pane from './Pane'\nimport TechnicalIndicatorWidget from '../widget/TechnicalIndicatorWidget'\nimport YAxisWidget from '../widget/YAxisWidget'\nimport YAxis from '../component/axis/YAxis'\n\nimport { isValid } from '../utils/typeChecks'\n\nexport default class TechnicalIndicatorPane extends Pane {\n  constructor (props) {\n    super(props)\n    this._minHeight = 30\n    this._initHeight(props)\n  }\n\n  _initBefore (props) {\n    this._id = props.id\n    this._yAxis = this._createYAxis(props)\n  }\n\n  _initHeight (props) {\n    const height = props.height\n    const minHeight = props.minHeight\n    if (isValid(minHeight)) {\n      this.setMinHeight(minHeight)\n    }\n    if (isValid(height)) {\n      const mh = this.minHeight()\n      const h = height < mh ? mh : height\n      this.setHeight(h)\n    }\n  }\n\n  _createYAxis (props) {\n    return new YAxis(\n      props.chartStore,\n      false,\n      props.id\n    )\n  }\n\n  _createMainWidget (container, props) {\n    return new TechnicalIndicatorWidget({\n      container,\n      chartStore: props.chartStore,\n      xAxis: props.xAxis,\n      yAxis: this._yAxis,\n      paneId: props.id\n    })\n  }\n\n  _createYAxisWidget (container, props) {\n    return new YAxisWidget({\n      container,\n      chartStore: props.chartStore,\n      yAxis: this._yAxis,\n      paneId: props.id\n    })\n  }\n\n  /**\n   * 获取最小高度\n   * @returns\n   */\n  minHeight () {\n    return this._minHeight\n  }\n\n  /**\n   * 设置最小高度\n   * @param minHeight\n   */\n  setMinHeight (minHeight) {\n    this._minHeight = minHeight\n  }\n\n  setHeight (height) {\n    super.setHeight(height)\n    this._yAxis.setHeight(height)\n  }\n\n  setWidth (mainWidgetWidth, yAxisWidgetWidth) {\n    super.setWidth(mainWidgetWidth, yAxisWidgetWidth)\n    this._yAxis.setWidth(yAxisWidgetWidth)\n  }\n\n  /**\n   * 获取id\n   * @returns {string}\n   */\n  id () {\n    return this._id\n  }\n\n  yAxis () {\n    return this._yAxis\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport TechnicalIndicatorView from './TechnicalIndicatorView'\nimport { CandleType, LineStyle } from '../options/styleOptions'\nimport { renderHorizontalLine, renderLine } from '../renderer/line'\nimport { renderCloseFillPath } from '../renderer/path'\nimport { createFont } from '../utils/canvas'\nimport { formatPrecision, formatValue } from '../utils/format'\nimport { isArray, isNumber } from '../utils/typeChecks'\n\nexport default class CandleView extends TechnicalIndicatorView {\n  _drawContent () {\n    const candleOptions = this._chartStore.styleOptions().candle\n    this._drawLastPriceLine(candleOptions.priceMark)\n    if (candleOptions.type === CandleType.AREA) {\n      this._drawArea(candleOptions)\n    } else {\n      this._drawHighLowPrice(candleOptions.priceMark)\n      this._drawCandle(candleOptions)\n    }\n    this._drawTechs()\n    this._drawGrid()\n  }\n\n  /**\n   * 绘制面积图\n   * @param candleOptions\n   * @private\n   */\n  _drawArea (candleOptions) {\n    const lineCoordinates = []\n    const areaCoordinates = []\n    let minY = Number.MAX_SAFE_INTEGER\n    const areaOptions = candleOptions.area\n    const onDrawing = (x, i, kLineData, halfBarSpace, barSpace, n) => {\n      const value = kLineData[areaOptions.value]\n      if (isNumber(value)) {\n        const y = this._yAxis.convertToPixel(value)\n        if (n === 0) {\n          const startX = x - halfBarSpace\n          areaCoordinates.push({ x: startX, y: this._height })\n          areaCoordinates.push({ x: startX, y })\n          lineCoordinates.push({ x: startX, y })\n        }\n        lineCoordinates.push({ x, y })\n        areaCoordinates.push({ x, y })\n        minY = Math.min(minY, y)\n      }\n    }\n    const onDrawEnd = () => {\n      const areaCoordinateLength = areaCoordinates.length\n      if (areaCoordinateLength > 0) {\n        const lastCoordinate = areaCoordinates[areaCoordinateLength - 1]\n        const halfBarSpace = this._chartStore.timeScaleStore().halfBarSpace()\n        const endX = lastCoordinate.x + halfBarSpace\n        lineCoordinates.push({ x: endX, y: lastCoordinate.y })\n        areaCoordinates.push({ x: endX, y: lastCoordinate.y })\n        areaCoordinates.push({ x: endX, y: this._height })\n      }\n\n      if (lineCoordinates.length > 0) {\n        // 绘制分时线\n        this._ctx.lineWidth = areaOptions.lineSize\n        this._ctx.strokeStyle = areaOptions.lineColor\n        renderLine(this._ctx, lineCoordinates)\n      }\n\n      if (areaCoordinates.length > 0) {\n        // 绘制分时线填充区域\n        const backgroundColor = areaOptions.backgroundColor\n        if (isArray(backgroundColor)) {\n          const gradient = this._ctx.createLinearGradient(0, this._height, 0, minY)\n          try {\n            backgroundColor.forEach(({ offset, color }) => {\n              gradient.addColorStop(offset, color)\n            })\n          } catch (e) {\n          }\n          this._ctx.fillStyle = gradient\n        } else {\n          this._ctx.fillStyle = backgroundColor\n        }\n        renderCloseFillPath(this._ctx, areaCoordinates)\n      }\n    }\n    this._drawGraphics(onDrawing, onDrawEnd)\n  }\n\n  /**\n   * 绘制蜡烛\n   * @param candleOptions\n   * @private\n   */\n  _drawCandle (candleOptions) {\n    this._drawGraphics((x, i, kLineData, halfBarSpace, barSpace) => {\n      this._drawCandleBar(x, halfBarSpace, barSpace, kLineData, candleOptions.bar, candleOptions.type)\n    })\n  }\n\n  /**\n   * 渲染最高最低价格\n   * @param priceMarkOptions\n   * @private\n   */\n  _drawHighLowPrice (priceMarkOptions) {\n    if (!priceMarkOptions.show || (!priceMarkOptions.high.show && !priceMarkOptions.low.show)) {\n      return\n    }\n    const highest = { price: Number.MIN_SAFE_INTEGER, pos: -1 }\n    const lowest = { price: Number.MAX_SAFE_INTEGER, pos: -1 }\n    const visibleDataList = this._chartStore.visibleDataList()\n    visibleDataList.forEach(({ index, data }) => {\n      const high = formatValue(data, 'high', Number.MIN_SAFE_INTEGER)\n      if (high > highest.price) {\n        highest.price = high\n        highest.pos = index\n      }\n      const low = formatValue(data, 'low', Number.MAX_SAFE_INTEGER)\n      if (low < lowest.price) {\n        lowest.price = low\n        lowest.pos = index\n      }\n    })\n    const highY = this._yAxis.convertToPixel(highest.price)\n    highest.y = highY\n    const lowY = this._yAxis.convertToPixel(lowest.price)\n    lowest.y = lowY\n    let highOffset = []\n    let lowOffset = []\n    if (highY < lowY) {\n      highOffset = [-2, -5]\n      lowOffset = [2, 5]\n    } else {\n      highOffset = [2, 5]\n      lowOffset = [-2, -5]\n    }\n\n    const pricePrecision = this._chartStore.pricePrecision()\n    this._ctx.textAlign = 'left'\n    this._ctx.lineWidth = 1\n    this._ctx.textBaseline = 'middle'\n    this._drawRealHighLowPrice(priceMarkOptions.high, highOffset, pricePrecision, highest)\n    this._drawRealHighLowPrice(priceMarkOptions.low, lowOffset, pricePrecision, lowest)\n  }\n\n  /**\n   * 真实绘制最高最低价\n   * @param options\n   * @param offset\n   * @param precision\n   * @param data\n   * @returns\n   */\n  _drawRealHighLowPrice (options, offset, precision, data) {\n    if (!options.show) {\n      return\n    }\n    const { price, pos, y: priceY } = data\n    const startX = this._xAxis.convertToPixel(pos)\n    const startY = priceY + offset[0]\n    this._ctx.strokeStyle = options.color\n    this._ctx.fillStyle = options.color\n\n    renderLine(\n      this._ctx,\n      [\n        { x: startX - 2, y: startY + offset[0] },\n        { x: startX, y: startY },\n        { x: startX + 2, y: startY + offset[0] }\n      ]\n    )\n\n    // 绘制竖线\n    const y = startY + offset[1]\n    renderLine(\n      this._ctx,\n      [\n        { x: startX, y: startY },\n        { x: startX, y },\n        { x: startX + 5, y }\n      ]\n    )\n\n    this._ctx.font = createFont(options.textSize, options.textWeight, options.textFamily)\n    const text = formatPrecision(price, precision)\n    this._ctx.fillText(text, startX + 5 + options.textMargin, y)\n  }\n\n  /**\n   * 绘制最新价线\n   * @param priceMarkOptions\n   * @private\n   */\n  _drawLastPriceLine (priceMarkOptions) {\n    const lastPriceMarkOptions = priceMarkOptions.last\n    if (!priceMarkOptions.show || !lastPriceMarkOptions.show || !lastPriceMarkOptions.line.show) {\n      return\n    }\n    const dataList = this._chartStore.dataList()\n    const kLineData = dataList[dataList.length - 1]\n    if (!kLineData) {\n      return\n    }\n    const close = kLineData.close\n    const open = kLineData.open\n    const priceY = this._yAxis.convertToNicePixel(close)\n    let color\n    if (close > open) {\n      color = lastPriceMarkOptions.upColor\n    } else if (close < open) {\n      color = lastPriceMarkOptions.downColor\n    } else {\n      color = lastPriceMarkOptions.noChangeColor\n    }\n    this._ctx.save()\n    this._ctx.strokeStyle = color\n    this._ctx.lineWidth = lastPriceMarkOptions.line.size\n    if (lastPriceMarkOptions.line.style === LineStyle.DASH) {\n      this._ctx.setLineDash(lastPriceMarkOptions.line.dashValue)\n    }\n    renderHorizontalLine(this._ctx, priceY, 0, this._width)\n    this._ctx.restore()\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport TechnicalIndicatorOverlayView from './TechnicalIndicatorOverlayView'\nimport { isFunction, isObject, isArray, isValid } from '../utils/typeChecks'\nimport { formatBigNumber, formatDate, formatPrecision, formatValue } from '../utils/format'\nimport { calcTextWidth, createFont } from '../utils/canvas'\nimport { TooltipShowType, YAxisPosition } from '../options/styleOptions'\nimport { renderFillRoundRect, renderStrokeRoundRect } from '../renderer/rect'\nimport { renderText } from '../renderer/text'\n\nexport default class CandleOverlayView extends TechnicalIndicatorOverlayView {\n  _drawTooltip (crosshair, techs) {\n    const styleOptions = this._chartStore.styleOptions()\n    const candleOptions = styleOptions.candle\n    const candleTooltipOptions = candleOptions.tooltip\n    const techOptions = styleOptions.technicalIndicator\n    const techTooltipOptions = techOptions.tooltip\n    const isDrawCandleTooltip = this._shouldDrawTooltip(crosshair, candleTooltipOptions)\n    const isDrawTechTooltip = this._shouldDrawTooltip(crosshair, techTooltipOptions)\n    if (\n      candleTooltipOptions.showType === TooltipShowType.RECT &&\n      techTooltipOptions.showType === TooltipShowType.RECT\n    ) {\n      this._drawCandleTooltipWithRect(\n        crosshair,\n        techs,\n        candleOptions,\n        isDrawCandleTooltip,\n        techOptions,\n        0,\n        isDrawTechTooltip\n      )\n    } else {\n      if (candleTooltipOptions.showType === TooltipShowType.STANDARD) {\n        const tooltipHeight = this._drawCandleTooltipWithStandard(crosshair.kLineData, candleOptions, isDrawCandleTooltip)\n        if (techTooltipOptions.showType === TooltipShowType.STANDARD) {\n          const offsetTop = isDrawCandleTooltip ? tooltipHeight + candleTooltipOptions.text.marginTop : 0\n          this._drawBatchTechToolTip(\n            crosshair,\n            techs,\n            techOptions,\n            offsetTop,\n            isDrawTechTooltip\n          )\n        } else {\n          this._drawCandleTooltipWithRect(\n            crosshair,\n            techs,\n            candleOptions,\n            false,\n            techOptions,\n            tooltipHeight,\n            isDrawTechTooltip\n          )\n        }\n      } else {\n        const tooltipHeight = this._drawBatchTechToolTip(\n          crosshair,\n          techs,\n          techOptions,\n          0,\n          isDrawTechTooltip\n        )\n        this._drawCandleTooltipWithRect(\n          crosshair,\n          techs,\n          candleOptions,\n          isDrawCandleTooltip,\n          techOptions,\n          tooltipHeight,\n          false\n        )\n      }\n    }\n  }\n\n  /**\n   * 绘制蜡烛默认的图例\n   * @param kLineData\n   * @param candleOptions\n   * @param isDrawCandleTooltip\n   * @returns {number}\n   * @private\n   */\n  _drawCandleTooltipWithStandard (kLineData, candleOptions, isDrawCandleTooltip) {\n    if (!isDrawCandleTooltip) {\n      return 0\n    }\n    const values = this._getCandleTooltipData(kLineData, candleOptions)\n    const candleTooltipOptions = candleOptions.tooltip\n    const textMarginLeft = candleTooltipOptions.text.marginLeft\n    const textMarginRight = candleTooltipOptions.text.marginRight\n    const textSize = candleTooltipOptions.text.size\n    const textColor = candleTooltipOptions.text.color\n    const labels = candleTooltipOptions.labels\n    this._ctx.textBaseline = 'top'\n    this._ctx.font = createFont(textSize, candleTooltipOptions.text.weight, candleTooltipOptions.text.family)\n    let labelX = textMarginLeft\n    let labelY = candleTooltipOptions.text.marginTop\n    let tooltipHeight = textSize\n    labels.forEach((label, i) => {\n      const labelWidth = calcTextWidth(this._ctx, label)\n      const value = values[i] || candleTooltipOptions.defaultValue\n      let valueText\n      let valueColor\n      if (isObject(value)) {\n        valueText = value.value || candleTooltipOptions.defaultValue\n        valueColor = value.color || textColor\n      } else {\n        valueColor = textColor\n        valueText = value\n      }\n      const textWidth = calcTextWidth(this._ctx, valueText)\n      if (labelX + labelWidth + textWidth > this._width) {\n        labelX = textMarginLeft\n        tooltipHeight += (textSize + 1)\n        labelY += (textSize + 1)\n      }\n      renderText(this._ctx, textColor, labelX, labelY, label)\n      renderText(this._ctx, valueColor, labelX + labelWidth, labelY, valueText)\n      labelX += (labelWidth + textWidth + textMarginLeft + textMarginRight)\n    })\n    return tooltipHeight\n  }\n\n  /**\n   * 绘制蜡烛图矩形类型图例\n   * @param crosshair\n   * @param techs\n   * @param candleOptions\n   * @param isDrawCandleTooltip\n   * @param techOptions\n   * @param offsetTop\n   * @param isDrawTechTooltip\n   * @private\n   */\n  _drawCandleTooltipWithRect (\n    crosshair, techs, candleOptions, isDrawCandleTooltip,\n    techOptions, offsetTop, isDrawTechTooltip\n  ) {\n    if (!isDrawCandleTooltip && !isDrawTechTooltip) {\n      return\n    }\n    const candleTooltipOptions = candleOptions.tooltip\n    const baseLabels = candleTooltipOptions.labels\n    const baseValues = this._getCandleTooltipData(crosshair.kLineData, candleOptions)\n    const baseTextMarginLeft = candleTooltipOptions.text.marginLeft\n    const baseTextMarginRight = candleTooltipOptions.text.marginRight\n    const baseTextMarginTop = candleTooltipOptions.text.marginTop\n    const baseTextMarginBottom = candleTooltipOptions.text.marginBottom\n    const baseTextSize = candleTooltipOptions.text.size\n    const baseTextColor = candleTooltipOptions.text.color\n\n    const rectOptions = candleTooltipOptions.rect\n    const rectBorderSize = rectOptions.borderSize\n    const rectPaddingLeft = rectOptions.paddingLeft\n    const rectPaddingRight = rectOptions.paddingRight\n    const rectPaddingTop = rectOptions.paddingTop\n    const rectPaddingBottom = rectOptions.paddingBottom\n    const rectLeft = rectOptions.offsetLeft\n    const rectRight = rectOptions.offsetRight\n\n    let maxLabelWidth = 0\n    let rectWidth = 0\n    let rectHeight = 0\n    this._ctx.save()\n    this._ctx.textBaseline = 'top'\n    if (isDrawCandleTooltip) {\n      this._ctx.font = createFont(baseTextSize, candleTooltipOptions.text.weight, candleTooltipOptions.text.family)\n      baseLabels.forEach((label, i) => {\n        const value = baseValues[i]\n        let v\n        if (isObject(value)) {\n          v = value.value || candleTooltipOptions.defaultValue\n        } else {\n          v = value\n        }\n        const text = `${label}${v}`\n        const labelWidth = calcTextWidth(this._ctx, text) + baseTextMarginLeft + baseTextMarginRight\n        maxLabelWidth = Math.max(maxLabelWidth, labelWidth)\n      })\n      rectHeight += ((baseTextMarginBottom + baseTextMarginTop + baseTextSize) * baseLabels.length)\n    }\n\n    const techTooltipOptions = techOptions.tooltip\n\n    const techTooltipTextMarginLeft = techTooltipOptions.text.marginLeft\n    const techTooltipTextMarginRight = techTooltipOptions.text.marginRight\n    const techTooltipTextMarginTop = techTooltipOptions.text.marginTop\n    const techTooltipTextMarginBottom = techTooltipOptions.text.marginBottom\n    const techTooltipTextSize = techTooltipOptions.text.size\n    const techTooltipDataList = []\n    techs.forEach(tech => { techTooltipDataList.push(this._getTechTooltipData(crosshair, tech, techOptions)) })\n    if (isDrawTechTooltip) {\n      this._ctx.font = createFont(\n        techTooltipTextSize,\n        techTooltipOptions.text.weight,\n        techTooltipOptions.text.family\n      )\n      techTooltipDataList.forEach(tooltipData => {\n        tooltipData.values.forEach(({ title, value }) => {\n          if (isValid(title)) {\n            const text = `${title}${value}`\n            const labelWidth = calcTextWidth(this._ctx, text) + techTooltipTextMarginLeft + techTooltipTextMarginRight\n            maxLabelWidth = Math.max(maxLabelWidth, labelWidth)\n            rectHeight += (techTooltipTextMarginTop + techTooltipTextMarginBottom + techTooltipTextSize)\n          }\n        })\n      })\n    }\n    rectWidth += maxLabelWidth\n    if (rectWidth === 0 || rectHeight === 0) {\n      return\n    }\n    rectWidth += (rectBorderSize * 2 + rectPaddingLeft + rectPaddingRight)\n    rectHeight += (rectBorderSize * 2 + rectPaddingTop + rectPaddingBottom)\n    const styleOptions = this._chartStore.styleOptions()\n    const centerX = this._width / 2\n    let rectX\n    if (crosshair.realX < centerX) {\n      rectX = this._width - rectRight - rectWidth\n      if (styleOptions.yAxis.inside && styleOptions.yAxis.position === YAxisPosition.RIGHT) {\n        rectX -= this._yAxis.width()\n      }\n    } else {\n      rectX = rectLeft\n      if (styleOptions.yAxis.inside && styleOptions.yAxis.position === YAxisPosition.LEFT) {\n        rectX += this._yAxis.width()\n      }\n    }\n    const rectY = offsetTop + rectOptions.offsetTop\n    const radius = rectOptions.borderRadius\n    renderFillRoundRect(this._ctx, rectOptions.backgroundColor, rectX, rectY, rectWidth, rectHeight, radius)\n    renderStrokeRoundRect(this._ctx, rectOptions.borderColor, rectBorderSize, rectX, rectY, rectWidth, rectHeight, radius)\n    const baseLabelX = rectX + rectBorderSize + rectPaddingLeft + baseTextMarginLeft\n    let labelY = rectY + rectBorderSize + rectPaddingTop\n    if (isDrawCandleTooltip) {\n      // 开始渲染基础数据文字\n      this._ctx.font = createFont(\n        baseTextSize,\n        candleTooltipOptions.text.weight,\n        candleTooltipOptions.text.family\n      )\n      baseLabels.forEach((label, i) => {\n        labelY += baseTextMarginTop\n        this._ctx.textAlign = 'left'\n        renderText(this._ctx, baseTextColor, baseLabelX, labelY, label)\n\n        const value = baseValues[i]\n        let text\n        let color\n        if (isObject(value)) {\n          color = value.color || baseTextColor\n          text = value.value || candleTooltipOptions.defaultValue\n        } else {\n          color = baseTextColor\n          text = value || candleTooltipOptions.defaultValue\n        }\n        this._ctx.textAlign = 'right'\n        renderText(\n          this._ctx,\n          color,\n          rectX + rectWidth - rectBorderSize - baseTextMarginRight - rectPaddingRight,\n          labelY,\n          text\n        )\n        labelY += (baseTextSize + baseTextMarginBottom)\n      })\n    }\n    if (isDrawTechTooltip) {\n      // 开始渲染指标数据文字\n      const indicatorLabelX = rectX + rectBorderSize + rectPaddingLeft + techTooltipTextMarginLeft\n      this._ctx.font = createFont(\n        techTooltipTextSize,\n        techTooltipOptions.text.weight,\n        techTooltipOptions.text.family\n      )\n      techTooltipDataList.forEach(tooltipData => {\n        tooltipData.values.forEach(v => {\n          labelY += techTooltipTextMarginTop\n          this._ctx.textAlign = 'left'\n          this._ctx.fillStyle = v.color || techTooltipOptions.text.color\n          this._ctx.fillText(v.title, indicatorLabelX, labelY)\n          this._ctx.textAlign = 'right'\n          this._ctx.fillText(\n            v.value,\n            rectX + rectWidth - rectBorderSize - techTooltipTextMarginRight - rectPaddingRight,\n            labelY\n          )\n          labelY += (techTooltipTextSize + techTooltipTextMarginBottom)\n        })\n      })\n    }\n    this._ctx.restore()\n  }\n\n  /**\n   * 获取蜡烛提示数据\n   * @param kLineData\n   * @param candleOptions\n   * @returns {*}\n   * @private\n   */\n  _getCandleTooltipData (kLineData, candleOptions) {\n    const baseValues = candleOptions.tooltip.values\n    let values = []\n    if (baseValues) {\n      if (isFunction(baseValues)) {\n        values = baseValues(kLineData, candleOptions) || []\n      } else if (isArray(baseValues)) {\n        values = baseValues\n      }\n    } else {\n      const pricePrecision = this._chartStore.pricePrecision()\n      const volumePrecision = this._chartStore.volumePrecision()\n      values = [\n        formatValue(kLineData, 'timestamp'),\n        formatValue(kLineData, 'open'),\n        formatValue(kLineData, 'close'),\n        formatValue(kLineData, 'high'),\n        formatValue(kLineData, 'low'),\n        formatValue(kLineData, 'volume')\n      ]\n      values.forEach((value, index) => {\n        switch (index) {\n          case 0: {\n            values[index] = formatDate(this._chartStore.timeScaleStore().dateTimeFormat(), value, 'YYYY-MM-DD hh:mm')\n            break\n          }\n          case values.length - 1: {\n            values[index] = formatBigNumber(formatPrecision(value, volumePrecision))\n            break\n          }\n          default: {\n            values[index] = formatPrecision(value, pricePrecision)\n            break\n          }\n        }\n      })\n    }\n    return values\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport CandleView from '../view/CandleView'\nimport CandleOverlayView from '../view/CandleOverlayView'\nimport TechnicalIndicatorWidget from './TechnicalIndicatorWidget'\n\nexport default class CandleWidget extends TechnicalIndicatorWidget {\n  _createMainView (container, props) {\n    return new CandleView(container, props.chartStore, props.xAxis, props.yAxis, props.paneId)\n  }\n\n  _createOverlayView (container, props) {\n    return new CandleOverlayView(container, props.chartStore, props.xAxis, props.yAxis, props.paneId)\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport TechnicalIndicatorPane from './TechnicalIndicatorPane'\nimport CandleWidget from '../widget/CandleWidget'\nimport YAxis from '../component/axis/YAxis'\n\nexport default class CandlePane extends TechnicalIndicatorPane {\n  _createYAxis (props) {\n    return new YAxis(props.chartStore, true, props.id)\n  }\n\n  _createMainWidget (container, props) {\n    return new CandleWidget({\n      container,\n      chartStore: props.chartStore,\n      xAxis: props.xAxis,\n      yAxis: this._yAxis,\n      paneId: props.id\n    })\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport View from './View'\nimport { renderHorizontalLine, renderVerticalLine } from '../renderer/line'\nimport { createFont } from '../utils/canvas'\n\nexport default class XAxisView extends View {\n  constructor (container, chartStore, xAxis) {\n    super(container, chartStore)\n    this._xAxis = xAxis\n  }\n\n  _draw () {\n    const xAxisOptions = this._chartStore.styleOptions().xAxis\n    if (xAxisOptions.show) {\n      this._drawAxisLine(xAxisOptions)\n      this._drawTickLines(xAxisOptions)\n      this._drawTickLabels(xAxisOptions)\n    }\n  }\n\n  _drawAxisLine (xAxisOptions) {\n    const xAxisLine = xAxisOptions.axisLine\n    if (!xAxisLine.show) {\n      return\n    }\n    this._ctx.strokeStyle = xAxisLine.color\n    this._ctx.lineWidth = xAxisLine.size\n    renderHorizontalLine(this._ctx, 0, 0, this._width)\n  }\n\n  _drawTickLines (xAxisOptions) {\n    const tickLine = xAxisOptions.tickLine\n    if (!tickLine.show) {\n      return\n    }\n    this._ctx.lineWidth = tickLine.size\n    this._ctx.strokeStyle = tickLine.color\n\n    const startY = xAxisOptions.axisLine.show ? xAxisOptions.axisLine.size : 0\n\n    const endY = startY + tickLine.length\n    this._xAxis.ticks().forEach(tick => {\n      renderVerticalLine(this._ctx, tick.x, startY, endY)\n    })\n  }\n\n  _drawTickLabels (xAxisOptions) {\n    const tickText = xAxisOptions.tickText\n    if (!tickText.show) {\n      return\n    }\n    const tickLine = xAxisOptions.tickLine\n\n    this._ctx.textBaseline = 'top'\n    this._ctx.font = createFont(tickText.size, tickText.weight, tickText.family)\n    this._ctx.textAlign = 'center'\n    this._ctx.fillStyle = tickText.color\n\n    let labelY = tickText.paddingTop\n    if (xAxisOptions.axisLine.show) {\n      labelY += (xAxisOptions.axisLine.size)\n    }\n    if (tickLine.show) {\n      labelY += (tickLine.length)\n    }\n    const ticks = this._xAxis.ticks()\n    const tickLength = ticks.length\n    for (let i = 0; i < tickLength; i++) {\n      this._ctx.fillText(ticks[i].v, ticks[i].x, labelY)\n    }\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport View from './View'\n\nimport { formatDate } from '../utils/format'\nimport { getTextRectWidth, getTextRectHeight } from '../utils/canvas'\nimport { renderStrokeFillRoundRect } from '../renderer/rect'\nimport { renderText } from '../renderer/text'\n\nexport default class XAxisOverlayView extends View {\n  constructor (container, chartStore, xAxis) {\n    super(container, chartStore)\n    this._xAxis = xAxis\n  }\n\n  _draw () {\n    this._drawCrosshairLabel()\n  }\n\n  _drawCrosshairLabel () {\n    const crosshair = this._chartStore.crosshairStore().get()\n    if (!crosshair.paneId) {\n      return\n    }\n    const crosshairOptions = this._chartStore.styleOptions().crosshair\n    const crosshairVerticalOptions = crosshairOptions.vertical\n    const crosshairVerticalTextOptions = crosshairVerticalOptions.text\n    if (\n      !crosshairOptions.show ||\n      !crosshairVerticalOptions.show ||\n      !crosshairVerticalTextOptions.show ||\n      crosshair.dataIndex !== crosshair.realDataIndex\n    ) {\n      return\n    }\n\n    const timestamp = crosshair.kLineData.timestamp\n    const text = formatDate(this._chartStore.timeScaleStore().dateTimeFormat(), timestamp, 'YYYY-MM-DD hh:mm')\n\n    const paddingLeft = crosshairVerticalTextOptions.paddingLeft\n    const paddingRight = crosshairVerticalTextOptions.paddingRight\n    const paddingTop = crosshairVerticalTextOptions.paddingTop\n    const borderSize = crosshairVerticalTextOptions.borderSize\n\n    const rectWidth = getTextRectWidth(this._ctx, text, crosshairVerticalTextOptions)\n    const rectHeight = getTextRectHeight(crosshairVerticalTextOptions)\n    const labelWidth = rectWidth - borderSize * 2 - paddingLeft - paddingRight\n\n    let labelX = crosshair.realX - labelWidth / 2\n\n    // 保证整个x轴上的提示文字总是完全显示\n    if (labelX < paddingLeft + borderSize) {\n      labelX = paddingLeft + borderSize\n    } else if (labelX > this._width - labelWidth - borderSize - paddingRight) {\n      labelX = this._width - labelWidth - borderSize - paddingRight\n    }\n\n    const rectX = labelX - borderSize - paddingLeft\n\n    renderStrokeFillRoundRect(\n      this._ctx,\n      crosshairVerticalTextOptions.backgroundColor,\n      crosshairVerticalTextOptions.borderColor,\n      borderSize,\n      rectX,\n      0,\n      rectWidth,\n      rectHeight,\n      crosshairVerticalTextOptions.borderRadius\n    )\n    // 绘制轴上的提示文字\n    this._ctx.textBaseline = 'top'\n    renderText(\n      this._ctx, crosshairVerticalTextOptions.color,\n      labelX, borderSize + paddingTop, text\n    )\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Widget from './Widget'\nimport XAxisView from '../view/XAxisView'\nimport XAxisOverlayView from '../view/XAxisOverlayView'\n\nexport default class XAxisWidget extends Widget {\n  _createMainView (container, props) {\n    return new XAxisView(container, props.chartStore, props.xAxis)\n  }\n\n  _createOverlayView (container, props) {\n    return new XAxisOverlayView(container, props.chartStore, props.xAxis)\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Axis from './Axis'\nimport { calcTextWidth, createFont } from '../../utils/canvas'\nimport { formatDate } from '../../utils/format'\nimport { isNumber } from '../../utils/typeChecks'\n\nexport default class XAxis extends Axis {\n  _computeMinMax () {\n    return { min: this._chartStore.timeScaleStore().from(), max: this._chartStore.timeScaleStore().to() - 1 }\n  }\n\n  _optimalMinMax ({ min, max }) {\n    const range = max - min + 1\n    return {\n      min, max, range, realMin: min, realMax: max, realRange: range\n    }\n  }\n\n  _optimalTicks (ticks) {\n    const optimalTicks = []\n    const tickLength = ticks.length\n    const dataList = this._chartStore.dataList()\n    if (tickLength > 0) {\n      const dateTimeFormat = this._chartStore.timeScaleStore().dateTimeFormat()\n      const tickText = this._chartStore.styleOptions().xAxis.tickText\n      this._measureCtx.font = createFont(tickText.size, tickText.weight, tickText.family)\n      const defaultLabelWidth = calcTextWidth(this._measureCtx, '00-00 00:00')\n      const pos = parseInt(ticks[0].v, 10)\n      const x = this.convertToPixel(pos)\n      let tickCountDif = 1\n      if (tickLength > 1) {\n        const nextPos = parseInt(ticks[1].v, 10)\n        const nextX = this.convertToPixel(nextPos)\n        const xDif = Math.abs(nextX - x)\n        if (xDif < defaultLabelWidth) {\n          tickCountDif = Math.ceil(defaultLabelWidth / xDif)\n        }\n      }\n      for (let i = 0; i < tickLength; i += tickCountDif) {\n        const pos = parseInt(ticks[i].v, 10)\n        const kLineData = dataList[pos]\n        const timestamp = kLineData.timestamp\n        let label = formatDate(dateTimeFormat, timestamp, 'hh:mm')\n        if (i !== 0) {\n          const prePos = parseInt(ticks[i - tickCountDif].v, 10)\n          const preKLineData = dataList[prePos]\n          const preTimestamp = preKLineData.timestamp\n          label = this._optimalTickLabel(dateTimeFormat, timestamp, preTimestamp) || label\n        }\n        const x = this.convertToPixel(pos)\n        optimalTicks.push({ v: label, x, oV: timestamp })\n      }\n      const optimalTickLength = optimalTicks.length\n      if (optimalTickLength === 1) {\n        optimalTicks[0].v = formatDate(dateTimeFormat, optimalTicks[0].oV, 'YYYY-MM-DD hh:mm')\n      } else {\n        const firstTimestamp = optimalTicks[0].oV\n        const secondTimestamp = optimalTicks[1].oV\n        if (optimalTicks[2]) {\n          const thirdV = optimalTicks[2].v\n          if (/^[0-9]{2}-[0-9]{2}$/.test(thirdV)) {\n            optimalTicks[0].v = formatDate(dateTimeFormat, firstTimestamp, 'MM-DD')\n          } else if (/^[0-9]{4}-[0-9]{2}$/.test(thirdV)) {\n            optimalTicks[0].v = formatDate(dateTimeFormat, firstTimestamp, 'YYYY-MM')\n          } else if (/^[0-9]{4}$/.test(thirdV)) {\n            optimalTicks[0].v = formatDate(dateTimeFormat, firstTimestamp, 'YYYY')\n          }\n        } else {\n          optimalTicks[0].v = this._optimalTickLabel(dateTimeFormat, firstTimestamp, secondTimestamp) || optimalTicks[0].v\n        }\n      }\n    }\n    return optimalTicks\n  }\n\n  _optimalTickLabel (dateTimeFormat, timestamp, comparedTimestamp) {\n    const year = formatDate(dateTimeFormat, timestamp, 'YYYY')\n    const month = formatDate(dateTimeFormat, timestamp, 'YYYY-MM')\n    const day = formatDate(dateTimeFormat, timestamp, 'MM-DD')\n    if (year !== formatDate(dateTimeFormat, comparedTimestamp, 'YYYY')) {\n      return year\n    } else if (month !== formatDate(dateTimeFormat, comparedTimestamp, 'YYYY-MM')) {\n      return month\n    } else if (day !== formatDate(dateTimeFormat, comparedTimestamp, 'MM-DD')) {\n      return day\n    }\n    return null\n  }\n\n  /**\n   * 获取自身高度\n   */\n  getSelfHeight () {\n    const stylOptions = this._chartStore.styleOptions()\n    const xAxisOptions = stylOptions.xAxis\n    const height = xAxisOptions.height\n    if (isNumber(height)) {\n      return height\n    }\n    const crosshairOptions = stylOptions.crosshair\n    let xAxisHeight = 0\n    if (xAxisOptions.show) {\n      if (xAxisOptions.axisLine.show) {\n        xAxisHeight += xAxisOptions.axisLine.size\n      }\n      if (xAxisOptions.tickLine.show) {\n        xAxisHeight += xAxisOptions.tickLine.length\n      }\n      if (xAxisOptions.tickText.show) {\n        xAxisHeight += (xAxisOptions.tickText.paddingTop + xAxisOptions.tickText.paddingBottom + xAxisOptions.tickText.size)\n      }\n    }\n    let crosshairVerticalTextHeight = 0\n    if (\n      crosshairOptions.show &&\n      crosshairOptions.vertical.show &&\n      crosshairOptions.vertical.text.show\n    ) {\n      crosshairVerticalTextHeight += (\n        crosshairOptions.vertical.text.paddingTop +\n        crosshairOptions.vertical.text.paddingBottom +\n        crosshairOptions.vertical.text.borderSize * 2 +\n        crosshairOptions.vertical.text.size\n      )\n    }\n    return Math.max(xAxisHeight, crosshairVerticalTextHeight)\n  }\n\n  convertFromPixel (pixel) {\n    return this._chartStore.timeScaleStore().coordinateToDataIndex(pixel)\n  }\n\n  convertToPixel (value) {\n    return this._chartStore.timeScaleStore().dataIndexToCoordinate(value)\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Pane from './Pane'\nimport XAxisWidget from '../widget/XAxisWidget'\nimport XAxis from '../component/axis/XAxis'\n\nexport default class XAxisPane extends Pane {\n  _initBefore () {\n    this._xAxis = new XAxis(this._chartStore)\n  }\n\n  _createMainWidget (container, props) {\n    return new XAxisWidget({ container, chartStore: props.chartStore, xAxis: this._xAxis })\n  }\n\n  xAxis () {\n    return this._xAxis\n  }\n\n  setWidth (mainWidgetWidth, yAxisWidgetWidth) {\n    super.setWidth(mainWidgetWidth, yAxisWidgetWidth)\n    this._xAxis.setWidth(mainWidgetWidth)\n  }\n\n  setHeight (height) {\n    super.setHeight(height)\n    this._xAxis.setHeight(height)\n  }\n}\n","class ID {\n  constructor () {\n    this._baseId = 1\n  }\n\n  next (prefix = '') {\n    const timestamp = new Date().getTime()\n    if (timestamp === this._prevIdTimestamp) {\n      ++this._baseId\n    } else {\n      this._baseId = 1\n    }\n    this._prevIdTimestamp = timestamp\n    return `${prefix}${timestamp}_${this._baseId}`\n  }\n}\n\nconst id = new ID()\n\nfunction createId (prefix) {\n  return id.next(prefix)\n}\n\nexport { createId }\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const EventType = {\n  MOUSE: 'mouse',\n  TOUCH: 'touch'\n}\n\nexport function isTouch (event) {\n  return event.type === EventType.TOUCH\n}\n\nexport function isMouse (event) {\n  return event.type === EventType.MOUSE\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The file comes from tradingview/lightweight-charts\n * https://www.tradingview.com/\n * Convert files from typescript to javascript.\n * Modified the class name.\n * The use of the source code of this file is also subject to the terms\n * and consitions of the license of \"lightweight-charts\" (Apache License V2, see\n * </licenses/LICENSE-lightweight-charts>).\n */\n\nimport { EventType } from './eventTypeChecks'\n\nconst MouseEventButton = {\n  LEFT: 0,\n  RIGHT: 2\n}\n\nconst DELAY_RESET_CLICK = 500\nconst DELAY_LONG_TAG = 600\n\nfunction getBoundingClientRect (element) {\n  return element.getBoundingClientRect() || { left: 0, top: 0 }\n}\n\nfunction isTouchEvent (event) {\n  return Boolean(event.touches)\n}\n\nfunction preventDefault (event) {\n  if (event.cancelable) {\n    event.preventDefault()\n  }\n}\n\nfunction mobileTouch () {\n  let touchEvent\n  if ('ontouchstart' in window) {\n    touchEvent = true\n  } else {\n    touchEvent = Boolean(window.DocumentTouch && document instanceof window.DocumentTouch)\n  }\n  return ('onorientationchange' in window) && (!!navigator.maxTouchPoints || !!navigator.msMaxTouchPoints || touchEvent)\n}\n\nfunction getDistance (p1, p2) {\n  const xDiff = p1.clientX - p2.clientX\n  const yDiff = p1.clientY - p2.clientY\n  return Math.sqrt(xDiff * xDiff + yDiff * yDiff)\n}\n\nexport default class EventBase {\n  constructor (target, eventHandler, options) {\n    this._target = target\n    this._handler = eventHandler\n    this._options = options\n\n    this._clickCount = 0\n    this._clickTimeoutId = null\n    this._longTapTimeoutId = null\n    this._longTapActive = false\n    this._mouseMoveStartPosition = null\n    this._moveExceededManhattanDistance = false\n    this._cancelClick = false\n    this._unsubscribeOutsideEvents = null\n    this._unsubscribeMousemove = null\n    this._unsubscribeRoot = null\n\n    this._startPinchMiddleCoordinate = null\n    this._startPinchDistance = 0\n    this._pinchPrevented = false\n    this._preventDragProcess = false\n\n    this._mousePressed = false\n\n    this._init()\n  }\n\n  setOptions (options = {}) {\n    this._options = { ...this.options, ...options }\n  }\n\n  destroy () {\n    if (this._unsubscribeOutsideEvents !== null) {\n      this._unsubscribeOutsideEvents()\n      this._unsubscribeOutsideEvents = null\n    }\n\n    if (this._unsubscribeMousemove !== null) {\n      this._unsubscribeMousemove()\n      this._unsubscribeMousemove = null\n    }\n\n    if (this._unsubscribeRoot !== null) {\n      this._unsubscribeRoot()\n      this._unsubscribeRoot = null\n    }\n\n    this._clearLongTapTimeout()\n    this._resetClickTimeout()\n  }\n\n  _mouseEnterHandler (enterEvent) {\n    if (this._unsubscribeMousemove) {\n      this._unsubscribeMousemove()\n    }\n\n    {\n      const boundMouseMoveHandler = this._mouseMoveHandler.bind(this)\n      const boundMouseWheelHandler = this._mouseWheelHandler.bind(this)\n      this._unsubscribeMousemove = () => {\n        this._target.removeEventListener('mousemove', boundMouseMoveHandler)\n        this._target.removeEventListener('wheel', boundMouseWheelHandler)\n      }\n      this._target.addEventListener('mousemove', boundMouseMoveHandler)\n      this._target.addEventListener('wheel', boundMouseWheelHandler, { passive: false })\n    }\n\n    if (isTouchEvent(enterEvent)) {\n      this._mouseMoveHandler(enterEvent)\n    }\n\n    const compatEvent = this._makeCompatEvent(enterEvent)\n    this._processEvent(compatEvent, this._handler.mouseEnterEvent)\n  }\n\n  _resetClickTimeout () {\n    if (this._clickTimeoutId !== null) {\n      clearTimeout(this._clickTimeoutId)\n    }\n\n    this._clickCount = 0\n    this._clickTimeoutId = null\n  }\n\n  _mouseMoveHandler (moveEvent) {\n    if (this._mousePressed && !isTouchEvent(moveEvent)) {\n      return\n    }\n\n    const compatEvent = this._makeCompatEvent(moveEvent)\n    this._processEvent(compatEvent, this._handler.mouseMoveEvent)\n  }\n\n  _mouseWheelHandler (wheelEvent) {\n    const compatEvent = this._makeCompatEvent(wheelEvent)\n    wheelEvent.localX = compatEvent.localX\n    wheelEvent.localY = compatEvent.localY\n    this._processEvent(wheelEvent, this._handler.mouseWheelEvent)\n  }\n\n  _mouseMoveWithDownHandler (moveEvent) {\n    if ('button' in moveEvent && moveEvent.button !== MouseEventButton.LEFT) {\n      return\n    }\n\n    if (this._startPinchMiddleCoordinate !== null) {\n      return\n    }\n\n    const isTouch = isTouchEvent(moveEvent)\n    if (this._preventDragProcess && isTouch) {\n      return\n    }\n\n    this._pinchPrevented = true\n\n    const compatEvent = this._makeCompatEvent(moveEvent)\n\n    const startMouseMovePos = this._mouseMoveStartPosition\n    const xOffset = Math.abs(startMouseMovePos.x - compatEvent.pageX)\n    const yOffset = Math.abs(startMouseMovePos.y - compatEvent.pageY)\n\n    const moveExceededManhattanDistance = xOffset + yOffset > 5\n\n    if (!moveExceededManhattanDistance && isTouch) {\n      return\n    }\n\n    if (moveExceededManhattanDistance && !this._moveExceededManhattanDistance && isTouch) {\n      // vertical drag is more important than horizontal drag\n      // because we scroll the page vertically often than horizontally\n      const correctedXOffset = xOffset * 0.5\n\n      // a drag can be only if touch page scroll isn't allowed\n      const isVertDrag = yOffset >= correctedXOffset && !this._options.treatVertTouchDragAsPageScroll\n      const isHorzDrag = correctedXOffset > yOffset && !this._options.treatHorzTouchDragAsPageScroll\n\n      // if drag event happened then we should revert preventDefault state to original one\n      // and try to process the drag event\n      // else we shouldn't prevent default of the event and ignore processing the drag event\n      if (!isVertDrag && !isHorzDrag) {\n        this._preventDragProcess = true\n      }\n    }\n\n    if (moveExceededManhattanDistance) {\n      this._moveExceededManhattanDistance = true\n\n      // if manhattan distance is more that 5 - we should cancel click event\n      this._cancelClick = true\n\n      if (isTouch) {\n        this._clearLongTapTimeout()\n      }\n    }\n\n    if (!this._preventDragProcess) {\n      this._processEvent(compatEvent, this._handler.pressedMouseMoveEvent)\n\n      // we should prevent default in case of touch only\n      // to prevent scroll of the page\n      if (isTouch) {\n        preventDefault(moveEvent)\n      }\n    }\n  }\n\n  _mouseUpHandler (mouseUpEvent) {\n    if ('button' in mouseUpEvent && mouseUpEvent.button !== MouseEventButton.LEFT) {\n      return\n    }\n    const compatEvent = this._makeCompatEvent(mouseUpEvent)\n\n    this._clearLongTapTimeout()\n\n    this._mouseMoveStartPosition = null\n\n    this._mousePressed = false\n\n    if (this._unsubscribeRoot) {\n      this._unsubscribeRoot()\n      this._unsubscribeRoot = null\n    }\n\n    if (isTouchEvent(mouseUpEvent)) {\n      this._mouseLeaveHandler(mouseUpEvent)\n    }\n\n    this._processEvent(compatEvent, this._handler.mouseUpEvent)\n    ++this._clickCount\n    if (this._clickTimeoutId && this._clickCount > 1) {\n      this._processEvent(compatEvent, this._handler.mouseDoubleClickEvent)\n      this._resetClickTimeout()\n    } else {\n      if (!this._cancelClick) {\n        this._processEvent(compatEvent, this._handler.mouseClickEvent)\n      }\n    }\n\n    // prevent safari's dblclick-to-zoom\n    // we handle mouseDoubleClickEvent here ourself\n    if (isTouchEvent(mouseUpEvent)) {\n      preventDefault(mouseUpEvent)\n\n      this._mouseLeaveHandler(mouseUpEvent)\n\n      if (mouseUpEvent.touches.length === 0) {\n        this._longTapActive = false\n      }\n    }\n  }\n\n  _clearLongTapTimeout () {\n    if (this._longTapTimeoutId === null) {\n      return\n    }\n\n    clearTimeout(this._longTapTimeoutId)\n    this._longTapTimeoutId = null\n  }\n\n  _mouseDownHandler (downEvent) {\n    if ('button' in downEvent && downEvent.button !== MouseEventButton.LEFT && downEvent.button !== MouseEventButton.RIGHT) {\n      return\n    }\n    const compatEvent = this._makeCompatEvent(downEvent)\n    if ('button' in downEvent && downEvent.button === MouseEventButton.RIGHT) {\n      this._processEvent(compatEvent, this._handler.mouseRightDownEvent)\n      return\n    }\n    this._cancelClick = false\n    this._moveExceededManhattanDistance = false\n    this._preventDragProcess = false\n\n    if (isTouchEvent(downEvent)) {\n      this._mouseEnterHandler(downEvent)\n    }\n\n    this._mouseMoveStartPosition = {\n      x: compatEvent.pageX,\n      y: compatEvent.pageY\n    }\n\n    if (this._unsubscribeRoot) {\n      this._unsubscribeRoot()\n      this._unsubscribeRoot = null\n    }\n\n    {\n      const boundMouseMoveWithDownHandler = this._mouseMoveWithDownHandler.bind(this)\n      const boundMouseUpHandler = this._mouseUpHandler.bind(this)\n      const rootElement = this._target.ownerDocument.documentElement\n\n      this._unsubscribeRoot = () => {\n        rootElement.removeEventListener('touchmove', boundMouseMoveWithDownHandler)\n        rootElement.removeEventListener('touchend', boundMouseUpHandler)\n\n        rootElement.removeEventListener('mousemove', boundMouseMoveWithDownHandler)\n        rootElement.removeEventListener('mouseup', boundMouseUpHandler)\n      }\n\n      rootElement.addEventListener('touchmove', boundMouseMoveWithDownHandler, { passive: false })\n      rootElement.addEventListener('touchend', boundMouseUpHandler, { passive: false })\n\n      this._clearLongTapTimeout()\n\n      if (isTouchEvent(downEvent) && downEvent.touches.length === 1) {\n        this._longTapTimeoutId = setTimeout(this._longTapHandler.bind(this, downEvent), DELAY_LONG_TAG)\n      } else {\n        rootElement.addEventListener('mousemove', boundMouseMoveWithDownHandler)\n        rootElement.addEventListener('mouseup', boundMouseUpHandler)\n      }\n    }\n\n    this._mousePressed = true\n    this._processEvent(compatEvent, this._handler.mouseDownEvent)\n\n    if (!this._clickTimeoutId) {\n      this._clickCount = 0\n      this._clickTimeoutId = setTimeout(this._resetClickTimeout.bind(this), DELAY_RESET_CLICK)\n    }\n  }\n\n  _init () {\n    this._target.addEventListener('mouseenter', this._mouseEnterHandler.bind(this))\n\n    this._target.addEventListener('touchcancel', this._clearLongTapTimeout.bind(this))\n\n    {\n      const doc = this._target.ownerDocument\n\n      const outsideHandler = (event) => {\n        if (!this._handler.mouseDownOutsideEvent) {\n          return\n        }\n        if (event.target && this._target.contains(event.target)) {\n          return\n        }\n        this._handler.mouseDownOutsideEvent()\n      }\n\n      this._unsubscribeOutsideEvents = () => {\n        doc.removeEventListener('mousedown', outsideHandler)\n        doc.removeEventListener('touchstart', outsideHandler)\n      }\n\n      doc.addEventListener('mousedown', outsideHandler)\n      doc.addEventListener('touchstart', outsideHandler, { passive: true })\n    }\n\n    this._target.addEventListener('mouseleave', this._mouseLeaveHandler.bind(this))\n\n    this._target.addEventListener('touchstart', this._mouseDownHandler.bind(this), { passive: true })\n    if (!mobileTouch()) {\n      this._target.addEventListener('mousedown', this._mouseDownHandler.bind(this))\n    }\n\n    this._initPinch()\n\n    // Hey mobile Safari, what's up?\n    // If mobile Safari doesn't have any touchmove handler with passive=false\n    // it treats a touchstart and the following touchmove events as cancelable=false,\n    // so we can't prevent them (as soon we subscribe on touchmove inside handler of touchstart).\n    // And we'll get scroll of the page along with chart's one instead of only chart's scroll.\n    this._target.addEventListener('touchmove', () => {}, { passive: false })\n  }\n\n  _initPinch () {\n    if (this._handler.pinchStartEvent === undefined &&\n      this._handler.pinchEvent === undefined &&\n      this._handler.pinchEndEvent === undefined\n    ) {\n      return\n    }\n\n    this._target.addEventListener(\n      'touchstart',\n      (event) => this._checkPinchState(event.touches),\n      { passive: true }\n    )\n\n    this._target.addEventListener(\n      'touchmove',\n      (event) => {\n        if (event.touches.length !== 2 || this._startPinchMiddleCoordinate === null) {\n          return\n        }\n\n        if (this._handler.pinchEvent !== undefined) {\n          const currentDistance = getDistance(event.touches[0], event.touches[1])\n          const scale = currentDistance / this._startPinchDistance\n          this._handler.pinchEvent(this._startPinchMiddleCoordinate, scale)\n          preventDefault(event)\n        }\n      },\n      { passive: false }\n    )\n\n    this._target.addEventListener('touchend', (event) => {\n      this._checkPinchState(event.touches)\n    })\n  }\n\n  _checkPinchState (touches) {\n    if (touches.length === 1) {\n      this._pinchPrevented = false\n    }\n\n    if (touches.length !== 2 || this._pinchPrevented || this._longTapActive) {\n      this._stopPinch()\n    } else {\n      this._startPinch(touches)\n    }\n  }\n\n  _startPinch (touches) {\n    const box = getBoundingClientRect(this._target)\n    this._startPinchMiddleCoordinate = {\n      x: ((touches[0].clientX - box.left) + (touches[1].clientX - box.left)) / 2,\n      y: ((touches[0].clientY - box.top) + (touches[1].clientY - box.top)) / 2\n    }\n\n    this._startPinchDistance = getDistance(touches[0], touches[1])\n\n    if (this._handler.pinchStartEvent !== undefined) {\n      this._handler.pinchStartEvent()\n    }\n\n    this._clearLongTapTimeout()\n  }\n\n  _stopPinch () {\n    if (this._startPinchMiddleCoordinate === null) {\n      return\n    }\n\n    this._startPinchMiddleCoordinate = null\n\n    if (this._handler.pinchEndEvent !== undefined) {\n      this._handler.pinchEndEvent()\n    }\n  }\n\n  _mouseLeaveHandler (event) {\n    if (this._unsubscribeMousemove) {\n      this._unsubscribeMousemove()\n    }\n    const compatEvent = this._makeCompatEvent(event)\n    this._processEvent(compatEvent, this._handler.mouseLeaveEvent)\n  }\n\n  _longTapHandler (event) {\n    const compatEvent = this._makeCompatEvent(event)\n    this._processEvent(compatEvent, this._handler.longTapEvent)\n    this._cancelClick = true\n\n    // long tap is active untill touchend event with 0 touches occured\n    this._longTapActive = true\n  }\n\n  _processEvent (event, callback) {\n    if (!callback) {\n      return\n    }\n    callback.call(this._handler, event)\n  }\n\n  _makeCompatEvent (event) {\n  // TouchEvent has no clientX/Y coordinates:\n  // We have to use the last Touch instead\n    let eventLike\n    if ('touches' in event && event.touches.length) {\n      eventLike = event.touches[0]\n    } else if ('changedTouches' in event && event.changedTouches.length) {\n      eventLike = event.changedTouches[0]\n    } else {\n      eventLike = event\n    }\n\n    const box = getBoundingClientRect(this._target)\n\n    return {\n      clientX: eventLike.clientX,\n      clientY: eventLike.clientY,\n      pageX: eventLike.pageX,\n      pageY: eventLike.pageY,\n      screenX: eventLike.screenX,\n      screenY: eventLike.screenY,\n      localX: eventLike.clientX - box.left,\n      localY: eventLike.clientY - box.top,\n\n      ctrlKey: event.ctrlKey,\n      altKey: event.altKey,\n      shiftKey: event.shiftKey,\n      metaKey: event.metaKey,\n\n      type: event.type.startsWith('mouse') ? EventType.MOUSE : EventType.TOUCH,\n\n      target: eventLike.target,\n      view: event.view\n    }\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport EventBase from '../event/EventBase'\nimport { getPixelRatio } from '../utils/canvas'\nimport { isValid } from '../utils/typeChecks'\nimport { createElement } from '../utils/element'\n\nexport default class SeparatorPane {\n  constructor (container, chartStore, topPaneId, bottomPaneId, dragEnabled, dragEventHandler) {\n    this._chartStore = chartStore\n    this._topPaneId = topPaneId\n    this._bottomPaneId = bottomPaneId\n    this._dragEnabled = dragEnabled\n    this._width = 0\n    this._offsetLeft = 0\n    this._dragEventHandler = dragEventHandler\n    this._dragFlag = false\n    this._initElement(container)\n    this._initEvent(dragEnabled)\n  }\n\n  /**\n   * 初始化dom元素\n   * @param container\n   * @private\n   */\n  _initElement (container) {\n    this._container = container\n    this._wrapper = createElement('div', {\n      margin: '0', padding: '0', position: 'relative', boxSizing: 'border-box'\n    })\n    this._element = createElement('div', {\n      width: '100%',\n      height: '7px',\n      margin: '0',\n      padding: '0',\n      position: 'absolute',\n      top: '-3px',\n      zIndex: '20',\n      boxSizing: 'border-box'\n    })\n    this._wrapper.appendChild(this._element)\n    const lastElement = container.lastChild\n    if (lastElement) {\n      container.insertBefore(this._wrapper, lastElement)\n    } else {\n      container.appendChild(this._wrapper)\n    }\n  }\n\n  /**\n   * 初始化事件\n   * @param dragEnabled\n   * @private\n   */\n  _initEvent (dragEnabled) {\n    if (dragEnabled) {\n      this._element.style.cursor = 'ns-resize'\n      this._dragEvent = new EventBase(this._element, {\n        mouseDownEvent: this._mouseDownEvent.bind(this),\n        mouseUpEvent: this._mouseUpEvent.bind(this),\n        pressedMouseMoveEvent: this._pressedMouseMoveEvent.bind(this),\n        mouseEnterEvent: this._mouseEnterEvent.bind(this),\n        mouseLeaveEvent: this._mouseLeaveEvent.bind(this)\n      }, {\n        treatVertTouchDragAsPageScroll: false,\n        treatHorzTouchDragAsPageScroll: true\n      })\n    }\n  }\n\n  _mouseDownEvent (event) {\n    this._dragFlag = true\n    this._startY = event.pageY\n    this._dragEventHandler.startDrag(this._topPaneId, this._bottomPaneId)\n  }\n\n  _mouseUpEvent () {\n    this._dragFlag = false\n    this._chartStore.setDragPaneFlag(false)\n  }\n\n  _pressedMouseMoveEvent (event) {\n    const dragDistance = event.pageY - this._startY\n    this._dragEventHandler.drag(dragDistance, this._topPaneId, this._bottomPaneId)\n    this._chartStore.setDragPaneFlag(true)\n    this._chartStore.crosshairStore().set()\n  }\n\n  _mouseEnterEvent () {\n    const separatorOptions = this._chartStore.styleOptions().separator\n    this._element.style.background = separatorOptions.activeBackgroundColor\n    // this._chartStore.setDragPaneFlag(true)\n    this._chartStore.crosshairStore().set()\n  }\n\n  _mouseLeaveEvent () {\n    if (!this._dragFlag) {\n      this._element.style.background = null\n      this._chartStore.setDragPaneFlag(false)\n    }\n  }\n\n  /**\n   * 获取高度\n   * @returns {number}\n   */\n  height () {\n    return this._wrapper.offsetHeight\n  }\n\n  /**\n   * 设置尺寸\n   * 用于fill属性\n   * @param offsetLeft\n   * @param width\n   */\n  setSize (offsetLeft, width) {\n    this._offsetLeft = offsetLeft\n    this._width = width\n    this.invalidate()\n  }\n\n  /**\n   * 设置是否可以拖拽\n   * @param dragEnabled\n   */\n  setDragEnabled (dragEnabled) {\n    if (dragEnabled !== this._dragEnabled) {\n      this._dragEnabled = dragEnabled\n      if (dragEnabled) {\n        !this._dragEvent && this._initEvent(dragEnabled)\n      } else {\n        this._element.style.cursor = 'default'\n        this._dragEvent && this._dragEvent.destroy()\n        this._dragEvent = null\n      }\n    }\n  }\n\n  /**\n   * 顶部paneId\n   * @return {*}\n   */\n  topPaneId () {\n    return this._topPaneId\n  }\n\n  /**\n   * 底部paneId\n   * @return {*}\n   */\n  bottomPaneId () {\n    return this._bottomPaneId\n  }\n\n  /**\n   * 更新上下两个图表的索引\n   * @param topPaneId\n   * @param bottomPaneId\n   */\n  updatePaneId (topPaneId, bottomPaneId) {\n    if (isValid(topPaneId)) {\n      this._topPaneId = topPaneId\n    }\n    if (isValid(bottomPaneId)) {\n      this._bottomPaneId = bottomPaneId\n    }\n  }\n\n  /**\n   * 刷新\n   */\n  invalidate () {\n    const separatorOptions = this._chartStore.styleOptions().separator\n    this._element.style.top = `${-Math.floor((7 - separatorOptions.size) / 2)}px`\n    this._wrapper.style.backgroundColor = separatorOptions.color\n    this._wrapper.style.height = `${separatorOptions.size}px`\n    this._wrapper.style.marginLeft = `${separatorOptions.fill ? 0 : this._offsetLeft}px`\n    this._wrapper.style.width = separatorOptions.fill ? '100%' : `${this._width}px`\n  }\n\n  /**\n   * 将图形转换成图片\n   * @returns {HTMLCanvasElement}\n   */\n  getImage () {\n    const separatorOptions = this._chartStore.styleOptions().separator\n    const width = this._wrapper.offsetWidth\n    const height = separatorOptions.size\n    const canvas = createElement('canvas', {\n      width: `${width}px`,\n      height: `${height}px`,\n      boxSizing: 'border-box'\n    })\n    const ctx = canvas.getContext('2d')\n    const pixelRatio = getPixelRatio(canvas)\n    canvas.width = width * pixelRatio\n    canvas.height = height * pixelRatio\n    ctx.scale(pixelRatio, pixelRatio)\n    ctx.fillStyle = separatorOptions.color\n    ctx.fillRect(this._offsetLeft, 0, width, height)\n    return canvas\n  }\n\n  /**\n   * 销毁\n   */\n  destroy () {\n    if (this._dragEvent) {\n      this._dragEvent.destroy()\n    }\n    this._container.removeChild(this._wrapper)\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default class EventHandler {\n  constructor (chartStore) {\n    this._chartStore = chartStore\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport EventHandler from './EventHandler'\n\nimport { isMouse, isTouch } from './eventTypeChecks'\n\nimport { requestAnimationFrame, cancelAnimationFrame } from '../utils/compatible'\n\nconst TOUCH_MIN_RADIUS = 10\n\nexport default class ZoomScrollEventHandler extends EventHandler {\n  constructor (chartStore) {\n    super(chartStore)\n    // 惯性滚动开始时间\n    this._flingStartTime = null\n    // 惯性滚动定时器\n    this._flingScrollTimerId = null\n    // 开始滚动时坐标点\n    this._startScrollCoordinate = null\n    // 开始触摸时坐标\n    this._touchCoordinate = null\n    // 是否是取消了十字光标\n    this._touchCancelCrosshair = false\n    // 是否缩放过\n    this._touchZoomed = false\n    // 用来记录捏合缩放的尺寸\n    this._pinchScale = 1\n  }\n\n  pinchStartEvent () {\n    this._pinchScale = 1\n    this._touchZoomed = true\n  }\n\n  pinchEvent (middleCoordinate, scale) {\n    const zoomScale = (scale - this._pinchScale) * 5\n    this._pinchScale = scale\n    this._chartStore.timeScaleStore().zoom(zoomScale, middleCoordinate)\n  }\n\n  mouseUpEvent () {\n    this._startScrollCoordinate = null\n  }\n\n  mouseLeaveEvent (event) {\n    if (isTouch(event)) {\n      if (this._startScrollCoordinate) {\n        const time = new Date().getTime() - this._flingStartTime\n        const distance = event.localX - this._startScrollCoordinate.x\n        let v = (distance) / (time > 0 ? time : 1) * 20\n        if (time < 200 && Math.abs(v) > 0) {\n          const flingScroll = () => {\n            this._flingScrollTimerId = requestAnimationFrame(() => {\n              this._chartStore.timeScaleStore().startScroll()\n              this._chartStore.timeScaleStore().scroll(v)\n              v = v * (1 - 0.025)\n              if (Math.abs(v) < 1) {\n                if (this._flingScrollTimerId) {\n                  cancelAnimationFrame(this._flingScrollTimerId)\n                  this._flingScrollTimerId = null\n                }\n              } else {\n                flingScroll()\n              }\n            })\n          }\n          flingScroll()\n        }\n      }\n    } else {\n      this._startScrollCoordinate = null\n      if (isMouse(event)) {\n        this._chartStore.crosshairStore().set()\n      }\n    }\n  }\n\n  mouseMoveEvent (event) {\n    if (!isMouse(event)) {\n      return\n    }\n    this._chartStore.crosshairStore().set({ x: event.localX, y: event.paneY, paneId: event.paneId })\n  }\n\n  mouseWheelEvent (event) {\n    if (Math.abs(event.deltaX) > Math.abs(event.deltaY)) {\n      if (event.cancelable) {\n        event.preventDefault()\n      }\n      if (Math.abs(event.deltaX) === 0) {\n        return\n      }\n      this._chartStore.timeScaleStore().startScroll()\n      this._chartStore.timeScaleStore().scroll(-event.deltaX)\n    } else {\n      let deltaY = -(event.deltaY / 100)\n      if (deltaY === 0) {\n        return\n      }\n      if (event.cancelable) {\n        event.preventDefault()\n      }\n\n      switch (event.deltaMode) {\n        case event.DOM_DELTA_PAGE:\n          deltaY *= 120\n          break\n\n        case event.DOM_DELTA_LINE:\n          deltaY *= 32\n          break\n      }\n\n      if (deltaY !== 0) {\n        const scale = Math.sign(deltaY) * Math.min(1, Math.abs(deltaY))\n        this._chartStore.timeScaleStore().zoom(scale, { x: event.localX, y: event.localY })\n      }\n    }\n  }\n\n  mouseClickEvent (event) {\n    if (!isTouch(event)) {\n      return\n    }\n    if (!this._touchCoordinate && !this._touchCancelCrosshair && !this._touchZoomed) {\n      this._touchCoordinate = { x: event.localX, y: event.localY }\n      this._chartStore.crosshairStore().set({ x: event.localX, y: event.paneY, paneId: event.paneId })\n    }\n  }\n\n  mouseDownEvent (event) {\n    if (this._flingScrollTimerId) {\n      cancelAnimationFrame(this._flingScrollTimerId)\n      this._flingScrollTimerId = null\n    }\n    this._flingStartTime = new Date().getTime()\n    this._startScrollCoordinate = { x: event.localX, y: event.localY }\n    this._chartStore.timeScaleStore().startScroll()\n    if (isTouch(event)) {\n      this._touchZoomed = false\n      if (this._touchCoordinate) {\n        const xDif = event.localX - this._touchCoordinate.x\n        const yDif = event.localY - this._touchCoordinate.y\n        const radius = Math.sqrt(xDif * xDif + yDif * yDif)\n        if (radius < TOUCH_MIN_RADIUS) {\n          this._touchCoordinate = { x: event.localX, y: event.localY }\n          this._chartStore.crosshairStore().set({ x: event.localX, y: event.paneY, paneId: event.paneId })\n        } else {\n          this._touchCancelCrosshair = true\n          this._touchCoordinate = null\n          this._chartStore.crosshairStore().set()\n        }\n      } else {\n        this._touchCancelCrosshair = false\n      }\n    }\n  }\n\n  pressedMouseMoveEvent (event) {\n    let crosshair = { x: event.localX, y: event.paneY, paneId: event.paneId }\n    if (isTouch(event)) {\n      if (this._touchCoordinate) {\n        this._touchCoordinate = { x: event.localX, y: event.localY }\n        this._chartStore.crosshairStore().set(crosshair)\n        return\n      } else {\n        crosshair = null\n      }\n    }\n    if (this._startScrollCoordinate) {\n      const distance = event.localX - this._startScrollCoordinate.x\n      this._chartStore.timeScaleStore().scroll(distance, crosshair)\n    }\n  }\n\n  longTapEvent (event) {\n    if (!isTouch(event)) {\n      return\n    }\n    this._touchCoordinate = { x: event.localX, y: event.localY }\n    this._chartStore.crosshairStore().set({ x: event.localX, y: event.paneY, paneId: event.paneId })\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport EventHandler from './EventHandler'\nimport { isMouse, isTouch } from './eventTypeChecks'\n\nimport InvalidateLevel from '../enum/InvalidateLevel'\nimport { ShapeEventOperateElement } from '../component/overlay/Shape'\n\nexport default class OverlayEventHandler extends EventHandler {\n  constructor (chartStore, yAxis) {\n    super(chartStore)\n    this._yAxis = yAxis\n  }\n\n  /**\n   * 处理覆盖物鼠标hover事件\n   * @param overlays\n   * @param preHoverOperate\n   * @param coordinate\n   * @param event\n   * @return {*}\n   * @private\n   */\n  _performOverlayMouseHover (overlays, preHoverOperate, coordinate, event) {\n    let hoverOperate\n    if (overlays) {\n      for (const overlay of overlays) {\n        hoverOperate = overlay.checkEventCoordinateOn(coordinate)\n        if (hoverOperate) {\n          break\n        }\n      }\n      if (!hoverOperate || preHoverOperate.id !== hoverOperate.id) {\n        if (preHoverOperate.id && preHoverOperate.instance && isMouse(event)) {\n          preHoverOperate.instance.onMouseLeave({\n            id: preHoverOperate.id,\n            points: preHoverOperate.instance.points(),\n            event\n          })\n        }\n        if (hoverOperate && hoverOperate.id !== preHoverOperate.id && hoverOperate.instance && isMouse(event)) {\n          hoverOperate.instance.onMouseEnter({\n            id: hoverOperate.id,\n            points: hoverOperate.instance.points(),\n            event\n          })\n        }\n      }\n    }\n    return hoverOperate\n  }\n\n  /**\n   * 鼠标抬起事件\n   */\n  mouseUpEvent () {\n    this._chartStore.shapeStore().updatePressedInstance()\n  }\n\n  mouseMoveEvent (event) {\n    if (isMouse(event)) {\n      if (this._waitingForMouseMove) {\n        return false\n      }\n      this._waitingForMouseMove = true\n      const coordinate = { x: event.localX, y: event.paneY }\n      const { instance, paneId } = this._chartStore.shapeStore().progressInstance()\n      let shapeHoverOperate\n      let shapeClickOperate\n      let annotationHoverOperate\n      if (instance && instance.isDrawing()) {\n        if (event.paneId) {\n          if (instance.isStart()) {\n            this._chartStore.shapeStore().updateProgressInstance(this._yAxis(event.paneId), event.paneId)\n          }\n          if (paneId === event.paneId) {\n            instance.mouseMoveForDrawing(coordinate, event)\n          }\n          shapeHoverOperate = {\n            id: instance.id(),\n            element: ShapeEventOperateElement.POINT,\n            elementIndex: instance.points().length - 1\n          }\n        }\n        shapeClickOperate = {\n          id: '',\n          element: ShapeEventOperateElement.NONE,\n          elementIndex: -1\n        }\n      } else {\n        const annotations = this._chartStore.annotationStore().get(event.paneId)\n        const shapes = this._chartStore.shapeStore().instances(event.paneId)\n        const prevShapeHoverOperate = this._chartStore.shapeStore().eventOperate().hover\n        const prevAnnotationHoverOperate = this._chartStore.annotationStore().eventOperate()\n        shapeHoverOperate = this._performOverlayMouseHover(shapes, prevShapeHoverOperate, coordinate, event)\n        annotationHoverOperate = this._performOverlayMouseHover(annotations, prevAnnotationHoverOperate, coordinate, event)\n      }\n      this._chartStore.shapeStore().setEventOperate({\n        hover: shapeHoverOperate || {\n          id: '',\n          element: ShapeEventOperateElement.NONE,\n          elementIndex: -1\n        },\n        click: shapeClickOperate\n      })\n      this._chartStore.annotationStore().setEventOperate(annotationHoverOperate || { id: '' })\n      this._waitingForMouseMove = false\n    }\n  }\n\n  /**\n   * 鼠标按下事件\n   * @param event\n   */\n  mouseDownEvent (event) {\n    const coordinate = { x: event.localX, y: event.paneY }\n    const { instance, paneId } = this._chartStore.shapeStore().progressInstance()\n    let shapeHoverOperate = {\n      id: '',\n      element: ShapeEventOperateElement.NONE,\n      elementIndex: -1\n    }\n    let progressShapePaneId = paneId\n    let shapeClickOperate\n    if (instance && instance.isDrawing()) {\n      if (isTouch(event)) {\n        if (instance.isStart()) {\n          this._chartStore.shapeStore().updateProgressInstance(this._yAxis(event.paneId), event.paneId)\n          progressShapePaneId = event.paneId\n        }\n        if (progressShapePaneId === event.paneId) {\n          // 移动端添加点数据到实例\n          instance.mouseMoveForDrawing(coordinate, event)\n        }\n      }\n      if (progressShapePaneId === event.paneId) {\n        instance.mouseLeftButtonDownForDrawing()\n        shapeClickOperate = {\n          id: instance.id(),\n          element: ShapeEventOperateElement.POINT,\n          elementIndex: instance.points().length - 1\n        }\n        shapeHoverOperate = {\n          id: instance.id(),\n          element: ShapeEventOperateElement.POINT,\n          elementIndex: instance.points().length - 1\n        }\n      }\n    } else {\n      const shapes = this._chartStore.shapeStore().instances(event.paneId)\n      for (const shape of shapes) {\n        shapeClickOperate = shape.checkEventCoordinateOn(coordinate)\n        if (shapeClickOperate) {\n          this._chartStore.shapeStore().updatePressedInstance(shape, event.paneId, shapeClickOperate.element)\n          if (shapeClickOperate.element === ShapeEventOperateElement.POINT) {\n            shapeHoverOperate = {\n              ...shapeClickOperate\n            }\n          } else {\n            shape.startPressedOtherMove(coordinate)\n          }\n          shape.onClick({\n            id: shapeClickOperate.id,\n            points: shape.points(),\n            event\n          })\n          break\n        }\n      }\n      const visibleAnnotations = this._chartStore.annotationStore().get(event.paneId)\n      if (visibleAnnotations) {\n        for (const an of visibleAnnotations) {\n          const annotationOperate = an.checkEventCoordinateOn(coordinate)\n          if (annotationOperate) {\n            an.onClick({\n              id: annotationOperate.id,\n              points: an.points(),\n              event\n            })\n            break\n          }\n        }\n      }\n    }\n    const shapeOperateValid = this._chartStore.shapeStore().setEventOperate({\n      hover: shapeHoverOperate,\n      click: shapeClickOperate || {\n        id: '',\n        element: ShapeEventOperateElement.NONE,\n        elementIndex: -1\n      }\n    })\n    if (shapeOperateValid) {\n      this._chartStore.invalidate(InvalidateLevel.OVERLAY)\n    }\n  }\n\n  mouseRightDownEvent (event) {\n    const { instance } = this._chartStore.shapeStore().progressInstance()\n    let removeShape\n    if (instance) {\n      removeShape = instance\n    } else {\n      const shapes = this._chartStore.shapeStore().instances(event.paneId)\n      removeShape = shapes.find(s => s.checkEventCoordinateOn({ x: event.localX, y: event.paneY }))\n    }\n    if (removeShape && !removeShape.onRightClick({ id: removeShape.id(), points: removeShape.points(), event })) {\n      this._chartStore.shapeStore().removeInstance(removeShape.id())\n    }\n    const visibleAnnotations = this._chartStore.annotationStore().get(event.paneId)\n    if (visibleAnnotations) {\n      const annotation = visibleAnnotations.find(an => an.checkEventCoordinateOn({ x: event.localX, y: event.paneY }))\n      if (annotation) {\n        annotation.onRightClick({ id: annotation.id(), points: annotation.points(), event })\n      }\n    }\n  }\n\n  pressedMouseMoveEvent (event) {\n    const { instance, paneId, element } = this._chartStore.shapeStore().pressedInstance()\n    if (instance && paneId === event.paneId) {\n      const coordinate = { x: event.localX, y: event.paneY }\n      if (element === ShapeEventOperateElement.POINT) {\n        instance.mousePressedPointMove(coordinate, event)\n      } else {\n        instance.mousePressedOtherMove(coordinate, event)\n      }\n      this._chartStore.crosshairStore().set({ x: event.localX, y: event.paneY, paneId: event.paneId })\n    }\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport EventHandler from './EventHandler'\n\nconst KeyBoardCode = {\n  EQUAL: 'Equal',\n  MINUS: 'Minus',\n  ARROW_LEFT: 'ArrowLeft',\n  ARROW_RIGHT: 'ArrowRight'\n}\n\nexport default class KeyBoardEventHandler extends EventHandler {\n  /**\n   * 键盘事件\n   * @param event\n   */\n  keyBoardDownEvent (event) {\n    if (event.shiftKey) {\n      switch (event.code) {\n        case KeyBoardCode.EQUAL: {\n          this._chartStore.timeScaleStore().zoom(0.5)\n          break\n        }\n        case KeyBoardCode.MINUS: {\n          this._chartStore.timeScaleStore().zoom(-0.5)\n          break\n        }\n        case KeyBoardCode.ARROW_LEFT: {\n          this._chartStore.timeScaleStore().startScroll()\n          this._chartStore.timeScaleStore().scroll(-3 * this._chartStore.timeScaleStore().dataSpace())\n          break\n        }\n        case KeyBoardCode.ARROW_RIGHT: {\n          this._chartStore.timeScaleStore().startScroll()\n          this._chartStore.timeScaleStore().scroll(3 * this._chartStore.timeScaleStore().dataSpace())\n          break\n        }\n        default: {\n          break\n        }\n      }\n    }\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport EventBase from './EventBase'\nimport ZoomScrollEventHandler from './ZoomScrollEventHandler'\nimport OverlayEventHandler from './OverlayEventHandler'\nimport KeyBoardEventHandler from './KeyBoardEventHandler'\n\nimport { isTouch } from './eventTypeChecks'\n\nexport default class ChartEvent {\n  constructor (target, chartStore, yAxis) {\n    this._target = target\n    this._chartStore = chartStore\n    this._chartContentLeftRight = {}\n    this._chartContentTopBottom = {}\n    this._paneContentSize = {}\n    this._event = new EventBase(this._target, {\n      pinchStartEvent: this._pinchStartEvent.bind(this),\n      pinchEvent: this._pinchEvent.bind(this),\n      mouseUpEvent: this._mouseUpEvent.bind(this),\n      mouseClickEvent: this._mouseClickEvent.bind(this),\n      mouseDownEvent: this._mouseDownEvent.bind(this),\n      mouseRightDownEvent: this._mouseRightDownEvent.bind(this),\n      mouseLeaveEvent: this._mouseLeaveEvent.bind(this),\n      mouseMoveEvent: this._mouseMoveEvent.bind(this),\n      mouseWheelEvent: this._mouseWheelEvent.bind(this),\n      pressedMouseMoveEvent: this._pressedMouseMoveEvent.bind(this),\n      longTapEvent: this._longTapEvent.bind(this)\n    }, {\n      treatVertTouchDragAsPageScroll: true,\n      treatHorzTouchDragAsPageScroll: false\n    })\n    this._boundKeyBoardDownEvent = this._keyBoardDownEvent.bind(this)\n    this._target.addEventListener('keydown', this._boundKeyBoardDownEvent)\n    this._boundContextMenuEvent = (e) => { e.preventDefault() }\n    this._target.addEventListener('contextmenu', this._boundContextMenuEvent, false)\n    this._zoomScrollEventHandler = new ZoomScrollEventHandler(chartStore)\n    this._overlayEventHandler = new OverlayEventHandler(chartStore, yAxis)\n    this._keyBoardEventHandler = new KeyBoardEventHandler(chartStore)\n  }\n\n  _keyBoardDownEvent (event) {\n    this._keyBoardEventHandler.keyBoardDownEvent(event)\n  }\n\n  _pinchStartEvent () {\n    this._zoomScrollEventHandler.pinchStartEvent()\n  }\n\n  _pinchEvent (middleCoordinate, scale) {\n    this._zoomScrollEventHandler.pinchEvent(middleCoordinate, scale)\n  }\n\n  _mouseUpEvent (event) {\n    if (this._checkEventInChartContent(event)) {\n      this._target.style.cursor = 'crosshair'\n    }\n    this._zoomScrollEventHandler.mouseUpEvent(event)\n    if (this._shouldPerformOverlayEvent()) {\n      this._overlayEventHandler.mouseUpEvent(event)\n    }\n  }\n\n  _mouseLeaveEvent (event) {\n    this._zoomScrollEventHandler.mouseLeaveEvent(event)\n  }\n\n  _mouseMoveEvent (event) {\n    // 当事件目标是在容器内部元素时，不出来move事件\n    // 等待寻找最优解\n    if (event.target instanceof HTMLCanvasElement) {\n      if (this._checkEventInChartContent(event)) {\n        this._target.style.cursor = 'crosshair'\n        const compatEvent = this._compatChartEvent(event, true)\n        if (this._shouldPerformOverlayEvent()) {\n          this._overlayEventHandler.mouseMoveEvent(compatEvent)\n        }\n        if (!this._chartStore.dragPaneFlag()) {\n          this._zoomScrollEventHandler.mouseMoveEvent(compatEvent)\n        }\n      } else {\n        this._target.style.cursor = 'default'\n        this._zoomScrollEventHandler.mouseLeaveEvent(event)\n      }\n    } else {\n      this._target.style.cursor = 'default'\n      this._chartStore.crosshairStore().set()\n    }\n  }\n\n  _mouseWheelEvent (event) {\n    if (this._checkZoomScroll() && this._checkEventInChartContent(event)) {\n      this._zoomScrollEventHandler.mouseWheelEvent(this._compatChartEvent(event))\n    }\n  }\n\n  _mouseClickEvent (event) {\n    if (this._checkZoomScroll() && this._checkEventInChartContent(event)) {\n      this._zoomScrollEventHandler.mouseClickEvent(this._compatChartEvent(event, true))\n      this._modifyEventOptions(event)\n    }\n  }\n\n  _mouseDownEvent (event) {\n    if (this._checkEventInChartContent(event)) {\n      this._target.style.cursor = 'pointer'\n      const compatEvent = this._compatChartEvent(event, true)\n      if (this._shouldPerformOverlayEvent()) {\n        this._overlayEventHandler.mouseDownEvent(compatEvent)\n      }\n      if (this._checkZoomScroll()) {\n        this._zoomScrollEventHandler.mouseDownEvent(compatEvent)\n        this._modifyEventOptions(event)\n      }\n    }\n  }\n\n  _mouseRightDownEvent (event) {\n    if (this._shouldPerformOverlayEvent() && this._checkEventInChartContent(event)) {\n      this._overlayEventHandler.mouseRightDownEvent(this._compatChartEvent(event, true))\n    }\n  }\n\n  _pressedMouseMoveEvent (event) {\n    if (this._checkEventInChartContent(event)) {\n      const compatEvent = this._compatChartEvent(event, true)\n      if (this._checkZoomScroll()) {\n        this._zoomScrollEventHandler.pressedMouseMoveEvent(compatEvent)\n        this._modifyEventOptions(event)\n      } else {\n        this._overlayEventHandler.pressedMouseMoveEvent(compatEvent)\n      }\n    }\n  }\n\n  _longTapEvent (event) {\n    if (this._checkZoomScroll() && this._checkEventInChartContent(event)) {\n      this._zoomScrollEventHandler.longTapEvent(this._compatChartEvent(event, true))\n      this._modifyEventOptions(event)\n    }\n  }\n\n  _checkZoomScroll () {\n    return !this._chartStore.dragPaneFlag() && !this._chartStore.shapeStore().isPressed() && !this._chartStore.shapeStore().isDrawing()\n  }\n\n  /**\n   * 是否需要处理图形标记事件\n   * @return {boolean}\n   * @private\n   */\n  _shouldPerformOverlayEvent () {\n    return !this._chartStore.shapeStore().isEmpty() || !this._chartStore.annotationStore().isEmpty()\n  }\n\n  /**\n   * 修改事件配置\n   * @param event\n   */\n  _modifyEventOptions (event) {\n    if (isTouch(event) && this._chartStore.crosshairStore().get().paneId) {\n      this._event.setOptions({ treatVertTouchDragAsPageScroll: false })\n    } else {\n      this._event.setOptions({ treatVertTouchDragAsPageScroll: true })\n    }\n  }\n\n  /**\n   * 事件信息兼容\n   * @param {*} event\n   * @param {*} compatY\n   * @returns\n   */\n  _compatChartEvent (event, compatY) {\n    if (compatY) {\n      for (const id in this._paneContentSize) {\n        if (Object.prototype.hasOwnProperty.call(this._paneContentSize, id)) {\n          const size = this._paneContentSize[id]\n          if (event.localY > size.contentTop && event.localY < size.contentBottom) {\n            event.paneY = event.localY - size.contentTop\n            event.paneId = id\n            break\n          }\n        }\n      }\n    }\n    event.localX -= this._chartContentLeftRight.contentLeft\n    return event\n  }\n\n  /**\n   * 检查事件是否在图表内容内\n   * @param {*} event\n   * @returns\n   */\n  _checkEventInChartContent (event) {\n    return (event.localX > this._chartContentLeftRight.contentLeft && event.localX < this._chartContentLeftRight.contentRight) &&\n      (event.localY > this._chartContentTopBottom.contentTop && event.localY < this._chartContentTopBottom.contentBottom)\n  }\n\n  setChartContentLeftRight (chartContentLeftRight) {\n    this._chartContentLeftRight = chartContentLeftRight\n  }\n\n  setChartContentTopBottom (chartContentTopBottom) {\n    this._chartContentTopBottom = chartContentTopBottom\n  }\n\n  setPaneContentSize (paneContentSize) {\n    this._paneContentSize = paneContentSize\n  }\n\n  destroy () {\n    this._event.destroy()\n    this._target.removeEventListener('keydown', this._boundKeyBoardDownEvent)\n    this._target.removeEventListener('contextmenu', this._boundContextMenuEvent)\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function throttle (func, wait = 20) {\n  let previous = 0\n  return function () {\n    const now = Date.now()\n    const context = this\n    const args = arguments\n    if (now - previous > wait) {\n      func.apply(context, args)\n      previous = now\n    }\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 渲染填充菱形\n * @param ctx\n * @param color\n * @param centerCoordinate\n * @param width\n * @param height\n */\nexport function renderFillDiamond (ctx, color, centerCoordinate, width, height) {\n  ctx.fillStyle = color\n  ctx.beginPath()\n  ctx.moveTo(centerCoordinate.x - width / 2, centerCoordinate.y)\n  ctx.lineTo(centerCoordinate.x, centerCoordinate.y - height / 2)\n  ctx.lineTo(centerCoordinate.x + width / 2, centerCoordinate.y)\n  ctx.lineTo(centerCoordinate.x, centerCoordinate.y + height / 2)\n  ctx.closePath()\n  ctx.fill()\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 渲染填充菱形\n * @param ctx\n * @param color\n * @param centerCoordinate\n * @param width\n * @param height\n */\nexport function renderFillTriangle (ctx, color, centerCoordinate, width, height) {\n  ctx.fillStyle = color\n  ctx.beginPath()\n  ctx.moveTo(centerCoordinate.x - width / 2, centerCoordinate.y + height / 2)\n  ctx.lineTo(centerCoordinate.x, centerCoordinate.y - height / 2)\n  ctx.lineTo(centerCoordinate.x + width / 2, centerCoordinate.y + height / 2)\n  ctx.closePath()\n  ctx.fill()\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Overlay from './Overlay'\n\nimport { renderFillCircle } from '../../renderer/circle'\nimport { renderFillRect } from '../../renderer/rect'\nimport { renderFillDiamond } from '../../renderer/diamond'\nimport { renderFillTriangle } from '../../renderer/triangle'\nimport {\n  checkCoordinateInCircle, checkCoordinateInDiamond,\n  checkCoordinateInRect, checkCoordinateInTriangle\n} from '../../extension/shape/shapeHelper'\n\nimport { isNumber } from '../../utils/typeChecks'\n\nimport {\n  OverlayPosition,\n  AnnotationSymbolType\n} from '../../options/styleOptions'\n\n/**\n * 注解\n */\nexport default class Annotation extends Overlay {\n  constructor ({\n    id, point = {}, chartStore, xAxis, yAxis, styles\n  }) {\n    super({ id, chartStore, points: point, xAxis, yAxis })\n    this._symbolCoordinate = {}\n    this.setStyles(styles, chartStore.styleOptions().annotation)\n  }\n\n  /**\n   * 绘制标识\n   * @param ctx\n   * @param isActive\n   * @param styles\n   * @private\n   */\n  _drawSymbol (ctx, isActive, styles) {\n    const barSpace = this._chartStore.timeScaleStore().barSpace()\n    const symbolOptions = styles.symbol\n    const styleSize = symbolOptions.size\n    const styleActiveSize = symbolOptions.activeSize\n    const size = isActive\n      ? (isNumber(styleActiveSize) ? styleActiveSize : barSpace)\n      : (isNumber(styleSize) ? styleSize : barSpace)\n    const color = isActive ? symbolOptions.activeColor : symbolOptions.color\n    switch (symbolOptions.type) {\n      case AnnotationSymbolType.CIRCLE: {\n        renderFillCircle(ctx, color, this._symbolCoordinate, size / 2)\n        break\n      }\n      case AnnotationSymbolType.RECT: {\n        renderFillRect(\n          ctx, color,\n          this._symbolCoordinate.x - size / 2,\n          this._symbolCoordinate.y - size / 2,\n          size, size\n        )\n        break\n      }\n      case AnnotationSymbolType.DIAMOND: {\n        renderFillDiamond(ctx, color, this._symbolCoordinate, size, size)\n        break\n      }\n      case AnnotationSymbolType.TRIANGLE: {\n        renderFillTriangle(ctx, color, this._symbolCoordinate, size, size)\n        break\n      }\n      case AnnotationSymbolType.CUSTOM: {\n        ctx.save()\n        this.drawCustomSymbol({\n          ctx,\n          point: this._points,\n          coordinate: this._symbolCoordinate,\n          viewport: {\n            width: this._xAxis.width(),\n            height: this._yAxis.height(),\n            barSpace\n          },\n          styles: symbolOptions,\n          isActive\n        })\n        ctx.restore()\n        break\n      }\n      default: {\n        break\n      }\n    }\n  }\n\n  draw (ctx) {\n    const styles = this._styles || this._chartStore.styleOptions().annotation\n    const offset = styles.offset || [0, 0]\n    let y = 0\n    switch (styles.position) {\n      case OverlayPosition.POINT: {\n        y = this._yAxis.convertToPixel(this._points.value)\n        break\n      }\n      case OverlayPosition.TOP: {\n        y = 0\n        break\n      }\n      case OverlayPosition.BOTTOM: {\n        y = this._yAxis.height()\n        break\n      }\n    }\n    this._symbolCoordinate.y = y + offset[0]\n    const isActive = this._id === this._chartStore.annotationStore().eventOperate().id\n    this._drawSymbol(ctx, isActive, styles)\n    if (this.drawExtend) {\n      ctx.save()\n      this.drawExtend({\n        ctx,\n        point: this._points,\n        coordinate: this._symbolCoordinate,\n        viewport: {\n          width: this._xAxis.width(),\n          height: this._yAxis.height()\n        },\n        styles,\n        isActive\n      })\n      ctx.restore()\n    }\n  }\n\n  checkEventCoordinateOn (eventCoordinate) {\n    const barSpace = this._chartStore.timeScaleStore().barSpace()\n    const styles = this._styles || this._chartStore.styleOptions().annotation\n    const symbolOptions = styles.symbol\n    const size = isNumber(symbolOptions.size) ? symbolOptions.size : barSpace\n    let isOn\n    switch (symbolOptions.type) {\n      case AnnotationSymbolType.CIRCLE: {\n        isOn = checkCoordinateInCircle(this._symbolCoordinate, size / 2, eventCoordinate)\n        break\n      }\n      case AnnotationSymbolType.RECT: {\n        const coordinate1 = { x: this._symbolCoordinate.x - size / 2, y: this._symbolCoordinate.y - size / 2 }\n        const coordinate2 = { x: this._symbolCoordinate.x + size / 2, y: this._symbolCoordinate.y + size / 2 }\n        isOn = checkCoordinateInRect(coordinate1, coordinate2, eventCoordinate)\n        break\n      }\n      case AnnotationSymbolType.DIAMOND: {\n        isOn = checkCoordinateInDiamond(this._symbolCoordinate, size, size, eventCoordinate)\n        break\n      }\n      case AnnotationSymbolType.TRIANGLE: {\n        isOn = checkCoordinateInTriangle(\n          [\n            { x: this._symbolCoordinate.x - size / 2, y: this._symbolCoordinate.y + size / 2 },\n            { x: this._symbolCoordinate.x, y: this._symbolCoordinate.y - size / 2 },\n            { x: this._symbolCoordinate.x + size / 2, y: this._symbolCoordinate.y + size / 2 }\n          ],\n          eventCoordinate\n        )\n        break\n      }\n      case AnnotationSymbolType.CUSTOM: {\n        isOn = this.checkEventCoordinateOnCustomSymbol({\n          eventCoordinate,\n          coordinate: this._symbolCoordinate,\n          size\n        })\n        break\n      }\n      default: {\n        break\n      }\n    }\n    if (isOn) {\n      return {\n        id: this._id,\n        instance: this\n      }\n    }\n  }\n\n  /**\n   * 生成标识坐标\n   * @param x\n   */\n  createSymbolCoordinate (x) {\n    const styles = this._styles || this._chartStore.styleOptions().annotation\n    const offset = styles.offset || [0, 0]\n    this._symbolCoordinate = { x: x + offset[1] }\n  }\n\n  /**\n   * 检查鼠标点是否在自定义标识内\n   * @param eventCoordinate\n   * @param coordinate\n   * @param size\n   */\n  checkEventCoordinateOnCustomSymbol ({ eventCoordinate, coordinate, size }) {}\n\n  /**\n   * 绘制自定义标识\n   * @param ctx\n   * @param point\n   * @param coordinate\n   * @param viewport\n   * @param styles\n   * @param isActive\n   */\n  drawCustomSymbol ({ ctx, point, coordinate, viewport, styles, isActive }) {}\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Overlay from './Overlay'\nimport { LineStyle, OverlayPosition, YAxisPosition } from '../../options/styleOptions'\nimport { renderHorizontalLine } from '../../renderer/line'\nimport { isValid, isObject } from '../../utils/typeChecks'\nimport { createFont, getTextRectWidth, getTextRectHeight } from '../../utils/canvas'\nimport { renderStrokeFillRoundRect } from '../../renderer/rect'\nimport { renderText } from '../../renderer/text'\n\nexport default class Tag extends Overlay {\n  constructor ({\n    id, point = {}, text, mark, chartStore, xAxis, yAxis, styles\n  }) {\n    super({ id, chartStore, points: point, xAxis, yAxis })\n    this._text = text\n    this._mark = mark\n    this.setStyles(styles, chartStore.styleOptions().tag)\n  }\n\n  /**\n   * 更新\n   * @param point\n   * @param text\n   * @param mark\n   * @param styles\n   * @return {boolean}\n   */\n  update ({ point, text, mark, styles }) {\n    let success = false\n    if (isObject(point)) {\n      this._points = point\n      success = true\n    }\n    if (isValid(text)) {\n      this._text = text\n      success = true\n    }\n    if (isValid(mark)) {\n      this._mark = mark\n      success = true\n    }\n    if (this.setStyles(styles, this._chartStore.styleOptions().tag)) {\n      success = true\n    }\n    return success\n  }\n\n  /**\n   * 绘制标记和线\n   * @param ctx\n   */\n  drawMarkLine (ctx) {\n    const options = this._chartStore.styleOptions()\n    const yAxisOptions = options.yAxis\n    const tagOptions = this._styles || options.tag\n    const y = this._getY(tagOptions)\n    ctx.save()\n    this._drawLine(ctx, y, tagOptions, yAxisOptions)\n    this._drawMark(ctx, y, tagOptions, yAxisOptions)\n    ctx.restore()\n  }\n\n  /**\n   * 绘制值\n   */\n  drawText (ctx) {\n    if (!isValid(this._text)) {\n      return\n    }\n    const options = this._chartStore.styleOptions()\n    const tagOptions = this._styles || options.tag\n    const tagTextOptions = tagOptions.text\n    ctx.save()\n    const rectWidth = getTextRectWidth(ctx, this._text, tagTextOptions)\n    const rectHeight = getTextRectHeight(tagTextOptions)\n    let x\n    if (this._yAxis.isFromYAxisZero()) {\n      x = 0\n    } else {\n      x = this._yAxis.width() - rectWidth\n    }\n    const y = this._getY(tagOptions)\n    renderStrokeFillRoundRect(\n      ctx,\n      tagTextOptions.backgroundColor,\n      tagTextOptions.borderColor,\n      tagTextOptions.borderSize,\n      x,\n      y - rectHeight / 2,\n      rectWidth,\n      rectHeight,\n      tagTextOptions.borderRadius\n    )\n    renderText(ctx, tagTextOptions.color, x + tagTextOptions.paddingLeft, y, this._text)\n    ctx.restore()\n  }\n\n  /**\n   * 绘制线\n   * @param ctx\n   * @param y\n   * @param tagOptions\n   * @private\n   */\n  _drawLine (ctx, y, tagOptions, yAxisOptions) {\n    const tagLineOptions = tagOptions.line\n    if (!tagLineOptions.show) {\n      return\n    }\n    ctx.save()\n    const textRectWidth = getTextRectWidth(ctx, this._text, tagOptions.text)\n    const markRectWidth = getTextRectWidth(ctx, this._mark, tagOptions.mark)\n    ctx.strokeStyle = tagLineOptions.color\n    ctx.lineWidth = tagLineOptions.size\n    if (tagLineOptions.style === LineStyle.DASH) {\n      ctx.setLineDash(tagLineOptions.dashValue)\n    }\n    const markOffset = tagOptions.mark.offset\n    const lines = []\n    const textValid = isValid(this._text)\n    const markValid = isValid(this._mark)\n    if (yAxisOptions.inside) {\n      if (yAxisOptions.position === YAxisPosition.LEFT) {\n        if (textValid && markValid) {\n          if (markOffset > 0) {\n            lines.push([textRectWidth, textRectWidth + markOffset])\n            lines.push([textRectWidth + markOffset + markRectWidth, this._xAxis.width()])\n          } else {\n            if (Math.abs(markOffset) < Math.min(textRectWidth, markRectWidth)) {\n              lines.push([textRectWidth + markOffset + markRectWidth, this._xAxis.width()])\n            } else {\n              lines.push([Math.max(textRectWidth, markRectWidth), this._xAxis.width()])\n            }\n          }\n        } else {\n          if (textValid) {\n            lines.push([textRectWidth, this._xAxis.width()])\n          } else if (markValid) {\n            if (markOffset > 0) {\n              lines.push([0, markOffset])\n              lines.push([markOffset + markRectWidth, this._xAxis.width()])\n            } else {\n              if (Math.abs(markOffset) < markRectWidth) {\n                lines.push([markOffset + markRectWidth, this._xAxis.width()])\n              } else {\n                lines.push([0, this._xAxis.width()])\n              }\n            }\n          } else {\n            lines.push([0, this._xAxis.width()])\n          }\n        }\n      } else {\n        if (textValid && markValid) {\n          if (markOffset < 0) {\n            lines.push([0, this._xAxis.width() - textRectWidth + markOffset - markRectWidth])\n            lines.push([this._xAxis.width() - textRectWidth + markOffset, this._xAxis.width() - textRectWidth])\n          } else {\n            if (markOffset < Math.min(textRectWidth, markRectWidth)) {\n              lines.push([0, this._xAxis.width() - textRectWidth - markRectWidth + markOffset])\n            } else {\n              lines.push([0, this._xAxis.width() - Math.max(textRectWidth, markRectWidth)])\n            }\n          }\n        } else {\n          if (textValid) {\n            lines.push([0, this._xAxis.width() - textRectWidth])\n          } else if (markValid) {\n            if (markOffset < 0) {\n              lines.push([0, this._xAxis.width() + markOffset - markRectWidth])\n              lines.push([this._xAxis.width() + markOffset, this._xAxis.width()])\n            } else {\n              if (markOffset < markRectWidth) {\n                lines.push([0, this._xAxis.width() - markRectWidth + markOffset])\n              } else {\n                lines.push([0, this._xAxis.width()])\n              }\n            }\n          } else {\n            lines.push([0, this._xAxis.width()])\n          }\n        }\n      }\n    } else {\n      if (yAxisOptions.position === YAxisPosition.LEFT) {\n        if (markValid) {\n          if (markOffset > 0) {\n            lines.push([0, markOffset])\n            lines.push([markOffset + markRectWidth, this._xAxis.width()])\n          } else {\n            if (Math.abs(markOffset) < markRectWidth) {\n              lines.push([markRectWidth + markOffset, this._xAxis.width()])\n            } else {\n              lines.push([0, this._xAxis.width()])\n            }\n          }\n        } else {\n          lines.push([0, this._xAxis.width()])\n        }\n      } else {\n        if (markValid) {\n          if (markOffset < 0) {\n            lines.push([0, this._xAxis.width() - markRectWidth + markOffset])\n            lines.push([this._xAxis.width() + markOffset, this._xAxis.width()])\n          } else {\n            if (markOffset < markRectWidth) {\n              lines.push([0, this._xAxis.width() - markRectWidth + markOffset])\n            } else {\n              lines.push([0, this._xAxis.width()])\n            }\n          }\n        } else {\n          lines.push([0, this._xAxis.width()])\n        }\n      }\n    }\n    lines.forEach(line => {\n      renderHorizontalLine(ctx, y, line[0], line[1])\n    })\n    ctx.restore()\n  }\n\n  /**\n   * 绘制标记\n   * @param ctx\n   * @param y\n   * @param tagOptions\n   * @param yAxisOptions\n   * @private\n   */\n  _drawMark (ctx, y, tagOptions, yAxisOptions) {\n    if (!isValid(this._mark)) {\n      return\n    }\n    const tagMarkOptions = tagOptions.mark\n    const rectWidth = getTextRectWidth(ctx, this._mark, tagMarkOptions)\n    const rectHeight = getTextRectHeight(tagMarkOptions)\n    let x\n    if (yAxisOptions.inside) {\n      let textRectWidth = 0\n      if (isValid(this._text)) {\n        textRectWidth = getTextRectWidth(ctx, this._text, tagOptions.text)\n      }\n      if (yAxisOptions.position === YAxisPosition.LEFT) {\n        x = textRectWidth\n      } else {\n        x = this._xAxis.width() - textRectWidth - rectWidth\n      }\n    } else {\n      if (yAxisOptions.position === YAxisPosition.LEFT) {\n        x = 0\n      } else {\n        x = this._xAxis.width() - rectWidth\n      }\n    }\n    x += tagMarkOptions.offset\n    renderStrokeFillRoundRect(\n      ctx,\n      tagMarkOptions.backgroundColor,\n      tagMarkOptions.borderColor,\n      tagMarkOptions.borderSize,\n      x,\n      y - rectHeight / 2,\n      rectWidth,\n      rectHeight,\n      tagMarkOptions.borderRadius\n    )\n    ctx.textBaseline = 'middle'\n    ctx.font = createFont(tagMarkOptions.size, tagMarkOptions.weight, tagMarkOptions.family)\n    renderText(ctx, tagMarkOptions.color, x + tagMarkOptions.paddingLeft, y, this._mark)\n  }\n\n  /**\n   * 获取坐标y值\n   * @param tagOptions\n   * @return {*}\n   * @private\n   */\n  _getY (tagOptions) {\n    const offset = tagOptions.offset\n    switch (tagOptions.position) {\n      case OverlayPosition.TOP: {\n        return offset\n      }\n      case OverlayPosition.BOTTOM: {\n        return this._yAxis.height() + offset\n      }\n      default: {\n        return this._yAxis.convertToNicePixel(this._points.value) + offset\n      }\n    }\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport ChartStore from '../store/ChartStore'\n\nimport CandlePane from './CandlePane'\nimport XAxisPane from './XAxisPane'\n\nimport { YAxisPosition } from '../options/styleOptions'\n\nimport { isArray, isBoolean, isFunction, isValid, isNumber } from '../utils/typeChecks'\nimport { createId } from '../utils/id'\n\nimport TechnicalIndicatorPane from './TechnicalIndicatorPane'\nimport SeparatorPane from './SeparatorPane'\n\nimport ChartEvent from '../event/ChartEvent'\nimport { getPixelRatio } from '../utils/canvas'\nimport { throttle } from '../utils/performance'\nimport { createElement } from '../utils/element'\nimport Annotation from '../component/overlay/Annotation'\nimport Tag from '../component/overlay/Tag'\nimport { perfectOverlayFunc } from '../component/overlay/Overlay'\n\nimport ActionType from '../enum/ActionType'\nimport InvalidateLevel from '../enum/InvalidateLevel'\n\n// 默认技术指标窗口高度\nconst DEFAULT_TECH_PANE_HEIGHT = 100\n\n// 技术指标窗口id前缀\nconst TECH_PANE_ID_PREFIX = 'tech_pane_'\n\n// 图形id前缀\nconst SHAPE_ID_PREFIX = 'shape_'\n\n// 注解id前缀\nconst ANNOTATION_ID_PREFIX = 'an_'\n\n// 蜡烛图窗口id\nexport const CANDLE_PANE_ID = 'candle_pane'\n\n// x轴窗口id\nconst XAXIS_PANE_ID = 'x_axis_pane'\n\nexport default class ChartPane {\n  constructor (container, styleOptions) {\n    this._initChartContainer(container)\n    this._separatorDragStartTopPaneHeight = 0\n    this._separatorDragStartBottomPaneHeight = 0\n    this._chartStore = new ChartStore(styleOptions, {\n      invalidate: this._invalidatePane.bind(this),\n      crosshair: this._crosshairObserver.bind(this)\n    })\n    this._xAxisPane = new XAxisPane({ id: XAXIS_PANE_ID, container: this._chartContainer, chartStore: this._chartStore })\n    this._panes = new Map([[CANDLE_PANE_ID, new CandlePane({\n      container: this._chartContainer,\n      chartStore: this._chartStore,\n      xAxis: this._xAxisPane.xAxis(),\n      id: CANDLE_PANE_ID\n    })]])\n    this._separators = new Map()\n    this._chartWidth = {}\n    this._chartHeight = {}\n    this._chartEvent = new ChartEvent(\n      this._chartContainer,\n      this._chartStore,\n      (paneId) => this._panes.get(paneId).yAxis()\n    )\n    this.adjustPaneViewport(true, true, true)\n  }\n\n  /**\n   * 初始化图表容器\n   * @param container\n   * @private\n   */\n  _initChartContainer (container) {\n    this._container = container\n    this._chartContainer = createElement('div', {\n      userSelect: 'none',\n      webkitUserSelect: 'none',\n      msUserSelect: 'none',\n      MozUserSelect: 'none',\n      webkitTapHighlightColor: 'transparent',\n      position: 'relative',\n      outline: 'none',\n      borderStyle: 'none',\n      width: '100%',\n      cursor: 'crosshair',\n      boxSizing: 'border-box'\n    })\n    this._chartContainer.tabIndex = 1\n    container.appendChild(this._chartContainer)\n  }\n\n  /**\n   * 十字光标观察者\n   * @private\n   */\n  _crosshairObserver ({ paneId, dataIndex, kLineData, x, y }) {\n    if (\n      this._chartStore.actionStore().has(ActionType.CROSSHAIR) ||\n      this._chartStore.actionStore().has(ActionType.TOOLTIP)\n    ) {\n      const techDatas = {}\n      this._panes.forEach((_, id) => {\n        const data = {}\n        const techDataList = []\n        const techs = this.chartStore().technicalIndicatorStore().instances(id)\n        techs.forEach(tech => {\n          const result = tech.result\n          const techData = result[dataIndex]\n          data[tech.name] = techData\n          techDataList.push({ name: tech.name, data: techData })\n        })\n        techDatas[id] = data\n        this._chartStore.actionStore().execute(ActionType.TOOLTIP, {\n          paneId: id,\n          dataIndex,\n          kLineData,\n          technicalIndicatorData: techDataList\n        })\n      })\n      if (paneId) {\n        this._chartStore.actionStore().execute(ActionType.CROSSHAIR, {\n          paneId,\n          coordinate: { x, y },\n          dataIndex,\n          kLineData,\n          technicalIndicatorData: techDatas\n        })\n      }\n    }\n  }\n\n  /**\n   * 分割线拖拽开始\n   * @param topPaneId\n   * @param bottomPaneId\n   * @private\n   */\n  _separatorStartDrag (topPaneId, bottomPaneId) {\n    this._separatorDragStartTopPaneHeight = this._panes.get(topPaneId).height()\n    this._separatorDragStartBottomPaneHeight = this._panes.get(bottomPaneId).height()\n  }\n\n  /**\n   * 分割线拖拽\n   * @param dragDistance\n   * @param topPaneId\n   * @param bottomPaneId\n   * @private\n   */\n  _separatorDrag (dragDistance, topPaneId, bottomPaneId) {\n    const topPane = this._panes.get(topPaneId)\n    const bottomPane = this._panes.get(bottomPaneId)\n    const topPaneMinHeight = topPane.minHeight()\n    const bottomPaneMinHeight = bottomPane.minHeight()\n    let topPaneHeight = this._separatorDragStartTopPaneHeight + dragDistance\n    let bottomPaneHeight = this._separatorDragStartBottomPaneHeight - dragDistance\n    if (topPaneHeight > this._separatorDragStartTopPaneHeight + this._separatorDragStartBottomPaneHeight) {\n      topPaneHeight = this._separatorDragStartTopPaneHeight + this._separatorDragStartBottomPaneHeight\n      bottomPaneHeight = 0\n    }\n    if (topPaneHeight < 0) {\n      topPaneHeight = 0\n      bottomPaneHeight = this._separatorDragStartTopPaneHeight + this._separatorDragStartBottomPaneHeight\n    }\n    if (topPaneHeight < topPaneMinHeight) {\n      bottomPaneHeight -= bottomPaneMinHeight - topPaneHeight\n      topPaneHeight = topPaneMinHeight\n    }\n    if (bottomPaneHeight < bottomPaneMinHeight) {\n      topPaneHeight -= topPaneMinHeight - bottomPaneHeight\n      bottomPaneHeight = bottomPaneMinHeight\n    }\n    topPane.setHeight(topPaneHeight)\n    bottomPane.setHeight(bottomPaneHeight)\n    this._chartStore.actionStore().execute(ActionType.PANE_DRAG, { topPaneId, bottomPaneId, topPaneHeight, bottomPaneHeight })\n    this.adjustPaneViewport(true, true, true, true, true)\n  }\n\n  /**\n   * 更新所有pane\n   * @private\n   */\n  _invalidatePane (invalidateLevel = InvalidateLevel.FULL) {\n    if (invalidateLevel === InvalidateLevel.OVERLAY) {\n      this._xAxisPane.invalidate(invalidateLevel)\n      this._panes.forEach((pane) => {\n        pane.invalidate(invalidateLevel)\n      })\n    } else {\n      let shouldMeasureWidth = false\n      this._panes.forEach((pane) => {\n        const should = pane.yAxis().computeAxis()\n        if (should) {\n          shouldMeasureWidth = should\n        }\n      })\n      this.adjustPaneViewport(false, shouldMeasureWidth, true)\n    }\n  }\n\n  /**\n   * 测量pane高度\n   * @private\n   */\n  _measurePaneHeight () {\n    const styleOptions = this._chartStore.styleOptions()\n    const paneHeight = this._container.offsetHeight\n    const separatorSize = styleOptions.separator.size\n    const separatorTotalHeight = separatorSize * this._separators.size\n    const xAxisHeight = this._xAxisPane.xAxis().getSelfHeight()\n    let paneExcludeXAxisSeparatorHeight = paneHeight - xAxisHeight - separatorTotalHeight\n    if (paneExcludeXAxisSeparatorHeight < 0) {\n      paneExcludeXAxisSeparatorHeight = 0\n    }\n    let techPaneTotalHeight = 0\n    this._panes.forEach(pane => {\n      if (pane.id() !== CANDLE_PANE_ID) {\n        let paneHeight = pane.height()\n        const paneMinHeight = pane.minHeight()\n        if (paneHeight < paneMinHeight) {\n          paneHeight = paneMinHeight\n        }\n        if (techPaneTotalHeight + paneHeight > paneExcludeXAxisSeparatorHeight) {\n          techPaneTotalHeight = paneExcludeXAxisSeparatorHeight\n          paneHeight = paneExcludeXAxisSeparatorHeight - techPaneTotalHeight\n          if (paneHeight < 0) paneHeight = 0\n        } else {\n          techPaneTotalHeight += paneHeight\n        }\n        pane.setHeight(paneHeight)\n      }\n    })\n\n    const candlePaneHeight = paneExcludeXAxisSeparatorHeight - techPaneTotalHeight\n\n    const paneContentSize = {}\n    paneContentSize[CANDLE_PANE_ID] = { contentTop: 0, contentBottom: candlePaneHeight }\n    let contentTop = candlePaneHeight\n    let contentBottom = candlePaneHeight\n    this._panes.get(CANDLE_PANE_ID).setHeight(candlePaneHeight)\n    this._chartHeight[CANDLE_PANE_ID] = candlePaneHeight\n    this._panes.forEach(pane => {\n      if (pane.id() !== CANDLE_PANE_ID) {\n        const paneHeight = pane.height()\n        contentBottom += (paneHeight + separatorSize)\n        paneContentSize[pane.id()] = { contentTop, contentBottom }\n        this._chartHeight[pane.id()] = paneHeight\n        contentTop = contentBottom\n      }\n    })\n    this._xAxisPane.setHeight(xAxisHeight)\n    this._chartHeight.xAxis = xAxisHeight\n    this._chartHeight.total = paneHeight\n    this._chartEvent.setPaneContentSize(paneContentSize)\n    this._chartEvent.setChartContentTopBottom({ contentTop: 0, contentBottom })\n  }\n\n  /**\n   * 测量pan宽度\n   * @private\n   */\n  _measurePaneWidth () {\n    const styleOptions = this._chartStore.styleOptions()\n    const yAxisOptions = styleOptions.yAxis\n    const isYAxisLeft = yAxisOptions.position === YAxisPosition.LEFT\n    const isOutside = !yAxisOptions.inside\n    const paneWidth = this._container.offsetWidth\n    let mainWidth\n    let yAxisWidth = Number.MIN_SAFE_INTEGER\n    let yAxisOffsetLeft\n    let mainOffsetLeft\n    this._panes.forEach(pane => {\n      yAxisWidth = Math.max(yAxisWidth, pane.yAxis().getSelfWidth())\n    })\n    if (yAxisWidth > paneWidth) {\n      yAxisWidth = paneWidth\n    }\n    if (isOutside) {\n      mainWidth = paneWidth - yAxisWidth\n      if (isYAxisLeft) {\n        yAxisOffsetLeft = 0\n        mainOffsetLeft = yAxisWidth\n      } else {\n        yAxisOffsetLeft = paneWidth - yAxisWidth\n        mainOffsetLeft = 0\n      }\n    } else {\n      mainWidth = paneWidth\n      mainOffsetLeft = 0\n      if (isYAxisLeft) {\n        yAxisOffsetLeft = 0\n      } else {\n        yAxisOffsetLeft = paneWidth - yAxisWidth\n      }\n    }\n\n    let totalDataSpace = mainWidth\n    if (totalDataSpace < this._chartStore.timeScaleStore().dataSpace()) {\n      totalDataSpace = this._chartStore.timeScaleStore().dataSpace()\n    }\n    this._chartStore.timeScaleStore().setTotalDataSpace(totalDataSpace)\n\n    this._panes.forEach((pane, paneId) => {\n      pane.setWidth(mainWidth, yAxisWidth)\n      pane.setOffsetLeft(mainOffsetLeft, yAxisOffsetLeft)\n      const separator = this._separators.get(paneId)\n      separator && separator.setSize(mainOffsetLeft, mainWidth)\n    })\n    this._chartWidth = { content: mainWidth, yAxis: yAxisWidth, total: paneWidth }\n    this._xAxisPane.setWidth(mainWidth, yAxisWidth)\n    this._xAxisPane.setOffsetLeft(mainOffsetLeft, yAxisOffsetLeft)\n    this._chartEvent.setChartContentLeftRight({ contentLeft: mainOffsetLeft, contentRight: mainOffsetLeft + mainWidth })\n  }\n\n  /**\n   * 获取容器\n   * @returns\n   */\n  getContainer () { return this._container }\n\n  /**\n   * 调整窗口尺寸\n   * @param shouldMeasureHeight\n   * @param shouldMeasureWidth\n   * @param shouldLayout\n   * @param shouldComputeAxis\n   * @param shouldForceComputeAxis\n   */\n  adjustPaneViewport (\n    shouldMeasureHeight, shouldMeasureWidth, shouldLayout, shouldComputeAxis, shouldForceComputeAxis\n  ) {\n    if (shouldMeasureHeight) {\n      this._measurePaneHeight()\n    }\n    let isAdjust = false\n    if (shouldComputeAxis) {\n      this._panes.forEach(pane => {\n        const adjust = pane.yAxis().computeAxis(shouldForceComputeAxis)\n        if (!isAdjust) {\n          isAdjust = adjust\n        }\n      })\n    }\n    if ((!shouldComputeAxis && shouldMeasureWidth) || (shouldComputeAxis && isAdjust)) {\n      this._measurePaneWidth()\n    }\n    if (shouldLayout) {\n      this._xAxisPane.xAxis().computeAxis(true)\n      this._xAxisPane.layout()\n      this._panes.forEach(pane => {\n        pane.layout()\n      })\n    }\n  }\n\n  /**\n   * 窗口是否存在\n   * @param paneId\n   * @return {boolean}\n   */\n  hasPane (paneId) {\n    return this._panes.has(paneId)\n  }\n\n  /**\n   * 获取窗口\n   * @param paneId\n   * @returns\n   */\n  getPane (paneId) {\n    return this._panes.get(paneId)\n  }\n\n  /**\n   * 获取图表上的数据\n   * @returns {chartStore}\n   */\n  chartStore () {\n    return this._chartStore\n  }\n\n  /**\n   * 移除指标\n   * @param paneId\n   * @param name\n   */\n  removeTechnicalIndicator (paneId, name) {\n    const removed = this._chartStore.technicalIndicatorStore().removeInstance(paneId, name)\n    if (removed) {\n      let shouldMeasureHeight = false\n      if (paneId !== CANDLE_PANE_ID) {\n        if (!this._chartStore.technicalIndicatorStore().hasInstance(paneId)) {\n          shouldMeasureHeight = true\n          this._panes.get(paneId).destroy()\n          const deleteSeparatorTopPaneId = this._separators.get(paneId).topPaneId()\n          this._separators.get(paneId).destroy()\n          this._panes.delete(paneId)\n          this._separators.delete(paneId)\n          this._separators.forEach(separator => {\n            const topPaneId = separator.topPaneId()\n            if (!this._separators.has(topPaneId)) {\n              separator.updatePaneId(deleteSeparatorTopPaneId)\n            }\n          })\n        }\n      }\n      this.adjustPaneViewport(shouldMeasureHeight, true, true, true, true)\n    }\n  }\n\n  /**\n   * 设置指标类型\n   * @param tech 技术指标实例\n   * @param isStack 是否叠加\n   * @param options 配置\n   */\n  createTechnicalIndicator (tech, isStack, options = {}) {\n    if (this._panes.has(options.id)) {\n      const task = this._chartStore.technicalIndicatorStore().addInstance(options.id, tech, isStack)\n      if (task) {\n        task.finally(_ => {\n          this.setPaneOptions(options, this._panes.get(options.id).yAxis().computeAxis(true))\n        })\n      }\n      return options.id\n    }\n    const id = options.id || createId(TECH_PANE_ID_PREFIX)\n    const dragEnabled = isBoolean(options.dragEnabled) ? options.dragEnabled : true\n    this._separators.set(id, new SeparatorPane(\n      this._chartContainer,\n      this._chartStore,\n      Array.from(this._panes.keys()).pop(),\n      id,\n      dragEnabled,\n      {\n        startDrag: this._separatorStartDrag.bind(this),\n        drag: throttle(this._separatorDrag.bind(this), 50)\n      }\n    ))\n    const pane = new TechnicalIndicatorPane({\n      container: this._chartContainer,\n      chartStore: this._chartStore,\n      xAxis: this._xAxisPane.xAxis(),\n      id,\n      height: options.height || DEFAULT_TECH_PANE_HEIGHT,\n      minHeight: options.minHeight\n    })\n    this._panes.set(id, pane)\n    const task = this._chartStore.technicalIndicatorStore().addInstance(id, tech, isStack)\n    if (task) {\n      task.finally(_ => {\n        this.adjustPaneViewport(true, true, true, true, true)\n      })\n    }\n    return id\n  }\n\n  /**\n   * 创建图形\n   * @param ShapeTemplateClass\n   * @param shapeOptions\n   * @param paneId\n   */\n  createShape (ShapeTemplateClass, shapeOptions, paneId) {\n    const {\n      id, points, styles, lock, mode, data,\n      onDrawStart, onDrawing,\n      onDrawEnd, onClick,\n      onRightClick, onPressedMove,\n      onMouseEnter, onMouseLeave,\n      onRemove\n    } = shapeOptions\n    const shapeId = id || createId(SHAPE_ID_PREFIX)\n    if (!this._chartStore.shapeStore().hasInstance(shapeId)) {\n      let yAxis = null\n      if (this.hasPane(paneId)) {\n        yAxis = this._panes.get(paneId).yAxis()\n      } else {\n        if (points && points.length > 0) {\n          paneId = CANDLE_PANE_ID\n          yAxis = this._panes.get(CANDLE_PANE_ID).yAxis()\n        }\n      }\n      const shapeInstance = new ShapeTemplateClass({\n        id: shapeId,\n        chartStore: this._chartStore,\n        xAxis: this._xAxisPane.xAxis(),\n        yAxis,\n        points,\n        styles,\n        lock,\n        mode,\n        data\n      })\n      if (isFunction(onDrawStart)) {\n        onDrawStart({ id: shapeId })\n      }\n      perfectOverlayFunc(shapeInstance, [\n        { key: 'onDrawing', fn: onDrawing },\n        { key: 'onDrawEnd', fn: onDrawEnd },\n        { key: 'onClick', fn: onClick },\n        { key: 'onRightClick', fn: onRightClick },\n        { key: 'onPressedMove', fn: onPressedMove },\n        { key: 'onMouseEnter', fn: onMouseEnter },\n        { key: 'onMouseLeave', fn: onMouseLeave },\n        { key: 'onRemove', fn: onRemove }\n      ])\n      this._chartStore.shapeStore().addInstance(shapeInstance, paneId)\n      return shapeId\n    }\n    return null\n  }\n\n  /**\n   * 创建注解\n   * @param annotations\n   * @param paneId\n   */\n  createAnnotation (annotations, paneId) {\n    const instances = []\n    annotations.forEach(({\n      point,\n      styles,\n      checkEventCoordinateOnCustomSymbol,\n      drawCustomSymbol,\n      drawExtend,\n      onClick,\n      onRightClick,\n      onMouseEnter,\n      onMouseLeave\n    }) => {\n      if (point && point.timestamp) {\n        const annotationInstance = new Annotation({\n          id: createId(ANNOTATION_ID_PREFIX),\n          chartStore: this._chartStore,\n          point,\n          xAxis: this._xAxisPane.xAxis(),\n          yAxis: this._panes.get(paneId).yAxis(),\n          styles\n        })\n\n        perfectOverlayFunc(annotationInstance, [\n          { key: 'drawExtend', fn: drawExtend },\n          { key: 'drawCustomSymbol', fn: drawCustomSymbol },\n          { key: 'checkEventCoordinateOnCustomSymbol', fn: checkEventCoordinateOnCustomSymbol },\n          { key: 'onClick', fn: onClick },\n          { key: 'onRightClick', fn: onRightClick },\n          { key: 'onMouseEnter', fn: onMouseEnter },\n          { key: 'onMouseLeave', fn: onMouseLeave }\n        ])\n        instances.push(annotationInstance)\n      }\n    })\n    if (instances.length > 0) {\n      this._chartStore.annotationStore().add(instances, paneId)\n    }\n  }\n\n  /**\n   * 创建标签\n   * @param tags\n   * @param paneId\n   */\n  createTag (tags, paneId) {\n    const instances = []\n    let shouldUpdate = false\n    let shouldAdd = false\n    tags.forEach(({ id, point, text, mark, styles }) => {\n      if (isValid(id)) {\n        if (this._chartStore.tagStore().has(id, paneId)) {\n          const updateSuccess = this._chartStore.tagStore().update(id, paneId, { point, text, mark, styles })\n          if (!shouldUpdate) {\n            shouldUpdate = updateSuccess\n          }\n        } else {\n          shouldAdd = true\n          instances.push(new Tag({\n            id,\n            point,\n            text,\n            mark,\n            styles,\n            chartStore: this._chartStore,\n            xAxis: this._xAxisPane.xAxis(),\n            yAxis: this._panes.get(paneId).yAxis()\n          }))\n        }\n      }\n    })\n    if (shouldAdd) {\n      this._chartStore.tagStore().add(instances, paneId)\n    } else {\n      if (shouldUpdate) {\n        this._invalidatePane(InvalidateLevel.OVERLAY)\n      }\n    }\n  }\n\n  /**\n   * 移除所有html元素\n   */\n  removeAllHtml () {\n    this._panes.forEach(pane => { pane.removeHtml() })\n    this._xAxisPane.removeHtml()\n  }\n\n  /**\n   * 设置窗体参数\n   * @param options\n   * @param forceShouldAdjust\n   */\n  setPaneOptions (options, forceShouldAdjust) {\n    let shouldAdjust = forceShouldAdjust\n    let shouldMeasureHeight = false\n    if (options.id !== CANDLE_PANE_ID) {\n      const pane = this._panes.get(options.id)\n      if (pane) {\n        if (isNumber(options.minHeight) && options.minHeight > 0) {\n          pane.setMinHeight(options.minHeight)\n        }\n        if (isNumber(options.height) && options.height > 0) {\n          const minHeight = pane.minHeight()\n          const height = options.height < pane.minHeight ? minHeight : options.height\n          if (pane.height() !== height) {\n            shouldAdjust = true\n            pane.setHeight(options.height)\n            shouldMeasureHeight = true\n          }\n        }\n        if (isBoolean(options.dragEnabled)) {\n          this._separators.get(options.id).setDragEnabled(options.dragEnabled)\n        }\n      }\n    }\n    if (shouldAdjust) {\n      this.adjustPaneViewport(shouldMeasureHeight, true, true, true, true)\n    }\n  }\n\n  /**\n   * 设置时区\n   * @param timezone\n   */\n  setTimezone (timezone) {\n    this._chartStore.timeScaleStore().setTimezone(timezone)\n    this._xAxisPane.xAxis().computeAxis(true)\n    this._xAxisPane.invalidate(InvalidateLevel.FULL)\n  }\n\n  /**\n   * 将值装换成像素\n   * @param timestamp\n   * @param point\n   * @param paneId\n   * @param absoluteYAxis\n   */\n  convertToPixel (point, { paneId = CANDLE_PANE_ID, absoluteYAxis }) {\n    const points = [].concat(point)\n    let coordinates = []\n    const separatorSize = this._chartStore.styleOptions().separator.size\n    let absoluteTop = 0\n    const panes = this._panes.values()\n    for (const pane of panes) {\n      if (pane.id() === paneId) {\n        coordinates = points.map(({ timestamp, dataIndex, value }) => {\n          const coordinate = {}\n          let index = dataIndex\n          if (isValid(timestamp)) {\n            index = this._chartStore.timeScaleStore().timestampToDataIndex(timestamp)\n          }\n          if (isValid(index)) {\n            coordinate.x = this._xAxisPane.xAxis().convertToPixel(index)\n          }\n          if (isValid(value)) {\n            const y = pane.yAxis().convertToPixel(value)\n            coordinate.y = absoluteYAxis ? absoluteTop + y : y\n          }\n          return coordinate\n        })\n        break\n      }\n      absoluteTop += (pane.height() + separatorSize)\n    }\n    return isArray(point) ? coordinates : (coordinates[0] || {})\n  }\n\n  /**\n   * 将像素转换成值\n   * @param coordinate\n   * @param paneId\n   * @param dataIndexXAxis\n   * @param absoluteYAxis\n   * @return {{}[]|*[]}\n   */\n  convertFromPixel (coordinate, { paneId = CANDLE_PANE_ID, absoluteYAxis }) {\n    const coordinates = [].concat(coordinate)\n    let points = []\n    const separatorSize = this._chartStore.styleOptions().separator.size\n    let absoluteTop = 0\n    const panes = this._panes.values()\n    for (const pane of panes) {\n      if (pane.id() === paneId) {\n        points = coordinates.map(({ x, y }) => {\n          const point = {}\n          if (isValid(x)) {\n            point.dataIndex = this._xAxisPane.xAxis().convertFromPixel(x)\n            point.timestamp = this._chartStore.timeScaleStore().dataIndexToTimestamp(point.dataIndex)\n          }\n          if (isValid(y)) {\n            const ry = absoluteYAxis ? y - absoluteTop : y\n            point.value = pane.yAxis().convertFromPixel(ry)\n          }\n          return point\n        })\n        break\n      }\n      absoluteTop += pane.height() + separatorSize\n    }\n    return isArray(coordinate) ? points : (points[0] || {})\n  }\n\n  /**\n   * 图表宽度\n   * @return {*|{}}\n   */\n  chartWidth () {\n    return this._chartWidth\n  }\n\n  /**\n   * 图表高度\n   * @return {*|{}}\n   */\n  chartHeight () {\n    return this._chartHeight\n  }\n\n  /**\n   * 获取图表转换为图片后url\n   * @param includeOverlay,\n   * @param type\n   * @param backgroundColor\n   */\n  getConvertPictureUrl (includeOverlay, type, backgroundColor) {\n    const width = this._chartContainer.offsetWidth\n    const height = this._chartContainer.offsetHeight\n    const canvas = createElement('canvas', {\n      width: `${width}px`,\n      height: `${height}px`,\n      boxSizing: 'border-box'\n    })\n    const ctx = canvas.getContext('2d')\n    const pixelRatio = getPixelRatio(canvas)\n    canvas.width = width * pixelRatio\n    canvas.height = height * pixelRatio\n    ctx.scale(pixelRatio, pixelRatio)\n\n    ctx.fillStyle = backgroundColor\n    ctx.fillRect(0, 0, width, height)\n    let offsetTop = 0\n    this._panes.forEach((pane, paneId) => {\n      if (paneId !== CANDLE_PANE_ID) {\n        const separator = this._separators.get(paneId)\n        ctx.drawImage(\n          separator.getImage(),\n          0, offsetTop, width, separator.height()\n        )\n        offsetTop += separator.height()\n      }\n      ctx.drawImage(\n        pane.getImage(includeOverlay),\n        0, offsetTop, width, pane.height()\n      )\n      offsetTop += pane.height()\n    })\n    ctx.drawImage(\n      this._xAxisPane.getImage(includeOverlay),\n      0, offsetTop, width, this._xAxisPane.height()\n    )\n    return canvas.toDataURL(`image/${type}`)\n  }\n\n  /**\n   * 销毁\n   */\n  destroy () {\n    this._panes.forEach(pane => {\n      pane.destroy()\n    })\n    this._separators.forEach(pane => {\n      pane.destroy()\n    })\n    this._panes.clear()\n    this._separators.clear()\n    this._xAxisPane.destroy()\n    this._container.removeChild(this._chartContainer)\n    this._chartEvent.destroy()\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport ChartPane, { CANDLE_PANE_ID } from './pane/ChartPane'\nimport { clone, isNumber, isObject, isArray, isFunction, isValid, isString } from './utils/typeChecks'\nimport { logWarn } from './utils/logger'\nimport { requestAnimationFrame } from './utils/compatible'\nimport { formatValue } from './utils/format'\nimport { binarySearchNearest } from './utils/number'\n\nimport { hasAction } from './enum/ActionType'\n\nexport default class Chart {\n  constructor (container, styleOptions) {\n    this._chartPane = new ChartPane(container, styleOptions)\n  }\n\n  /**\n   * 获取dom\n   * @param finder\n   * @returns\n   */\n  getDom (finder) {\n    if (finder) {\n      if (!isObject(finder)) {\n        logWarn('getDom', 'options', 'options must be an object!!!')\n        return null\n      }\n      const { paneId, position } = finder\n      const pane = this._chartPane.getPane(paneId)\n      if (!pane) {\n        logWarn('getDom', 'options.paneId', 'can not find the corresponding pane!!!')\n        return null\n      }\n      return pane.container(position) || null\n    }\n    return this._chartPane.getContainer()\n  }\n\n  /**\n   * 获取宽尺寸\n   * @return {*|{}}\n   */\n  getWidth () {\n    return this._chartPane.chartWidth()\n  }\n\n  /**\n   * 获取高度尺寸\n   * @return {*|{}}\n   */\n  getHeight () {\n    return this._chartPane.chartHeight()\n  }\n\n  /**\n   * 设置样式配置\n   * @param options 配置\n   */\n  setStyleOptions (options) {\n    if (!isObject(options)) {\n      logWarn('setStyleOptions', 'options')\n      return\n    }\n    this._chartPane.chartStore().applyStyleOptions(options)\n    this._chartPane.adjustPaneViewport(true, true, true, true, true)\n  }\n\n  /**\n   * 获取样式配置\n   * @returns {[]|*[]}\n   */\n  getStyleOptions () {\n    return clone(this._chartPane.chartStore().styleOptions())\n  }\n\n  /**\n   * 设置价格数量精度\n   * @param pricePrecision 价格精度\n   * @param volumePrecision 数量精度\n   */\n  setPriceVolumePrecision (pricePrecision, volumePrecision) {\n    if (!isNumber(pricePrecision) || pricePrecision < 0) {\n      logWarn('setPriceVolumePrecision', 'pricePrecision', 'pricePrecision must be a number and greater than zero!!!')\n      return\n    }\n    if (!isNumber(volumePrecision) || volumePrecision < 0) {\n      logWarn('setPriceVolumePrecision', 'volumePrecision', 'volumePrecision must be a number and greater than zero!!!')\n      return\n    }\n    this._chartPane.chartStore().setPriceVolumePrecision(pricePrecision, volumePrecision)\n  }\n\n  /**\n   * 设置时区\n   * @param timezone 时区\n   */\n  setTimezone (timezone) {\n    this._chartPane.setTimezone(timezone)\n  }\n\n  /**\n   * 获取当前时区\n   */\n  getTimezone () {\n    return this._chartPane.chartStore().timeScaleStore().timezone()\n  }\n\n  /**\n   * 重置尺寸，总是会填充父容器\n   */\n  resize () {\n    this._chartPane.adjustPaneViewport(true, true, true, true, true)\n  }\n\n  /**\n   * 设置右边间距\n   * @param space 空间大小\n   */\n  setOffsetRightSpace (space) {\n    if (!isNumber(space)) {\n      logWarn('setOffsetRightSpace', 'space', 'space must be a number!!!')\n      return\n    }\n    this._chartPane.chartStore().timeScaleStore().setOffsetRightSpace(space, true)\n  }\n\n  /**\n   * 设置左边可见的最小bar数量\n   * @param barCount bar数量\n   */\n  setLeftMinVisibleBarCount (barCount) {\n    if (!isNumber(barCount) || barCount <= 0) {\n      logWarn('setLeftMinVisibleBarCount', 'barCount', 'barCount must be a number and greater than zero!!!')\n      return\n    }\n    this._chartPane.chartStore().timeScaleStore().setLeftMinVisibleBarCount(Math.ceil(barCount))\n  }\n\n  /**\n   * 设置右边可见的最小bar数量\n   * @param barCount bar数量\n   */\n  setRightMinVisibleBarCount (barCount) {\n    if (!isNumber(barCount) || barCount <= 0) {\n      logWarn('setRightMinVisibleBarCount', 'barCount', 'barCount must be a number and greater than zero!!!')\n      return\n    }\n    this._chartPane.chartStore().timeScaleStore().setRightMinVisibleBarCount(Math.ceil(barCount))\n  }\n\n  /**\n   * 设置一条数据的空间\n   * @param space 空间大小\n   */\n  setDataSpace (space) {\n    if (!isNumber(space)) {\n      logWarn('setDataSpace', 'space', 'space must be a number!!!')\n      return\n    }\n    this._chartPane.chartStore().timeScaleStore().setDataSpace(space)\n  }\n\n  /**\n   * 获取单条数据的空间\n   * @returns\n   */\n  getDataSpace () {\n    return this._chartPane.chartStore().timeScaleStore().dataSpace()\n  }\n\n  /**\n   * 获取单条数据绘制的空间\n   * @returns\n   */\n  getBarSpace () {\n    return this._chartPane.chartStore().timeScaleStore().barSpace()\n  }\n\n  /**\n   * 清空数据\n   */\n  clearData () {\n    this._chartPane.chartStore().clearDataList()\n  }\n\n  /**\n   * 获取数据源\n   */\n  getDataList () {\n    return this._chartPane.chartStore().dataList()\n  }\n\n  /**\n   * 添加新数据\n   * @param dataList k线数据数组\n   * @param more 是否还有更多标识\n   */\n  applyNewData (dataList, more) {\n    if (!isArray(dataList)) {\n      logWarn('applyNewData', 'dataList', 'dataList must be an array!!!')\n      return\n    }\n    const chartStore = this._chartPane.chartStore()\n    chartStore.clearDataList()\n    chartStore.addData(dataList, 0, more)\n    chartStore.technicalIndicatorStore().calcInstance().finally(\n      _ => {\n        this._chartPane.adjustPaneViewport(false, true, true, true)\n      }\n    )\n  }\n\n  /**\n   * 添加历史更多数据\n   * @param dataList k线数据数组\n   * @param more 是否还有更多标识\n   */\n  applyMoreData (dataList, more) {\n    if (!isArray(dataList)) {\n      logWarn('applyMoreData', 'dataList', 'dataList must be an array!!!')\n      return\n    }\n    const chartStore = this._chartPane.chartStore()\n    chartStore.addData(dataList, 0, more)\n    chartStore.technicalIndicatorStore().calcInstance().finally(\n      _ => {\n        this._chartPane.adjustPaneViewport(false, true, true, true)\n      }\n    )\n  }\n\n  /**\n   * 更新数据\n   * @param data 新的k线数据\n   */\n  updateData (data) {\n    if (!isObject(data) || isArray(data)) {\n      logWarn('updateData', 'data', 'data must be an object!!!')\n      return\n    }\n    const chartStore = this._chartPane.chartStore()\n    const dataList = chartStore.dataList()\n    const dataSize = dataList.length\n    // 这里判断单个数据应该添加到哪个位置\n    const timestamp = formatValue(data, 'timestamp', 0)\n    const lastDataTimestamp = formatValue(dataList[dataSize - 1], 'timestamp', 0)\n    if (timestamp >= lastDataTimestamp) {\n      let pos = dataSize\n      if (timestamp === lastDataTimestamp) {\n        pos = dataSize - 1\n      }\n      chartStore.addData(data, pos)\n      chartStore.technicalIndicatorStore().calcInstance().finally(\n        _ => {\n          this._chartPane.adjustPaneViewport(false, true, true, true)\n        }\n      )\n    }\n  }\n\n  /**\n   * 设置加载更多回调\n   * @param cb 回调方法\n   */\n  loadMore (cb) {\n    if (!isFunction(cb)) {\n      logWarn('loadMore', 'cb', 'cb must be a function!!!')\n      return\n    }\n    this._chartPane.chartStore().timeScaleStore().setLoadMoreCallback(cb)\n  }\n\n  /**\n   * 创建一个技术指标\n   * @param value 指标名或者指标\n   * @param isStack 是否覆盖\n   * @param paneOptions 窗口配置\n   * @returns {string|null}\n   */\n  createTechnicalIndicator (value, isStack, paneOptions) {\n    if (!isValid(value)) {\n      logWarn('createTechnicalIndicator', 'value', 'value is invalid!!!')\n      return null\n    }\n    const tech = isObject(value) && !isArray(value) ? value : { name: value }\n    if (!this._chartPane.chartStore().technicalIndicatorStore().hasTemplate(tech.name)) {\n      logWarn('createTechnicalIndicator', 'value', 'can not find the corresponding technical indicator!!!')\n      return null\n    }\n    return this._chartPane.createTechnicalIndicator(tech, isStack, paneOptions)\n  }\n\n  /**\n   * 添加技术指标模板\n   * @param template 指标模板\n   */\n  addTechnicalIndicatorTemplate (template) {\n    if (!isObject(template)) {\n      logWarn('addTechnicalIndicatorTemplate', 'template', 'template must be an object or array!!!')\n      return\n    }\n    const templates = [].concat(template)\n    this._chartPane.chartStore().technicalIndicatorStore().addTemplate(templates)\n  }\n\n  /**\n   * 覆盖技术指标\n   * @param override 覆盖参数\n   * @param paneId 窗口id\n   */\n  overrideTechnicalIndicator (techOverride, paneId) {\n    if (!isObject(techOverride) || isArray(techOverride)) {\n      logWarn('overrideTechnicalIndicator', 'overrideTech', 'overrideTech must be an object!!!')\n      return\n    }\n    const promise = this._chartPane.chartStore().technicalIndicatorStore().override(techOverride, paneId)\n    if (promise) {\n      promise.then(\n        _ => {\n          this._chartPane.adjustPaneViewport(false, true, true, true)\n        }\n      )\n    }\n  }\n\n  /**\n   * 获取技术指标名字获取技术指标\n   * @param name 指标名\n   * @return {{}}\n   */\n  getTechnicalIndicatorTemplate (name) {\n    return this._chartPane.chartStore().technicalIndicatorStore().getTemplateInfo(name)\n  }\n\n  /**\n    * 获取窗口上的技术指标\n    * @param paneId 窗口id\n    * @param name 指标名\n    * @return {{}}\n    */\n  getTechnicalIndicatorByPaneId (paneId, name) {\n    return this._chartPane.chartStore().technicalIndicatorStore().getInstanceInfo(paneId, name)\n  }\n\n  /**\n   * 移除一个技术指标\n   * @param paneId 窗口id\n   * @param name 指标名\n   */\n  removeTechnicalIndicator (paneId, name) {\n    this._chartPane.removeTechnicalIndicator(paneId, name)\n  }\n\n  /**\n   * 添加图形模板\n   * @param template 图形模板\n   */\n  addShapeTemplate (template) {\n    if (!isObject(template)) {\n      logWarn('addShapeTemplate', 'template', 'template must be an object or array!!!')\n      return\n    }\n    const templates = [].concat(template)\n    this._chartPane.chartStore().shapeStore().addTemplate(templates)\n  }\n\n  /**\n   * 创建图形\n   * @param value 图形名或者图形配置\n   * @param paneId 窗口id\n   */\n  createShape (value, paneId) {\n    if (!isValid(value)) {\n      logWarn('createShape', 'value', 'value is invalid!!!')\n      return null\n    }\n    const shapeOptions = isObject(value) && !isArray(value) ? value : { name: value }\n    const Shape = this._chartPane.chartStore().shapeStore().getTemplate(shapeOptions.name)\n    if (!Shape) {\n      logWarn('createShape', 'value', 'can not find the corresponding shape!!!')\n      return null\n    }\n    const id = this._chartPane.createShape(Shape, shapeOptions, paneId)\n    if (!id) {\n      logWarn('createShape', 'options.id', 'duplicate id!!!')\n    }\n    return id\n  }\n\n  /**\n   * 获取图形标记\n   * @param shapeId 图形标记id\n   * @return {{name, lock: *, styles, id, points: (*|*[])}[]|{name, lock: *, styles, id, points: (*|*[])}}\n   */\n  getShape (shapeId) {\n    return this._chartPane.chartStore().shapeStore().getInstanceInfo(shapeId)\n  }\n\n  /**\n   * 设置图形标记配置\n   * @param options 图形标记配置\n   */\n  setShapeOptions (options) {\n    if (!isObject(options) || isArray(options)) {\n      logWarn('setShapeOptions', 'options', 'options must be an object!!!')\n      return\n    }\n    this._chartPane.chartStore().shapeStore().setInstanceOptions(options)\n  }\n\n  /**\n   * 移除图形\n   * @param shapeId 图形id\n   */\n  removeShape (shapeId) {\n    this._chartPane.chartStore().shapeStore().removeInstance(shapeId)\n  }\n\n  /**\n   * 创建注解\n   * @param annotation 单个注解或者注解数组\n   * @param paneId 窗口id\n   */\n  createAnnotation (annotation, paneId = CANDLE_PANE_ID) {\n    if (!isObject(annotation)) {\n      logWarn('createAnnotation', 'annotation', 'annotation must be an object or array!!!')\n      return\n    }\n    if (!this._chartPane.hasPane(paneId)) {\n      logWarn('createAnnotation', 'paneId', 'can not find the corresponding pane!!!')\n      return\n    }\n    const annotations = [].concat(annotation)\n    this._chartPane.createAnnotation(annotations, paneId)\n  }\n\n  /**\n   * 移除注解\n   * @param paneId 窗口id\n   * @param points 单个点或者点数组\n   */\n  removeAnnotation (paneId, points) {\n    this._chartPane.chartStore().annotationStore().remove(paneId, points)\n  }\n\n  /**\n   * 创建标签\n   * @param tag 单个标签或者标签数组\n   * @param paneId 窗口id\n   */\n  createTag (tag, paneId = CANDLE_PANE_ID) {\n    if (!isObject(tag)) {\n      logWarn('createTag', 'tag', 'tag must be an object or array!!!')\n      return\n    }\n    if (!this._chartPane.hasPane(paneId)) {\n      logWarn('createTag', 'paneId', 'can not find the corresponding pane!!!')\n      return\n    }\n    const tags = [].concat(tag)\n    this._chartPane.createTag(tags, paneId)\n  }\n\n  /**\n   * 移除标签\n   * @param paneId 窗口id\n   * @param tagId 标签id\n   */\n  removeTag (paneId, tagId) {\n    this._chartPane.chartStore().tagStore().remove(paneId, tagId)\n  }\n\n  /**\n   * 创建html元素\n   * @param html\n   * @param paneId\n   * @returns\n   */\n  createHtml (html, paneId = CANDLE_PANE_ID) {\n    if (!isObject(html)) {\n      logWarn('createHtml', 'html', 'options must be an object!!!')\n      return null\n    }\n    if (!isString(html.content) && !(html.content instanceof HTMLElement)) {\n      logWarn('createHtml', 'html.content', 'invalid html.content!!!')\n      return null\n    }\n    const pane = this._chartPane.getPane(paneId)\n    if (!pane) {\n      logWarn('createHtml', 'paneId', 'can not find the corresponding pane!!!')\n      return null\n    }\n    return pane.createHtml(html)\n  }\n\n  /**\n   * 移除html元素\n   * @param paneId\n   * @param htmlId\n   */\n  removeHtml (paneId, htmlId) {\n    if (paneId) {\n      const pane = this._chartPane.getPane(paneId)\n      pane && pane.removeHtml(htmlId)\n    } else {\n      this._chartPane.removeAllHtml()\n    }\n  }\n\n  /**\n   * 设置窗口属性\n   * @param options 窗口配置\n   */\n  setPaneOptions (options) {\n    if (!isObject(options)) {\n      logWarn('setPaneOptions', 'options', 'options must be an object!!!')\n      return\n    }\n    this._chartPane.setPaneOptions(options, false)\n  }\n\n  /**\n   * 设置是否可以缩放\n   * @param enabled 标识\n   */\n  setZoomEnabled (enabled) {\n    this._chartPane.chartStore().timeScaleStore().setZoomEnabled(enabled)\n  }\n\n  /**\n   * 是否可以缩放\n   * @return {boolean}\n   */\n  isZoomEnabled () {\n    return this._chartPane.chartStore().timeScaleStore().zoomEnabled()\n  }\n\n  /**\n   * 设置是否可以拖拽滚动\n   * @param enabled 标识\n   */\n  setScrollEnabled (enabled) {\n    this._chartPane.chartStore().timeScaleStore().setScrollEnabled(enabled)\n  }\n\n  /**\n   * 是否可以拖拽滚动\n   * @return {boolean}\n   */\n  isScrollEnabled () {\n    return this._chartPane.chartStore().timeScaleStore().scrollEnabled()\n  }\n\n  /**\n   * 按距离滚动\n   * @param distance 距离\n   * @param animationDuration 动画持续时间\n   */\n  scrollByDistance (distance, animationDuration) {\n    if (!isNumber(distance)) {\n      logWarn('scrollByDistance', 'distance', 'distance must be a number!!!')\n      return\n    }\n    if (isNumber(animationDuration) && animationDuration > 0) {\n      this._chartPane.chartStore().timeScaleStore().startScroll()\n      const startTime = new Date().getTime()\n      const animation = () => {\n        const progress = (new Date().getTime() - startTime) / animationDuration\n        const finished = progress >= 1\n        const dis = finished ? distance : distance * progress\n        this._chartPane.chartStore().timeScaleStore().scroll(dis)\n        if (!finished) {\n          requestAnimationFrame(animation)\n        }\n      }\n      animation()\n    } else {\n      this._chartPane.chartStore().timeScaleStore().startScroll()\n      this._chartPane.chartStore().timeScaleStore().scroll(distance)\n    }\n  }\n\n  /**\n   * 滚动到实时位置\n   * @param animationDuration 动画持续时间\n   */\n  scrollToRealTime (animationDuration) {\n    const dataSpace = this._chartPane.chartStore().timeScaleStore().dataSpace()\n    const difBarCount = this._chartPane.chartStore().timeScaleStore().offsetRightBarCount() - this._chartPane.chartStore().timeScaleStore().offsetRightSpace() / dataSpace\n    const distance = difBarCount * dataSpace\n    this.scrollByDistance(distance, animationDuration)\n  }\n\n  /**\n   * 滚动到指定的数据索引\n   * @param dataIndex 数据索引\n   * @param animationDuration 动画持续时间\n   */\n  scrollToDataIndex (dataIndex, animationDuration) {\n    if (!isNumber(dataIndex)) {\n      logWarn('scrollToDataIndex', 'dataIndex', 'dataIndex must be a number!!!')\n      return\n    }\n    const distance = (\n      this._chartPane.chartStore().timeScaleStore().offsetRightBarCount() + (this.getDataList().length - 1 - dataIndex)\n    ) * this._chartPane.chartStore().timeScaleStore().dataSpace()\n    this.scrollByDistance(distance, animationDuration)\n  }\n\n  /**\n   * 滚动到指定时间戳\n   * @param timestamp 时间戳\n   * @param animationDuration 动画持续时间\n   */\n  scrollToTimestamp (timestamp, animationDuration) {\n    if (!isNumber(timestamp)) {\n      logWarn('scrollToTimestamp', 'timestamp', 'timestamp must be a number!!!')\n      return\n    }\n    const dataIndex = binarySearchNearest(this.getDataList(), 'timestamp', timestamp)\n    this.scrollToDataIndex(dataIndex, animationDuration)\n  }\n\n  /**\n   * 在某个坐标点缩放\n   * @param scale 缩放比例\n   * @param coordinate 坐标点\n   * @param animationDuration 动画持续时间\n   */\n  zoomAtCoordinate (scale, coordinate, animationDuration) {\n    if (!isNumber(scale)) {\n      logWarn('zoomAtCoordinate', 'scale', 'scale must be a number!!!')\n      return\n    }\n    if (isNumber(animationDuration) && animationDuration > 0) {\n      const dataSpace = this._chartPane.chartStore().timeScaleStore().dataSpace()\n      const scaleDataSpace = dataSpace * scale\n      const difSpace = scaleDataSpace - dataSpace\n      const startTime = new Date().getTime()\n      const animation = () => {\n        const progress = (new Date().getTime() - startTime) / animationDuration\n        const finished = progress >= 1\n        const progressDataSpace = finished ? difSpace : difSpace * progress\n        this._chartPane.chartStore().timeScaleStore().zoom(progressDataSpace / dataSpace, coordinate)\n        if (!finished) {\n          requestAnimationFrame(animation)\n        }\n      }\n      animation()\n    } else {\n      this._chartPane.chartStore().timeScaleStore().zoom(scale, coordinate)\n    }\n  }\n\n  /**\n   * 在某个数据索引缩放\n   * @param scale 缩放比例\n   * @param dataIndex 索引位置\n   * @param animationDuration 动画持续时间\n   */\n  zoomAtDataIndex (scale, dataIndex, animationDuration) {\n    if (!isNumber(scale)) {\n      logWarn('zoomAtDataIndex', 'scale', 'scale must be a number!!!')\n      return\n    }\n    if (!isNumber(dataIndex)) {\n      logWarn('zoomAtDataIndex', 'dataIndex', 'dataIndex must be a number!!!')\n      return\n    }\n    const x = this._chartPane.chartStore().timeScaleStore().dataIndexToCoordinate(dataIndex)\n    this.zoomAtCoordinate(scale, { x }, animationDuration)\n  }\n\n  /**\n   * 在某个时间戳缩放\n   * @param scale 缩放比例\n   * @param timestamp 时间戳\n   * @param animationDuration 动画持续时间\n   */\n  zoomAtTimestamp (scale, timestamp, animationDuration) {\n    if (!isNumber(scale)) {\n      logWarn('zoomAtTimestamp', 'scale', 'scale must be a number!!!')\n      return\n    }\n    if (!isNumber(timestamp)) {\n      logWarn('zoomAtTimestamp', 'timestamp', 'timestamp must be a number!!!')\n      return\n    }\n    const dataIndex = binarySearchNearest(this.getDataList(), 'timestamp', timestamp)\n    this.zoomAtDataIndex(scale, dataIndex, animationDuration)\n  }\n\n  /**\n   * 将值装换成像素\n   * @param point 单个点或者点集合\n   * @param finder 过滤条件\n   */\n  convertToPixel (point, finder) {\n    return this._chartPane.convertToPixel(point, finder)\n  }\n\n  /**\n   * 将像素转换成值\n   * @param coordinate 单个坐标或者坐标集合\n   * @param finder 过滤条件\n   */\n  convertFromPixel (coordinate, finder) {\n    return this._chartPane.convertFromPixel(coordinate, finder)\n  }\n\n  /**\n   * 订阅图表动作\n   * @param type 动作类型\n   * @param callback 回调方法\n   */\n  subscribeAction (type, callback) {\n    if (!hasAction(type)) {\n      logWarn('subscribeAction', 'type', 'type does not exist!!!')\n      return\n    }\n    if (!isFunction(callback)) {\n      logWarn('subscribeAction', 'callback', 'callback must be a function!!!')\n      return\n    }\n    this._chartPane.chartStore().actionStore().subscribe(type, callback)\n  }\n\n  /**\n   * 取消订阅图表动作\n   * @param type 动作类型\n   * @param callback 回调方法\n   */\n  unsubscribeAction (type, callback) {\n    if (!hasAction(type)) {\n      logWarn('unsubscribeAction', 'type', 'type does not exist!!!')\n      return\n    }\n    this._chartPane.chartStore().actionStore().unsubscribe(type, callback)\n  }\n\n  /**\n   * 获取将图表装换成图片后的url\n   * @param includeOverlay 是否包含覆盖层\n   * @param type 图片类型\n   * @param backgroundColor 背景色\n   */\n  getConvertPictureUrl (includeOverlay, type = 'jpeg', backgroundColor = '#FFFFFF') {\n    if (type !== 'png' && type !== 'jpeg' && type !== 'bmp') {\n      logWarn('getConvertPictureUrl', 'type', 'type only supports jpeg, png and bmp!!!')\n      return\n    }\n    return this._chartPane.getConvertPictureUrl(includeOverlay, type, backgroundColor)\n  }\n\n  /**\n   * 销毁\n   */\n  destroy () {\n    this._chartPane.destroy()\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Chart from './Chart'\nimport { logError, logTag, logWarn } from './utils/logger'\nimport {\n  clone, merge, isString, isNumber, isValid, isObject, isArray, isFunction, isBoolean\n} from './utils/typeChecks'\n\nimport { formatValue, formatPrecision, formatBigNumber } from './utils/format'\n\nconst instances = {}\nlet chartBaseId = 1\nconst CHART_NAME_PREFIX = 'k_line_chart_'\n\n/**\n * 获取版本号\n * @returns {string}\n */\nfunction version () {\n  return '__BUILD_VERSION__'\n}\n\n/**\n * 初始化\n * @param ds\n * @param style\n * @returns {Chart}\n */\nfunction init (ds, style = {}) {\n  logTag()\n  const errorMessage = 'The chart cannot be initialized correctly. Please check the parameters. The chart container cannot be null and child elements need to be added!!!'\n  let dom\n  if (!ds) {\n    logError('', '', errorMessage)\n    return null\n  }\n  if (isString(ds)) {\n    dom = document.getElementById(ds)\n  } else {\n    dom = ds\n  }\n  if (!dom) {\n    logError('', '', errorMessage)\n    return null\n  }\n  let chart = instances[dom.chartId || '']\n  if (chart) {\n    logWarn('', '', 'The chart has been initialized on the dom！！！')\n    return chart\n  }\n  const id = `${CHART_NAME_PREFIX}${chartBaseId++}`\n  chart = new Chart(dom, style)\n  chart.id = id\n  dom.chartId = id\n  instances[id] = chart\n  return chart\n}\n\n/**\n * 销毁\n * @param dcs\n */\nfunction dispose (dcs) {\n  if (dcs) {\n    let id\n    if (isString(dcs)) {\n      const dom = document.getElementById(dcs)\n      id = dom && dom.chartId\n    } else if (dcs instanceof Chart) {\n      id = dcs.id\n    } else {\n      id = dcs && dcs.chartId\n    }\n    if (id) {\n      instances[id].destroy()\n      delete instances[id]\n    }\n  }\n}\n\nconst utils = {\n  clone,\n  merge,\n  isString,\n  isNumber,\n  isValid,\n  isObject,\n  isArray,\n  isFunction,\n  isBoolean,\n  formatValue,\n  formatPrecision,\n  formatBigNumber\n}\n\nexport {\n  version, init, dispose, utils\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport extension from './store/extension'\nimport { version, init, dispose, utils } from './core'\n\nconst klinecharts = {\n  version, init, dispose, utils, extension\n}\n\nexport default klinecharts\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport averagePrice from './extension/technicalindicator/directionalmovement/averagePrice'\nimport bullAndBearIndex from './extension/technicalindicator/directionalmovement/bullAndBearIndex'\nimport differentOfMovingAverage from './extension/technicalindicator/directionalmovement/differentOfMovingAverage'\nimport directionalMovementIndex from './extension/technicalindicator/directionalmovement/directionalMovementIndex'\nimport easeOfMovementValue from './extension/technicalindicator/directionalmovement/easeOfMovementValue'\nimport exponentialMovingAverage from './extension/technicalindicator/directionalmovement/exponentialMovingAverage'\nimport movingAverage from './extension/technicalindicator/directionalmovement/movingAverage'\nimport movingAverageConvergenceDivergence from './extension/technicalindicator/directionalmovement/movingAverageConvergenceDivergence'\nimport simpleMovingAverage from './extension/technicalindicator/directionalmovement/simpleMovingAverage'\nimport tripleExponentiallySmoothedAverage from './extension/technicalindicator/directionalmovement/tripleExponentiallySmoothedAverage'\n\nimport brar from './extension/technicalindicator/momentum/brar'\nimport currentRatio from './extension/technicalindicator/momentum/currentRatio'\nimport momentum from './extension/technicalindicator/momentum/momentum'\nimport psychologicalLine from './extension/technicalindicator/momentum/psychologicalLine'\nimport rateOfChange from './extension/technicalindicator/momentum/rateOfChange'\nimport volumeRatio from './extension/technicalindicator/momentum/volumeRatio'\n\nimport awesomeOscillator from './extension/technicalindicator/oscillators/awesomeOscillator'\nimport bias from './extension/technicalindicator/oscillators/bias'\nimport commodityChannelIndex from './extension/technicalindicator/oscillators/commodityChannelIndex'\nimport relativeStrengthIndex from './extension/technicalindicator/oscillators/relativeStrengthIndex'\nimport stockIndicatorKDJ from './extension/technicalindicator/oscillators/stockIndicatorKDJ'\nimport williamsR from './extension/technicalindicator/oscillators/williamsR'\n\nimport bollingerBands from './extension/technicalindicator/volatility/bollingerBands'\nimport stopAndReverse from './extension/technicalindicator/volatility/stopAndReverse'\n\nimport onBalanceVolume from './extension/technicalindicator/volume/onBalanceVolume'\nimport priceAndVolumeTrend from './extension/technicalindicator/volume/priceAndVolumeTrend'\nimport volume from './extension/technicalindicator/volume/volume'\n\nimport klinecharts from './index.simple'\n\nklinecharts.extension.addTechnicalIndicatorTemplate([\n  averagePrice, bullAndBearIndex, differentOfMovingAverage, directionalMovementIndex, easeOfMovementValue,\n  exponentialMovingAverage, movingAverage, movingAverageConvergenceDivergence, simpleMovingAverage, tripleExponentiallySmoothedAverage,\n  brar, currentRatio, momentum, psychologicalLine, rateOfChange, volumeRatio,\n  awesomeOscillator, bias, commodityChannelIndex, relativeStrengthIndex, stockIndicatorKDJ, williamsR,\n  bollingerBands, stopAndReverse,\n  onBalanceVolume, priceAndVolumeTrend, volume\n])\n\nexport default klinecharts\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { checkCoordinateOnRayLine } from './shapeHelper'\n\nexport default {\n  name: 'horizontalRayLine',\n  totalStep: 3,\n  checkEventCoordinateOnShape: ({ dataSource, eventCoordinate }) => {\n    return checkCoordinateOnRayLine(dataSource[0], dataSource[1], eventCoordinate)\n  },\n  createShapeDataSource: ({ coordinates, viewport }) => {\n    const coordinate = { x: 0, y: coordinates[0].y }\n    if (coordinates[1] && coordinates[0].x < coordinates[1].x) {\n      coordinate.x = viewport.width\n    }\n    return [\n      {\n        type: 'line',\n        isDraw: true,\n        isCheck: true,\n        dataSource: [[coordinates[0], coordinate]]\n      }\n    ]\n  },\n  performEventPressedMove: ({ points, pressPoint }) => {\n    points[0].value = pressPoint.value\n    points[1].value = pressPoint.value\n  },\n  performEventMoveForDrawing: ({ step, points, movePoint }) => {\n    if (step === 2) {\n      points[0].value = movePoint.value\n    }\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { checkCoordinateOnSegment } from './shapeHelper'\n\nexport default {\n  name: 'horizontalSegment',\n  totalStep: 3,\n  checkEventCoordinateOnShape: ({ dataSource, eventCoordinate }) => {\n    return checkCoordinateOnSegment(dataSource[0], dataSource[1], eventCoordinate)\n  },\n  createShapeDataSource: ({ coordinates }) => {\n    let lines = []\n    if (coordinates.length === 2) {\n      lines = [coordinates]\n    }\n    return [\n      {\n        type: 'line',\n        isDraw: true,\n        isCheck: true,\n        dataSource: lines\n      }\n    ]\n  },\n  performEventPressedMove: ({ points, pressPoint }) => {\n    points[0].value = pressPoint.value\n    points[1].value = pressPoint.value\n  },\n  performEventMoveForDrawing: ({ step, points, movePoint }) => {\n    if (step === 2) {\n      points[0].value = movePoint.value\n    }\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { checkCoordinateOnStraightLine } from './shapeHelper'\n\nexport default {\n  name: 'horizontalStraightLine',\n  totalStep: 2,\n  checkEventCoordinateOnShape: ({ dataSource, eventCoordinate }) => {\n    return checkCoordinateOnStraightLine(dataSource[0], dataSource[1], eventCoordinate)\n  },\n  createShapeDataSource: ({ coordinates, viewport }) => {\n    return [\n      {\n        type: 'line',\n        isDraw: true,\n        isCheck: true,\n        dataSource: [[\n          {\n            x: 0,\n            y: coordinates[0].y\n          }, {\n            x: viewport.width,\n            y: coordinates[0].y\n          }\n        ]]\n      }\n    ]\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { checkCoordinateOnRayLine } from './shapeHelper'\n\nexport default {\n  name: 'verticalRayLine',\n  totalStep: 3,\n  checkEventCoordinateOnShape: ({ dataSource, eventCoordinate }) => {\n    return checkCoordinateOnRayLine(dataSource[0], dataSource[1], eventCoordinate)\n  },\n  createShapeDataSource: ({ coordinates, viewport }) => {\n    const coordinate = { x: coordinates[0].x, y: 0 }\n    if (coordinates[1] && coordinates[0].y < coordinates[1].y) {\n      coordinate.y = viewport.height\n    }\n    return [\n      {\n        type: 'line',\n        isDraw: true,\n        isCheck: true,\n        dataSource: [[coordinates[0], coordinate]]\n      }\n    ]\n  },\n  performEventPressedMove: ({ points, pressPoint }) => {\n    points[0].timestamp = pressPoint.timestamp\n    points[0].dataIndex = pressPoint.dataIndex\n    points[1].timestamp = pressPoint.timestamp\n    points[1].dataIndex = pressPoint.dataIndex\n  },\n  performEventMoveForDrawing: ({ step, points, movePoint }) => {\n    if (step === 2) {\n      points[0].timestamp = movePoint.timestamp\n      points[0].dataIndex = movePoint.dataIndex\n    }\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { checkCoordinateOnSegment } from './shapeHelper'\n\nexport default {\n  name: 'verticalSegment',\n  totalStep: 3,\n  checkEventCoordinateOnShape: ({ dataSource, eventCoordinate }) => {\n    return checkCoordinateOnSegment(dataSource[0], dataSource[1], eventCoordinate)\n  },\n  createShapeDataSource: ({ coordinates }) => {\n    let lines = []\n    if (coordinates.length === 2) {\n      lines = [coordinates]\n    }\n    return [\n      {\n        type: 'line',\n        isDraw: true,\n        isCheck: true,\n        dataSource: lines\n      }\n    ]\n  },\n  performEventPressedMove: ({ points, pressPoint }) => {\n    points[0].timestamp = pressPoint.timestamp\n    points[0].dataIndex = pressPoint.dataIndex\n    points[1].timestamp = pressPoint.timestamp\n    points[1].dataIndex = pressPoint.dataIndex\n  },\n  performEventMoveForDrawing: ({ step, points, movePoint }) => {\n    if (step === 2) {\n      points[0].timestamp = movePoint.timestamp\n      points[0].dataIndex = movePoint.dataIndex\n    }\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { checkCoordinateOnStraightLine } from './shapeHelper'\n\nexport default {\n  name: 'verticalStraightLine',\n  totalStep: 2,\n  checkEventCoordinateOnShape: ({ dataSource, eventCoordinate }) => {\n    return checkCoordinateOnStraightLine(dataSource[0], dataSource[1], eventCoordinate)\n  },\n  createShapeDataSource: ({ coordinates, viewport }) => {\n    return [\n      {\n        type: 'line',\n        isDraw: true,\n        isCheck: true,\n        dataSource: [[\n          {\n            x: coordinates[0].x,\n            y: 0\n          }, {\n            x: coordinates[0].x,\n            y: viewport.height\n          }\n        ]]\n      }\n    ]\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { checkCoordinateOnRayLine, getRayLine } from './shapeHelper'\n\nexport default {\n  name: 'rayLine',\n  totalStep: 3,\n  checkEventCoordinateOnShape: ({ dataSource, eventCoordinate }) => {\n    return checkCoordinateOnRayLine(dataSource[0], dataSource[1], eventCoordinate)\n  },\n  createShapeDataSource: ({ coordinates, viewport }) => {\n    return [\n      {\n        type: 'line',\n        isDraw: true,\n        isCheck: true,\n        dataSource: [getRayLine(coordinates[0], coordinates[1], { x: viewport.width, y: viewport.height })]\n      }\n    ]\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { checkCoordinateOnSegment } from './shapeHelper'\n\nexport default {\n  name: 'segment',\n  totalStep: 3,\n  checkEventCoordinateOnShape: ({ dataSource, eventCoordinate }) => {\n    return checkCoordinateOnSegment(dataSource[0], dataSource[1], eventCoordinate)\n  },\n  createShapeDataSource: ({ coordinates }) => {\n    let lines = []\n    if (coordinates.length === 2) {\n      lines = [coordinates]\n    }\n    return [\n      {\n        type: 'line',\n        isDraw: true,\n        isCheck: true,\n        dataSource: lines\n      }\n    ]\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { checkCoordinateOnStraightLine, getLinearYFromCoordinates } from './shapeHelper'\n\nexport default {\n  name: 'straightLine',\n  totalStep: 3,\n  checkEventCoordinateOnShape: ({ dataSource, eventCoordinate }) => {\n    return checkCoordinateOnStraightLine(dataSource[0], dataSource[1], eventCoordinate)\n  },\n  createShapeDataSource: ({ coordinates, viewport }) => {\n    if (coordinates.length < 2 || coordinates[0].x === coordinates[1].x) {\n      return [\n        {\n          type: 'line',\n          isDraw: true,\n          isCheck: true,\n          dataSource: [[\n            {\n              x: coordinates[0].x,\n              y: 0\n            }, {\n              x: coordinates[0].x,\n              y: viewport.height\n            }\n          ]]\n        }\n      ]\n    }\n    return [\n      {\n        type: 'line',\n        isDraw: true,\n        isCheck: true,\n        dataSource: [[\n          {\n            x: 0,\n            y: getLinearYFromCoordinates(coordinates[0], coordinates[1], { x: 0, y: coordinates[0].y })\n          }, {\n            x: viewport.width,\n            y: getLinearYFromCoordinates(coordinates[0], coordinates[1], { x: viewport.width, y: coordinates[0].y })\n          }\n        ]]\n      }\n    ]\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { checkCoordinateOnStraightLine, getParallelLines } from './shapeHelper'\n\nexport default {\n  name: 'parallelStraightLine',\n  totalStep: 4,\n  checkEventCoordinateOnShape: ({ dataSource, eventCoordinate }) => {\n    return checkCoordinateOnStraightLine(dataSource[0], dataSource[1], eventCoordinate)\n  },\n  createShapeDataSource: ({ coordinates, viewport }) => {\n    return [\n      {\n        type: 'line',\n        isDraw: true,\n        isCheck: true,\n        dataSource: getParallelLines(coordinates, { x: viewport.width, y: viewport.height })\n      }\n    ]\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { checkCoordinateOnStraightLine, getParallelLines } from './shapeHelper'\n\nexport default {\n  name: 'priceChannelLine',\n  totalStep: 4,\n  checkEventCoordinateOnShape: ({ dataSource, eventCoordinate }) => {\n    return checkCoordinateOnStraightLine(dataSource[0], dataSource[1], eventCoordinate)\n  },\n  createShapeDataSource: ({ coordinates, viewport }) => {\n    return [\n      {\n        type: 'line',\n        isDraw: true,\n        isCheck: true,\n        dataSource: getParallelLines(coordinates, { x: viewport.width, y: viewport.height }, 1)\n      }\n    ]\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { checkCoordinateOnRayLine } from './shapeHelper'\n\nexport default {\n  name: 'priceLine',\n  totalStep: 2,\n  checkEventCoordinateOnShape: ({ dataSource, eventCoordinate }) => {\n    return checkCoordinateOnRayLine(dataSource[0], dataSource[1], eventCoordinate)\n  },\n  createShapeDataSource: ({ coordinates, viewport, precision, points }) => {\n    const { value } = points[0]\n    return [\n      {\n        type: 'line',\n        isDraw: true,\n        isCheck: true,\n        dataSource: [[coordinates[0], { x: viewport.width, y: coordinates[0].y }]]\n      },\n      {\n        type: 'text',\n        isDraw: true,\n        isCheck: false,\n        dataSource: [\n          { x: coordinates[0].x, y: coordinates[0].y, text: value.toFixed(precision.price) }\n        ]\n      }\n    ]\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { checkCoordinateOnStraightLine } from './shapeHelper'\n\nexport default {\n  name: 'fibonacciLine',\n  totalStep: 3,\n  checkEventCoordinateOnShape: ({ dataSource, eventCoordinate }) => {\n    return checkCoordinateOnStraightLine(dataSource[0], dataSource[1], eventCoordinate)\n  },\n  createShapeDataSource: ({ points, coordinates, viewport, precision }) => {\n    if (coordinates.length > 0) {\n      const lines = []\n      const texts = []\n      const startX = 0\n      const endX = viewport.width\n      if (coordinates.length > 1) {\n        const percents = [1, 0.786, 0.618, 0.5, 0.382, 0.236, 0]\n        const yDif = coordinates[0].y - coordinates[1].y\n        const valueDif = points[0].value - points[1].value\n        percents.forEach(percent => {\n          const y = coordinates[1].y + yDif * percent\n          const value = (points[1].value + valueDif * percent).toFixed(precision.price)\n          lines.push([{ x: startX, y }, { x: endX, y }])\n          texts.push({\n            x: startX,\n            y,\n            text: `${value} (${(percent * 100).toFixed(1)}%)`\n          })\n        })\n      }\n      return [\n        {\n          type: 'line',\n          isDraw: true,\n          isCheck: true,\n          dataSource: lines\n        }, {\n          type: 'text',\n          isDraw: true,\n          isCheck: false,\n          dataSource: texts\n        }\n      ]\n    }\n    return []\n  }\n}\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport klinecharts from './index.blank'\n\nimport horizontalRayLine from './extension/shape/horizontalRayLine'\nimport horizontalSegment from './extension/shape/horizontalSegment'\nimport horizontalStraightLine from './extension/shape/horizontalStraightLine'\n\nimport verticalRayLine from './extension/shape/verticalRayLine'\nimport verticalSegment from './extension/shape/verticalSegment'\nimport verticalStraightLine from './extension/shape/verticalStraightLine'\n\nimport rayLine from './extension/shape/rayLine'\nimport segment from './extension/shape/segment'\nimport straightLine from './extension/shape/straightLine'\n\nimport parallelStraightLine from './extension/shape/parallelStraightLine'\nimport priceChannelLine from './extension/shape/priceChannelLine'\nimport priceLine from './extension/shape/priceLine'\nimport fibonacciLine from './extension/shape/fibonacciLine'\n\nklinecharts.extension.addShapeTemplate([\n  horizontalRayLine, horizontalSegment, horizontalStraightLine,\n  verticalRayLine, verticalSegment, verticalStraightLine,\n  rayLine, segment, straightLine,\n  parallelStraightLine, priceChannelLine, priceLine, fibonacciLine\n])\n\nexport default klinecharts\n"],"names":["name","shortName","series","precision","plots","key","title","type","calcTechnicalIndicator","dataList","totalTurnover","totalVolume","map","kLineData","avp","turnover","volume","calcParams","shouldCheckParamCount","shouldOhlc","params","maxPeriod","Math","max","apply","closeSums","mas","i","bbi","close","forEach","p","index","maSum","ma","closeSum1","closeSum2","dmaSum","result","dma","ma1","ma2","dif","ama","push","trSum","hSum","lSum","mtr","dmp","dmm","dxSum","adx","dmi","preKLineData","preClose","high","low","hl","hcy","abs","lcy","hhy","lyl","tr","h","l","pdi","mdi","dx","adxr","emSum","emvSum","emList","emv","halfHl","preHalfHl","em","maEmv","regeneratePlots","closeSum","emaValues","ema","baseValue","color","data","options","current","macd","technicalIndicatorData","bar","upColor","downColor","noChangeColor","isStroke","prev","preMacd","emaShort","emaLong","difSum","dea","kLineDataList","smaValue","sma","ema1","ema2","oldTr","ema1Sum","ema2Sum","trixSum","trix","trixValue","maTrix","cyl","ho","ol","brar","open","ar","br","agoKLineData","agoHigh","agoLow","agoOpen","agoPreClose","ma1ForwardPeriod","ceil","ma2ForwardPeriod","ma3ForwardPeriod","ma4ForwardPeriod","ma1Sum","ma1List","ma2Sum","ma2List","ma3Sum","ma3List","ma4Sum","ma4List","cr","preData","preMid","highSubPreMid","preMidSubLow","length","ma3","ma4","mtmSum","mtm","agoClose","maMtm","upCount","psySum","upList","psy","upFlag","maPsy","rocSum","roc","maRoc","uvs","dvs","pvs","vrSum","vr","halfPvs","maVr","agoData","agoPreData","agoVolume","preAo","ao","shortSum","longSum","short","long","middle","bias","mean","tpSum","tpList","cci","tp","maTp","sliceTpList","slice","sum","md","agoTp","_","num","sumCloseAs","sumCloseBs","rsi","tmp","agoTmp","calcHnLn","hn","Number","MIN_SAFE_INTEGER","ln","MAX_SAFE_INTEGER","min","kdj","lhn","hnSubLn","rsv","k","d","j","wr","param","hln","getBollMd","dataSize","closeMa","b","sqrt","value","allowDecimal","boll","mid","up","dn","halfHL","sar","circle","startAf","step","maxAf","af","ep","isIncreasing","preSar","lowMin","highMax","obvSum","oldObv","obv","maObv","pvt","x","shouldFormatBigNumber","minValue","volSums","vol","technicalIndicatorExtensions","shapeExtensions","addTechnicalIndicatorTemplate","template","concat","addShapeTemplate","_typeof","merge","target","source","isObject","Object","prototype","hasOwnProperty","call","targetProp","sourceProp","isArray","isValid","clone","copy","v","toString","isFunction","isNumber","isNaN","undefined","isBoolean","isString","StrokeFillStyle","STROKE","FILL","LineStyle","DASH","SOLID","YAxisPosition","LEFT","RIGHT","YAxisType","NORMAL","PERCENTAGE","LOG","CandleType","CANDLE_SOLID","CANDLE_STROKE","CANDLE_UP_STROKE","CANDLE_DOWN_STROKE","OHLC","AREA","TooltipShowRule","ALWAYS","FOLLOW_CROSS","NONE","TooltipShowType","RECT","STANDARD","AnnotationSymbolType","CIRCLE","TRIANGLE","DIAMOND","CUSTOM","OverlayPosition","POINT","TOP","BOTTOM","defaultGrid","show","horizontal","size","style","dashValue","vertical","defaultCandle","margin","top","bottom","area","lineSize","lineColor","backgroundColor","offset","priceMark","textMargin","textSize","textFamily","textWeight","last","line","text","paddingLeft","paddingTop","paddingRight","paddingBottom","family","weight","borderRadius","tooltip","showRule","showType","labels","values","defaultValue","rect","offsetLeft","offsetTop","offsetRight","borderSize","borderColor","marginLeft","marginTop","marginRight","marginBottom","defaultTechnicalIndicator","colors","lastValueMark","showName","showParams","defaultXAxis","height","axisLine","tickText","tickLine","defaultYAxis","width","position","inside","reverse","defaultCrosshair","defaultShape","point","radius","activeBackgroundColor","activeBorderColor","activeBorderSize","activeRadius","polygon","stroke","fill","arc","defaultAnnotation","symbol","activeSize","activeColor","defaultTag","mark","defaultSeparator","defaultStyleOptions","grid","candle","technicalIndicator","xAxis","yAxis","separator","crosshair","shape","annotation","tag","formatValue","formatDate","dateTimeFormat","timestamp","format","dateTimeString","Date","dateTimeStringArray","split","dateStringArray","date","YYYY","MM","DD","match","replace","formatPrecision","toFixed","formatBigNumber","logWarn","api","invalidParam","append","console","log","logError","logTag","binarySearchNearest","valueKey","targetValue","left","right","midIndex","floor","midValue","nice","exponent","log10","exp10","index10","f","nf","round","getPrecision","str","eIndex","indexOf","dotIndex","pow","ActionType","ZOOM","SCROLL","CROSSHAIR","TOOLTIP","PANE_DRAG","hasAction","MIN_DATA_SPACE","MAX_DATA_SPACE","TimeScaleStore","chartStore","_chartStore","_dateTimeFormat","Intl","DateTimeFormat","hour12","year","month","day","hour","minute","_zoomEnabled","_scrollEnabled","_loading","_loadMoreCallback","_more","_totalDataSpace","_dataSpace","_barSpace","_calcBarSpace","_offsetRightSpace","_offsetRightBarCount","_leftMinVisibleBarCount","_rightMinVisibleBarCount","_from","_to","_preOffsetRightBarCount","rateBarSpace","floorBarSpace","optimalBarSpace","barLength","maxRightOffsetBarCount","minRightOffsetBarCount","adjustVisibleDataList","more","loading","timezone","timeZone","e","resolvedOptions","dataSpace","adjustBeforeFuc","adjustFromTo","crosshairStore","recalculate","invalidate","totalSpace","space","setOffsetRightSpace","barCount","distance","distanceBarCount","actionStore","execute","cross","get","set","dataIndex","deltaFromRight","getDataByDataIndex","pixel","coordinateToFloatIndex","scale","coordinate","floatIndex","setDataSpace","enabled","callback","setPrototypeOf","assertThisInitialized","require$$0","TechnicalIndicatorPlotType","LINE","BAR","TechnicalIndicatorSeries","PRICE","VOLUME","getTechnicalIndicatorPlotStyle","techDataList","plot","techStyles","defaultStyle","isDashed","cbData","next","TechnicalIndicator","maxValue","styles","extendData","_precisionFlag","flag","parseInt","oldParam","_createParams","defaultStyles","_regeneratorRuntime","TechnicalIndicatorStore","_templates","_createTemplates","_instances","Map","tech","mapping","extensions","extension","templateInstance","_createTemplateInstance","createToolTipDataSource","render","techOptions","styleOptions","Template","_createSuper","templates","instance","_createTechInfo","templateInfos","paneId","isStack","paneInstances","has","create","getPrototypeOf","setCalcParams","setPrecision","setShouldOhlc","setShouldFormatBigNumber","setStyles","setExtendData","clear","calc","removed","delete","tasks","Promise","all","info","instanceInfos","_createForOfIteratorHelper","entry","instanceInfo","infos","paneInstance","pricePrecision","volumePrecision","techOverride","defaultTechStyleOptions","instances","setShortName","overiderSuccss","shortNameSuccess","calcParamsSuccess","precisionSuccess","shouldOhlcSuccess","shouldFormatBigNumberSuccess","styleSuccess","extendDataSuccess","perfectOverlayFunc","overlay","funcs","fn","Overlay","id","points","_id","_points","_xAxis","_yAxis","_styles","ctx","event","renderFillCircle","fillColor","circleCoordinate","fillStyle","beginPath","y","PI","closePath","DEVIATION","getTriangleSquare","coordinate1","coordinate2","coordinate3","x1","y1","x2","y2","getLinearSlopeIntercept","difX","getLinearYFromCoordinates","targetCoordinate","kb","getLinearYFromSlopeIntercept","checkCoordinateOnStraightLine","yDif","checkCoordinateOnRayLine","checkCoordinateOnSegment","checkCoordinateInCircle","circleCenterCoordinate","difY","checkCoordinateInTriangle","triangleCoordinates","square","compareSquare","checkCoordinateInDiamond","centerCoordinate","xDis","yDis","checkCoordinateInRect","getRayLine","xyMax","getParallelLines","coordinates","extendParallelLineCount","lines","startY","endY","startX","endX","b1","b2","renderPath","strokeFill","save","lineWidth","translate","move","moveTo","lineTo","restore","renderCloseStrokePath","renderCloseFillPath","renderHorizontalLine","correction","renderVerticalLine","renderLine","getPixelRatio","canvas","ownerDocument","defaultView","devicePixelRatio","calcTextWidth","measureText","createFont","fontSize","fontWeight","fontFamily","getTextRectWidth","font","textWidth","getTextRectHeight","SHAPE_DRAW_STEP_START","SHAPE_DRAW_STEP_FINISHED","ShapeEventOperateElement","OTHER","ShapeElementType","TEXT","CONTINUOUS_LINE","POLYGON","ARC","LineType","COMMON","HORIZONTAL","VERTICAL","ShapeMode","WEAK_MAGNET","STRONG_MAGNET","getLineType","Shape","totalStep","lock","mode","_name","_totalStep","_lock","_mode","setMode","_data","_drawStep","setPoints","_prevPressPoint","_prevPoints","_coordinates","repeatTotalStep","performEventMoveForDrawing","movePoint","performEventPressedMove","pressPointIndex","pressPoint","timeScaleStore","timestampToDataIndex","convertToPixel","strokeStyle","setLineDash","lineType","continuousLines","polygons","strokeStyles","arcs","startAngle","endAngle","texts","fillStroke","strokeText","fillText","_timestampOrDataIndexToCoordinateX","shapeOptions","viewport","price","_shapeDataSources","createShapeDataSource","isDraw","dataSource","_drawLines","_drawContinuousLines","_drawPolygons","_drawArcs","_drawText","drawExtend","shapeEventOperate","shapeStore","eventOperate","hover","element","click","isDrawing","elementIndex","eventCoordinate","start","isCheck","sources","checkEventCoordinateOnShape","convertFromPixel","highY","buffValue","lowY","dataIndexToTimestamp","_performValue","onDrawing","progressInstanceComplete","onDrawEnd","onPressedMove","difDataIndex","difValue","InvalidateLevel","OVERLAY","MAIN","FULL","ShapeStore","_eventOperate","_progressInstance","_pressedInstance","TemplateClass","_createTemplateClass","shapeId","find","s","getInstance","fixed","progressInstance","setYAxis","shouldInvalidate","setLock","setData","shapes","onRemove","removeIndex","findIndex","splice","operate","hoverSuccess","clickSuccess","pressedInstance","AnnotationStore","_annotations","_visibleAnnotations","visibleDataList","annotations","an","createSymbolCoordinate","timestampAnnotations","createVisibleAnnotations","shouldAdjust","paneAnnotations","TagStore","_tags","tags","_getById","update","idTags","tagId","paneTags","ids","CrosshairStore","_crosshair","notInvalidate","realDataIndex","coordinateToDataIndex","realX","dataIndexToCoordinate","prevCrosshair","crosshairChange","Delegate","_observers","observer","ActionStore","_delegates","hasObservers","subscribe","delegate","unsubscribe","ChartStore","handler","_handler","_styleOptions","_pricePrecision","_volumePrecision","_dataList","_visibleDataList","_dragPaneFlag","_timeScaleStore","_technicalIndicatorStore","_shapeStore","_annotationStore","_tagStore","_crosshairStore","_actionStore","from","to","setSeriesPrecision","pos","setLoading","setMore","isFirstAdd","resetOffsetRightSpace","offsetRightBarCount","setOffsetRightBarCount","invalidateLevel","superPropBase","createElement","document","ContainerPosition","ROOT","CONTENT","YAXIS","Pane","props","_height","_container","container","_initBefore","_initElement","_mainWidget","_createMainWidget","_element","_yAxisWidget","_createYAxisWidget","padding","overflow","boxSizing","lastElement","lastChild","insertBefore","appendChild","offsetWidth","mainWidgetWidth","yAxisWidgetWidth","setWidth","setHeight","mainWidgetOffsetLeft","yAxisWidgetOffsetLeft","setOffsetLeft","offsetHeight","layout","level","content","htmlId","createHtml","removeHtml","includeOverlay","getContext","pixelRatio","mainWidgetElement","getElement","mainWidgetHeight","drawImage","getImage","yAxisWidgetElement","yAxisWidgetHeight","removeChild","Widget","_width","_mainView","_createMainView","_overlayView","_createOverlayView","_htmlBaseId","_htmls","html","_objectSpread","zIndex","innerHTML","replaceChild","flush","requestAnimationFrame","window","setTimeout","cancelAnimationFrame","clearTimeout","View","_initCanvas","_canvas","_ctx","extendFun","clearRect","_draw","_redraw","requestAnimationId","TechnicalIndicatorView","_paneId","globalCompositeOperation","_drawContent","_drawTechs","_drawGrid","gridOptions","gridHorizontalOptions","ticks","tick","gridVerticalOptions","techs","technicalIndicatorStore","techResult","technicalIndicatorDataList","barSpace","lineColors","lineColorSize","linePlotStyles","lineCoordinates","isCandleYAxis","_drawGraphics","halfBarSpace","techData","lineCount","_drawCandleBar","valueY","plotStyle","_drawCircle","baseValueY","_drawBar","prePlotStyle","n","strokeRect","fillRect","barOptions","barStyle","openY","closeY","priceY","sort","a","barHeight","renderText","TechnicalIndicatorOverlayView","textBaseline","_drawTag","_drawShape","_drawAnnotation","crosshairOptions","_drawCrosshairLine","_drawTooltip","annotationStore","draw","tagStore","drawMarkLine","progressShape","_drawBatchTechToolTip","_shouldDrawTooltip","optionsKey","end","drawLine","crosshairDirectionOptions","crosshairLineOptions","isDrawTechTooltip","techTooltipOptions","startTop","_drawTechTooltip","techTooltipTextOptions","textMarginLeft","textMarginRight","textColor","labelX","labelY","tooltipHeight","tooltipData","_getTechTooltipData","nameText","nameTextWidth","calcParamText","calcParamTextWidth","tooltipOptions","join","colorSize","TechnicalIndicatorWidget","renderStrokeFillRoundRect","renderFillRoundRect","renderStrokeRoundRect","renderFillRect","w","r","renderRoundRect","arcTo","YAxisView","yAxisOptions","_drawAxisLine","_drawTickLines","_drawTickLabels","_drawTechLastValue","_drawLastPriceLabel","isFromYAxisZero","tickLineLength","tickLineShow","textAlign","lastValueMarkOptions","_drawMarkLabel","priceMarkOptions","lastPriceMarkOptions","convertToNicePixel","yAxisType","fromData","fromClose","rectWidth","rectHeight","rectStartX","YAxisOverlayView","_drawCrossHairLabel","drawText","crosshairHorizontalOptions","crosshairHorizontalTextOptions","rectY","YAxisWidget","Axis","_cacheMinValue","_cacheMaxValue","_minValue","_maxValue","_range","_realMinValue","_realMaxValue","_realRange","_ticks","_initMeasureCanvas","measureCanvas","_measureCtx","forceCompute","minMax","_optimalMinMax","_computeMinMax","range","realMin","realMax","realRange","_optimalTicks","_computeTicks","intervalPrecision","_computeInterval","interval","first","YAxis","_isCandleYAxis","minMaxArray","plotsResult","techPrecision","techGap","candleOptions","isArea","areaValueKey","shouldCompareHighLow","specifyMin","specifyMax","minCheck","maxCheck","marginOptions","topRate","rate","bottomRate","realMinValue","realMaxValue","optimalTicks","textHeight","validY","_innerConvertToPixel","isReverse","yAxisWidth","crosshairVerticalTextWidth","valueText","TechnicalIndicatorPane","_minHeight","_initHeight","_createYAxis","minHeight","setMinHeight","mh","CandleView","_drawLastPriceLine","_drawArea","_drawHighLowPrice","_drawCandle","areaCoordinates","minY","areaOptions","areaCoordinateLength","lastCoordinate","gradient","createLinearGradient","addColorStop","highest","lowest","highOffset","lowOffset","_drawRealHighLowPrice","CandleOverlayView","candleTooltipOptions","isDrawCandleTooltip","_drawCandleTooltipWithRect","_drawCandleTooltipWithStandard","_getCandleTooltipData","label","labelWidth","valueColor","baseLabels","baseValues","baseTextMarginLeft","baseTextMarginRight","baseTextMarginTop","baseTextMarginBottom","baseTextSize","baseTextColor","rectOptions","rectBorderSize","rectPaddingLeft","rectPaddingRight","rectPaddingTop","rectPaddingBottom","rectLeft","rectRight","maxLabelWidth","techTooltipTextMarginLeft","techTooltipTextMarginRight","techTooltipTextMarginTop","techTooltipTextMarginBottom","techTooltipTextSize","techTooltipDataList","centerX","rectX","baseLabelX","indicatorLabelX","CandleWidget","CandlePane","XAxisView","xAxisOptions","xAxisLine","tickLength","XAxisOverlayView","_drawCrosshairLabel","crosshairVerticalOptions","crosshairVerticalTextOptions","XAxisWidget","XAxis","defaultLabelWidth","tickCountDif","nextPos","nextX","xDif","prePos","preTimestamp","_optimalTickLabel","oV","optimalTickLength","firstTimestamp","secondTimestamp","thirdV","test","comparedTimestamp","stylOptions","xAxisHeight","crosshairVerticalTextHeight","XAxisPane","ID","_baseId","prefix","getTime","_prevIdTimestamp","createId","EventType","MOUSE","TOUCH","isTouch","isMouse","MouseEventButton","DELAY_RESET_CLICK","DELAY_LONG_TAG","getBoundingClientRect","isTouchEvent","Boolean","touches","preventDefault","cancelable","mobileTouch","touchEvent","DocumentTouch","navigator","maxTouchPoints","msMaxTouchPoints","getDistance","p1","p2","xDiff","clientX","yDiff","clientY","EventBase","eventHandler","_target","_options","_clickCount","_clickTimeoutId","_longTapTimeoutId","_longTapActive","_mouseMoveStartPosition","_moveExceededManhattanDistance","_cancelClick","_unsubscribeOutsideEvents","_unsubscribeMousemove","_unsubscribeRoot","_startPinchMiddleCoordinate","_startPinchDistance","_pinchPrevented","_preventDragProcess","_mousePressed","_init","_clearLongTapTimeout","_resetClickTimeout","enterEvent","boundMouseMoveHandler","_mouseMoveHandler","bind","boundMouseWheelHandler","_mouseWheelHandler","removeEventListener","addEventListener","passive","compatEvent","_makeCompatEvent","_processEvent","mouseEnterEvent","moveEvent","mouseMoveEvent","wheelEvent","localX","localY","mouseWheelEvent","button","startMouseMovePos","xOffset","pageX","yOffset","pageY","moveExceededManhattanDistance","correctedXOffset","isVertDrag","treatVertTouchDragAsPageScroll","isHorzDrag","treatHorzTouchDragAsPageScroll","pressedMouseMoveEvent","mouseUpEvent","_mouseLeaveHandler","mouseDoubleClickEvent","mouseClickEvent","downEvent","mouseRightDownEvent","_mouseEnterHandler","boundMouseMoveWithDownHandler","_mouseMoveWithDownHandler","boundMouseUpHandler","_mouseUpHandler","rootElement","documentElement","_longTapHandler","mouseDownEvent","doc","outsideHandler","mouseDownOutsideEvent","contains","_mouseDownHandler","_initPinch","pinchStartEvent","pinchEvent","pinchEndEvent","_checkPinchState","currentDistance","_stopPinch","_startPinch","box","mouseLeaveEvent","longTapEvent","eventLike","changedTouches","screenX","screenY","ctrlKey","altKey","shiftKey","metaKey","startsWith","view","SeparatorPane","topPaneId","bottomPaneId","dragEnabled","dragEventHandler","_topPaneId","_bottomPaneId","_dragEnabled","_offsetLeft","_dragEventHandler","_dragFlag","_initEvent","_wrapper","cursor","_dragEvent","_mouseDownEvent","_mouseUpEvent","_pressedMouseMoveEvent","_mouseEnterEvent","_mouseLeaveEvent","_startY","startDrag","setDragPaneFlag","dragDistance","drag","separatorOptions","background","destroy","EventHandler","TOUCH_MIN_RADIUS","ZoomScrollEventHandler","_flingStartTime","_flingScrollTimerId","_startScrollCoordinate","_touchCoordinate","_touchCancelCrosshair","_touchZoomed","_pinchScale","middleCoordinate","zoomScale","zoom","time","flingScroll","startScroll","scroll","paneY","deltaX","deltaY","deltaMode","DOM_DELTA_PAGE","DOM_DELTA_LINE","sign","OverlayEventHandler","overlays","preHoverOperate","hoverOperate","checkEventCoordinateOn","onMouseLeave","onMouseEnter","updatePressedInstance","_waitingForMouseMove","shapeHoverOperate","shapeClickOperate","annotationHoverOperate","isStart","updateProgressInstance","mouseMoveForDrawing","prevShapeHoverOperate","prevAnnotationHoverOperate","_performOverlayMouseHover","setEventOperate","progressShapePaneId","mouseLeftButtonDownForDrawing","startPressedOtherMove","onClick","visibleAnnotations","annotationOperate","shapeOperateValid","removeShape","onRightClick","removeInstance","mousePressedPointMove","mousePressedOtherMove","KeyBoardCode","EQUAL","MINUS","ARROW_LEFT","ARROW_RIGHT","KeyBoardEventHandler","code","ChartEvent","_chartContentLeftRight","_chartContentTopBottom","_paneContentSize","_event","_pinchStartEvent","_pinchEvent","_mouseClickEvent","_mouseRightDownEvent","_mouseMoveEvent","_mouseWheelEvent","_longTapEvent","_boundKeyBoardDownEvent","_keyBoardDownEvent","_boundContextMenuEvent","_zoomScrollEventHandler","_overlayEventHandler","_keyBoardEventHandler","keyBoardDownEvent","_checkEventInChartContent","_shouldPerformOverlayEvent","HTMLCanvasElement","_compatChartEvent","dragPaneFlag","_checkZoomScroll","_modifyEventOptions","isPressed","isEmpty","setOptions","compatY","contentTop","contentBottom","contentLeft","contentRight","chartContentLeftRight","chartContentTopBottom","paneContentSize","throttle","func","wait","previous","now","context","args","arguments","renderFillDiamond","renderFillTriangle","Annotation","_symbolCoordinate","isActive","symbolOptions","styleSize","styleActiveSize","drawCustomSymbol","_drawSymbol","isOn","checkEventCoordinateOnCustomSymbol","Tag","_text","_mark","success","tagOptions","_getY","_drawLine","_drawMark","tagTextOptions","tagLineOptions","textRectWidth","markRectWidth","markOffset","textValid","markValid","tagMarkOptions","DEFAULT_TECH_PANE_HEIGHT","TECH_PANE_ID_PREFIX","SHAPE_ID_PREFIX","ANNOTATION_ID_PREFIX","CANDLE_PANE_ID","XAXIS_PANE_ID","ChartPane","_initChartContainer","_separatorDragStartTopPaneHeight","_separatorDragStartBottomPaneHeight","_invalidatePane","_crosshairObserver","_xAxisPane","_chartContainer","_panes","_separators","_chartWidth","_chartHeight","_chartEvent","adjustPaneViewport","userSelect","webkitUserSelect","msUserSelect","MozUserSelect","webkitTapHighlightColor","outline","borderStyle","tabIndex","techDatas","topPane","bottomPane","topPaneMinHeight","bottomPaneMinHeight","topPaneHeight","bottomPaneHeight","pane","shouldMeasureWidth","should","computeAxis","paneHeight","separatorSize","separatorTotalHeight","getSelfHeight","paneExcludeXAxisSeparatorHeight","techPaneTotalHeight","paneMinHeight","candlePaneHeight","total","setPaneContentSize","setChartContentTopBottom","isYAxisLeft","isOutside","paneWidth","mainWidth","yAxisOffsetLeft","mainOffsetLeft","getSelfWidth","totalDataSpace","setTotalDataSpace","setSize","setChartContentLeftRight","shouldMeasureHeight","shouldLayout","shouldComputeAxis","shouldForceComputeAxis","_measurePaneHeight","isAdjust","adjust","_measurePaneWidth","hasInstance","deleteSeparatorTopPaneId","updatePaneId","task","addInstance","finally","setPaneOptions","Array","keys","pop","_separatorStartDrag","_separatorDrag","ShapeTemplateClass","onDrawStart","hasPane","shapeInstance","annotationInstance","add","shouldUpdate","shouldAdd","updateSuccess","forceShouldAdjust","setDragEnabled","setTimezone","absoluteYAxis","absoluteTop","panes","ry","toDataURL","Chart","_chartPane","finder","getPane","getContainer","chartWidth","chartHeight","applyStyleOptions","setPriceVolumePrecision","setLeftMinVisibleBarCount","setRightMinVisibleBarCount","clearDataList","addData","calcInstance","lastDataTimestamp","cb","setLoadMoreCallback","paneOptions","hasTemplate","createTechnicalIndicator","addTemplate","promise","override","then","getTemplateInfo","getInstanceInfo","removeTechnicalIndicator","getTemplate","createShape","setInstanceOptions","createAnnotation","remove","createTag","HTMLElement","removeAllHtml","setZoomEnabled","zoomEnabled","setScrollEnabled","scrollEnabled","animationDuration","startTime","animation","progress","finished","dis","difBarCount","offsetRightSpace","scrollByDistance","getDataList","scrollToDataIndex","scaleDataSpace","difSpace","progressDataSpace","zoomAtCoordinate","zoomAtDataIndex","getConvertPictureUrl","chartBaseId","CHART_NAME_PREFIX","version","init","ds","errorMessage","dom","getElementById","chart","chartId","dispose","dcs","utils","klinecharts","averagePrice","bullAndBearIndex","differentOfMovingAverage","directionalMovementIndex","easeOfMovementValue","exponentialMovingAverage","movingAverage","movingAverageConvergenceDivergence","simpleMovingAverage","tripleExponentiallySmoothedAverage","currentRatio","momentum","psychologicalLine","rateOfChange","volumeRatio","awesomeOscillator","commodityChannelIndex","relativeStrengthIndex","stockIndicatorKDJ","williamsR","bollingerBands","stopAndReverse","onBalanceVolume","priceAndVolumeTrend","percents","valueDif","percent","horizontalRayLine","horizontalSegment","horizontalStraightLine","verticalRayLine","verticalSegment","verticalStraightLine","rayLine","segment","straightLine","parallelStraightLine","priceChannelLine","priceLine","fibonacciLine"],"mappings":"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"}